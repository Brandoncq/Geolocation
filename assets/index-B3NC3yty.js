var Vw=Object.defineProperty;var GS=b=>{throw TypeError(b)};var Kw=(b,e,i)=>e in b?Vw(b,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):b[e]=i;var mt=(b,e,i)=>Kw(b,typeof e!="symbol"?e+"":e,i),nb=(b,e,i)=>e.has(b)||GS("Cannot "+i);var c=(b,e,i)=>(nb(b,e,"read from private field"),i?i.call(b):e.get(b)),w=(b,e,i)=>e.has(b)?GS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(b):e.set(b,i),S=(b,e,i,n)=>(nb(b,e,"write to private field"),n?n.call(b,i):e.set(b,i),i),_=(b,e,i)=>(nb(b,e,"access private method"),i);var li=(b,e,i,n)=>({set _(l){S(b,e,l,i)},get _(){return c(b,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function i(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(l){if(l.ep)return;l.ep=!0;const o=i(l);fetch(l.href,o)}})();var ab={exports:{}},xu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jS;function Qw(){if(jS)return xu;jS=1;var b=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(n,l,o){var u=null;if(o!==void 0&&(u=""+o),l.key!==void 0&&(u=""+l.key),"key"in l){o={};for(var d in l)d!=="key"&&(o[d]=l[d])}else o=l;return l=o.ref,{$$typeof:b,type:n,key:u,ref:l!==void 0?l:null,props:o}}return xu.Fragment=e,xu.jsx=i,xu.jsxs=i,xu}var XS;function Zw(){return XS||(XS=1,ab.exports=Qw()),ab.exports}var Ge=Zw(),lb={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YS;function Ww(){if(YS)return St;YS=1;var b=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,C={};function O(D,V,$){this.props=D,this.context=V,this.refs=C,this.updater=$||E}O.prototype.isReactComponent={},O.prototype.setState=function(D,V){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,V,"setState")},O.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function M(){}M.prototype=O.prototype;function z(D,V,$){this.props=D,this.context=V,this.refs=C,this.updater=$||E}var F=z.prototype=new M;F.constructor=z,x(F,O.prototype),F.isPureReactComponent=!0;var I=Array.isArray,q={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function Q(D,V,$,Z,rt,Ct){return $=Ct.ref,{$$typeof:b,type:D,key:V,ref:$!==void 0?$:null,props:Ct}}function J(D,V){return Q(D.type,V,void 0,void 0,void 0,D.props)}function nt(D){return typeof D=="object"&&D!==null&&D.$$typeof===b}function yt(D){var V={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function($){return V[$]})}var at=/\/+/g;function gt(D,V){return typeof D=="object"&&D!==null&&D.key!=null?yt(""+D.key):V.toString(36)}function Tt(){}function Ot(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(Tt,Tt):(D.status="pending",D.then(function(V){D.status==="pending"&&(D.status="fulfilled",D.value=V)},function(V){D.status==="pending"&&(D.status="rejected",D.reason=V)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function pt(D,V,$,Z,rt){var Ct=typeof D;(Ct==="undefined"||Ct==="boolean")&&(D=null);var lt=!1;if(D===null)lt=!0;else switch(Ct){case"bigint":case"string":case"number":lt=!0;break;case"object":switch(D.$$typeof){case b:case e:lt=!0;break;case m:return lt=D._init,pt(lt(D._payload),V,$,Z,rt)}}if(lt)return rt=rt(D),lt=Z===""?"."+gt(D,0):Z,I(rt)?($="",lt!=null&&($=lt.replace(at,"$&/")+"/"),pt(rt,V,$,"",function(Yi){return Yi})):rt!=null&&(nt(rt)&&(rt=J(rt,$+(rt.key==null||D&&D.key===rt.key?"":(""+rt.key).replace(at,"$&/")+"/")+lt)),V.push(rt)),1;lt=0;var Mt=Z===""?".":Z+":";if(I(D))for(var It=0;It<D.length;It++)Z=D[It],Ct=Mt+gt(Z,It),lt+=pt(Z,V,$,Ct,rt);else if(It=v(D),typeof It=="function")for(D=It.call(D),It=0;!(Z=D.next()).done;)Z=Z.value,Ct=Mt+gt(Z,It++),lt+=pt(Z,V,$,Ct,rt);else if(Ct==="object"){if(typeof D.then=="function")return pt(Ot(D),V,$,Z,rt);throw V=String(D),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return lt}function P(D,V,$){if(D==null)return D;var Z=[],rt=0;return pt(D,Z,"","",function(Ct){return V.call($,Ct,rt++)}),Z}function X(D){if(D._status===-1){var V=D._result;V=V(),V.then(function($){(D._status===0||D._status===-1)&&(D._status=1,D._result=$)},function($){(D._status===0||D._status===-1)&&(D._status=2,D._result=$)}),D._status===-1&&(D._status=0,D._result=V)}if(D._status===1)return D._result.default;throw D._result}var W=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function kt(){}return St.Children={map:P,forEach:function(D,V,$){P(D,function(){V.apply(this,arguments)},$)},count:function(D){var V=0;return P(D,function(){V++}),V},toArray:function(D){return P(D,function(V){return V})||[]},only:function(D){if(!nt(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},St.Component=O,St.Fragment=i,St.Profiler=l,St.PureComponent=z,St.StrictMode=n,St.Suspense=f,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,St.__COMPILER_RUNTIME={__proto__:null,c:function(D){return q.H.useMemoCache(D)}},St.cache=function(D){return function(){return D.apply(null,arguments)}},St.cloneElement=function(D,V,$){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var Z=x({},D.props),rt=D.key,Ct=void 0;if(V!=null)for(lt in V.ref!==void 0&&(Ct=void 0),V.key!==void 0&&(rt=""+V.key),V)!G.call(V,lt)||lt==="key"||lt==="__self"||lt==="__source"||lt==="ref"&&V.ref===void 0||(Z[lt]=V[lt]);var lt=arguments.length-2;if(lt===1)Z.children=$;else if(1<lt){for(var Mt=Array(lt),It=0;It<lt;It++)Mt[It]=arguments[It+2];Z.children=Mt}return Q(D.type,rt,void 0,void 0,Ct,Z)},St.createContext=function(D){return D={$$typeof:u,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},St.createElement=function(D,V,$){var Z,rt={},Ct=null;if(V!=null)for(Z in V.key!==void 0&&(Ct=""+V.key),V)G.call(V,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(rt[Z]=V[Z]);var lt=arguments.length-2;if(lt===1)rt.children=$;else if(1<lt){for(var Mt=Array(lt),It=0;It<lt;It++)Mt[It]=arguments[It+2];rt.children=Mt}if(D&&D.defaultProps)for(Z in lt=D.defaultProps,lt)rt[Z]===void 0&&(rt[Z]=lt[Z]);return Q(D,Ct,void 0,void 0,null,rt)},St.createRef=function(){return{current:null}},St.forwardRef=function(D){return{$$typeof:d,render:D}},St.isValidElement=nt,St.lazy=function(D){return{$$typeof:m,_payload:{_status:-1,_result:D},_init:X}},St.memo=function(D,V){return{$$typeof:g,type:D,compare:V===void 0?null:V}},St.startTransition=function(D){var V=q.T,$={};q.T=$;try{var Z=D(),rt=q.S;rt!==null&&rt($,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(kt,W)}catch(Ct){W(Ct)}finally{q.T=V}},St.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},St.use=function(D){return q.H.use(D)},St.useActionState=function(D,V,$){return q.H.useActionState(D,V,$)},St.useCallback=function(D,V){return q.H.useCallback(D,V)},St.useContext=function(D){return q.H.useContext(D)},St.useDebugValue=function(){},St.useDeferredValue=function(D,V){return q.H.useDeferredValue(D,V)},St.useEffect=function(D,V,$){var Z=q.H;if(typeof $=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(D,V)},St.useId=function(){return q.H.useId()},St.useImperativeHandle=function(D,V,$){return q.H.useImperativeHandle(D,V,$)},St.useInsertionEffect=function(D,V){return q.H.useInsertionEffect(D,V)},St.useLayoutEffect=function(D,V){return q.H.useLayoutEffect(D,V)},St.useMemo=function(D,V){return q.H.useMemo(D,V)},St.useOptimistic=function(D,V){return q.H.useOptimistic(D,V)},St.useReducer=function(D,V,$){return q.H.useReducer(D,V,$)},St.useRef=function(D){return q.H.useRef(D)},St.useState=function(D){return q.H.useState(D)},St.useSyncExternalStore=function(D,V,$){return q.H.useSyncExternalStore(D,V,$)},St.useTransition=function(){return q.H.useTransition()},St.version="19.1.0",St}var VS;function k0(){return VS||(VS=1,lb.exports=Ww()),lb.exports}var yo=k0(),rb={exports:{}},Cu={},ob={exports:{}},cb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KS;function $w(){return KS||(KS=1,function(b){function e(P,X){var W=P.length;P.push(X);t:for(;0<W;){var kt=W-1>>>1,D=P[kt];if(0<l(D,X))P[kt]=X,P[W]=D,W=kt;else break t}}function i(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var X=P[0],W=P.pop();if(W!==X){P[0]=W;t:for(var kt=0,D=P.length,V=D>>>1;kt<V;){var $=2*(kt+1)-1,Z=P[$],rt=$+1,Ct=P[rt];if(0>l(Z,W))rt<D&&0>l(Ct,Z)?(P[kt]=Ct,P[rt]=W,kt=rt):(P[kt]=Z,P[$]=W,kt=$);else if(rt<D&&0>l(Ct,W))P[kt]=Ct,P[rt]=W,kt=rt;else break t}}return X}function l(P,X){var W=P.sortIndex-X.sortIndex;return W!==0?W:P.id-X.id}if(b.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;b.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();b.unstable_now=function(){return u.now()-d}}var f=[],g=[],m=1,y=null,v=3,E=!1,x=!1,C=!1,O=!1,M=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function I(P){for(var X=i(g);X!==null;){if(X.callback===null)n(g);else if(X.startTime<=P)n(g),X.sortIndex=X.expirationTime,e(f,X);else break;X=i(g)}}function q(P){if(C=!1,I(P),!x)if(i(f)!==null)x=!0,G||(G=!0,gt());else{var X=i(g);X!==null&&pt(q,X.startTime-P)}}var G=!1,Q=-1,J=5,nt=-1;function yt(){return O?!0:!(b.unstable_now()-nt<J)}function at(){if(O=!1,G){var P=b.unstable_now();nt=P;var X=!0;try{t:{x=!1,C&&(C=!1,z(Q),Q=-1),E=!0;var W=v;try{e:{for(I(P),y=i(f);y!==null&&!(y.expirationTime>P&&yt());){var kt=y.callback;if(typeof kt=="function"){y.callback=null,v=y.priorityLevel;var D=kt(y.expirationTime<=P);if(P=b.unstable_now(),typeof D=="function"){y.callback=D,I(P),X=!0;break e}y===i(f)&&n(f),I(P)}else n(f);y=i(f)}if(y!==null)X=!0;else{var V=i(g);V!==null&&pt(q,V.startTime-P),X=!1}}break t}finally{y=null,v=W,E=!1}X=void 0}}finally{X?gt():G=!1}}}var gt;if(typeof F=="function")gt=function(){F(at)};else if(typeof MessageChannel<"u"){var Tt=new MessageChannel,Ot=Tt.port2;Tt.port1.onmessage=at,gt=function(){Ot.postMessage(null)}}else gt=function(){M(at,0)};function pt(P,X){Q=M(function(){P(b.unstable_now())},X)}b.unstable_IdlePriority=5,b.unstable_ImmediatePriority=1,b.unstable_LowPriority=4,b.unstable_NormalPriority=3,b.unstable_Profiling=null,b.unstable_UserBlockingPriority=2,b.unstable_cancelCallback=function(P){P.callback=null},b.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<P?Math.floor(1e3/P):5},b.unstable_getCurrentPriorityLevel=function(){return v},b.unstable_next=function(P){switch(v){case 1:case 2:case 3:var X=3;break;default:X=v}var W=v;v=X;try{return P()}finally{v=W}},b.unstable_requestPaint=function(){O=!0},b.unstable_runWithPriority=function(P,X){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var W=v;v=P;try{return X()}finally{v=W}},b.unstable_scheduleCallback=function(P,X,W){var kt=b.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?kt+W:kt):W=kt,P){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=W+D,P={id:m++,callback:X,priorityLevel:P,startTime:W,expirationTime:D,sortIndex:-1},W>kt?(P.sortIndex=W,e(g,P),i(f)===null&&P===i(g)&&(C?(z(Q),Q=-1):C=!0,pt(q,W-kt))):(P.sortIndex=D,e(f,P),x||E||(x=!0,G||(G=!0,gt()))),P},b.unstable_shouldYield=yt,b.unstable_wrapCallback=function(P){var X=v;return function(){var W=v;v=X;try{return P.apply(this,arguments)}finally{v=W}}}}(cb)),cb}var QS;function Jw(){return QS||(QS=1,ob.exports=$w()),ob.exports}var ub={exports:{}},We={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZS;function tx(){if(ZS)return We;ZS=1;var b=k0();function e(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)g+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var n={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(f,g,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:f,containerInfo:g,implementation:m}}var u=b.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return We.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,We.createPortal=function(f,g){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return o(f,g,null,m)},We.flushSync=function(f){var g=u.T,m=n.p;try{if(u.T=null,n.p=2,f)return f()}finally{u.T=g,n.p=m,n.d.f()}},We.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,n.d.C(f,g))},We.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},We.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var m=g.as,y=d(m,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,E=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;m==="style"?n.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:E}):m==="script"&&n.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:E,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},We.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var m=d(g.as,g.crossOrigin);n.d.M(f,{crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&n.d.M(f)},We.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var m=g.as,y=d(m,g.crossOrigin);n.d.L(f,m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},We.preloadModule=function(f,g){if(typeof f=="string")if(g){var m=d(g.as,g.crossOrigin);n.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else n.d.m(f)},We.requestFormReset=function(f){n.d.r(f)},We.unstable_batchedUpdates=function(f,g){return f(g)},We.useFormState=function(f,g,m){return u.H.useFormState(f,g,m)},We.useFormStatus=function(){return u.H.useHostTransitionStatus()},We.version="19.1.0",We}var WS;function ex(){if(WS)return ub.exports;WS=1;function b(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b)}catch(e){console.error(e)}}return b(),ub.exports=tx(),ub.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $S;function ix(){if($S)return Cu;$S=1;var b=Jw(),e=k0(),i=ex();function n(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function o(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function u(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function d(t){if(o(t)!==t)throw Error(n(188))}function f(t){var s=t.alternate;if(!s){if(s=o(t),s===null)throw Error(n(188));return s!==t?null:t}for(var a=t,r=s;;){var h=a.return;if(h===null)break;var p=h.alternate;if(p===null){if(r=h.return,r!==null){a=r;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===a)return d(h),t;if(p===r)return d(h),s;p=p.sibling}throw Error(n(188))}if(a.return!==r.return)a=h,r=p;else{for(var A=!1,T=h.child;T;){if(T===a){A=!0,a=h,r=p;break}if(T===r){A=!0,r=h,a=p;break}T=T.sibling}if(!A){for(T=p.child;T;){if(T===a){A=!0,a=p,r=h;break}if(T===r){A=!0,r=p,a=h;break}T=T.sibling}if(!A)throw Error(n(189))}}if(a.alternate!==r)throw Error(n(190))}if(a.tag!==3)throw Error(n(188));return a.stateNode.current===a?t:s}function g(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=g(t),s!==null)return s;t=t.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),F=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),nt=Symbol.for("react.activity"),yt=Symbol.for("react.memo_cache_sentinel"),at=Symbol.iterator;function gt(t){return t===null||typeof t!="object"?null:(t=at&&t[at]||t["@@iterator"],typeof t=="function"?t:null)}var Tt=Symbol.for("react.client.reference");function Ot(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Tt?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case x:return"Fragment";case O:return"Profiler";case C:return"StrictMode";case q:return"Suspense";case G:return"SuspenseList";case nt:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case E:return"Portal";case F:return(t.displayName||"Context")+".Provider";case z:return(t._context.displayName||"Context")+".Consumer";case I:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Q:return s=t.displayName||null,s!==null?s:Ot(t.type)||"Memo";case J:s=t._payload,t=t._init;try{return Ot(t(s))}catch{}}return null}var pt=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},kt=[],D=-1;function V(t){return{current:t}}function $(t){0>D||(t.current=kt[D],kt[D]=null,D--)}function Z(t,s){D++,kt[D]=t.current,t.current=s}var rt=V(null),Ct=V(null),lt=V(null),Mt=V(null);function It(t,s){switch(Z(lt,s),Z(Ct,t),Z(rt,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?bS(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=bS(s),t=yS(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$(rt),Z(rt,t)}function Yi(){$(rt),$(Ct),$(lt)}function Mc(t){t.memoizedState!==null&&Z(Mt,t);var s=rt.current,a=yS(s,t.type);s!==a&&(Z(Ct,t),Z(rt,a))}function md(t){Ct.current===t&&($(rt),$(Ct)),Mt.current===t&&($(Mt),Su._currentValue=W)}var jg=Object.prototype.hasOwnProperty,Xg=b.unstable_scheduleCallback,Yg=b.unstable_cancelCallback,w1=b.unstable_shouldYield,x1=b.unstable_requestPaint,Os=b.unstable_now,C1=b.unstable_getCurrentPriorityLevel,W0=b.unstable_ImmediatePriority,$0=b.unstable_UserBlockingPriority,bd=b.unstable_NormalPriority,M1=b.unstable_LowPriority,J0=b.unstable_IdlePriority,R1=b.log,D1=b.unstable_setDisableYieldValue,Rc=null,wi=null;function Jn(t){if(typeof R1=="function"&&D1(t),wi&&typeof wi.setStrictMode=="function")try{wi.setStrictMode(Rc,t)}catch{}}var xi=Math.clz32?Math.clz32:N1,O1=Math.log,L1=Math.LN2;function N1(t){return t>>>=0,t===0?32:31-(O1(t)/L1|0)|0}var yd=256,vd=4194304;function nl(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ad(t,s,a){var r=t.pendingLanes;if(r===0)return 0;var h=0,p=t.suspendedLanes,A=t.pingedLanes;t=t.warmLanes;var T=r&134217727;return T!==0?(r=T&~p,r!==0?h=nl(r):(A&=T,A!==0?h=nl(A):a||(a=T&~t,a!==0&&(h=nl(a))))):(T=r&~p,T!==0?h=nl(T):A!==0?h=nl(A):a||(a=r&~t,a!==0&&(h=nl(a)))),h===0?0:s!==0&&s!==h&&(s&p)===0&&(p=h&-h,a=s&-s,p>=a||p===32&&(a&4194048)!==0)?s:h}function Dc(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function k1(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ty(){var t=yd;return yd<<=1,(yd&4194048)===0&&(yd=256),t}function ey(){var t=vd;return vd<<=1,(vd&62914560)===0&&(vd=4194304),t}function Vg(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Oc(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function H1(t,s,a,r,h,p){var A=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,R=t.expirationTimes,H=t.hiddenUpdates;for(a=A&~a;0<a;){var j=31-xi(a),K=1<<j;T[j]=0,R[j]=-1;var U=H[j];if(U!==null)for(H[j]=null,j=0;j<U.length;j++){var B=U[j];B!==null&&(B.lane&=-536870913)}a&=~K}r!==0&&iy(t,r,0),p!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=p&~(A&~s))}function iy(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var r=31-xi(s);t.entangledLanes|=s,t.entanglements[r]=t.entanglements[r]|1073741824|a&4194090}function sy(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var r=31-xi(a),h=1<<r;h&s|t[r]&s&&(t[r]|=s),a&=~h}}function Kg(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Qg(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ny(){var t=X.p;return t!==0?t:(t=window.event,t===void 0?32:FS(t.type))}function z1(t,s){var a=X.p;try{return X.p=t,s()}finally{X.p=a}}var ta=Math.random().toString(36).slice(2),Qe="__reactFiber$"+ta,fi="__reactProps$"+ta,Lr="__reactContainer$"+ta,Zg="__reactEvents$"+ta,F1="__reactListeners$"+ta,U1="__reactHandles$"+ta,ay="__reactResources$"+ta,Lc="__reactMarker$"+ta;function Wg(t){delete t[Qe],delete t[fi],delete t[Zg],delete t[F1],delete t[U1]}function Nr(t){var s=t[Qe];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Lr]||a[Qe]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=_S(t);t!==null;){if(a=t[Qe])return a;t=_S(t)}return s}t=a,a=t.parentNode}return null}function kr(t){if(t=t[Qe]||t[Lr]){var s=t.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return t}return null}function Nc(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(n(33))}function Hr(t){var s=t[ay];return s||(s=t[ay]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Oe(t){t[Lc]=!0}var ly=new Set,ry={};function al(t,s){zr(t,s),zr(t+"Capture",s)}function zr(t,s){for(ry[t]=s,t=0;t<s.length;t++)ly.add(s[t])}var B1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),oy={},cy={};function P1(t){return jg.call(cy,t)?!0:jg.call(oy,t)?!1:B1.test(t)?cy[t]=!0:(oy[t]=!0,!1)}function Sd(t,s,a){if(P1(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var r=s.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function _d(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function sn(t,s,a,r){if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+r)}}var $g,uy;function Fr(t){if($g===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);$g=s&&s[1]||"",uy=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$g+t+uy}var Jg=!1;function tp(t,s){if(!t||Jg)return"";Jg=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(s){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(B){var U=B}Reflect.construct(t,[],K)}else{try{K.call()}catch(B){U=B}t.call(K.prototype)}}else{try{throw Error()}catch(B){U=B}(K=t())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(B){if(B&&U&&typeof B.stack=="string")return[B.stack,U.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=r.DetermineComponentFrameRoot(),A=p[0],T=p[1];if(A&&T){var R=A.split(`
`),H=T.split(`
`);for(h=r=0;r<R.length&&!R[r].includes("DetermineComponentFrameRoot");)r++;for(;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;if(r===R.length||h===H.length)for(r=R.length-1,h=H.length-1;1<=r&&0<=h&&R[r]!==H[h];)h--;for(;1<=r&&0<=h;r--,h--)if(R[r]!==H[h]){if(r!==1||h!==1)do if(r--,h--,0>h||R[r]!==H[h]){var j=`
`+R[r].replace(" at new "," at ");return t.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",t.displayName)),j}while(1<=r&&0<=h);break}}}finally{Jg=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Fr(a):""}function I1(t){switch(t.tag){case 26:case 27:case 5:return Fr(t.type);case 16:return Fr("Lazy");case 13:return Fr("Suspense");case 19:return Fr("SuspenseList");case 0:case 15:return tp(t.type,!1);case 11:return tp(t.type.render,!1);case 1:return tp(t.type,!0);case 31:return Fr("Activity");default:return""}}function hy(t){try{var s="";do s+=I1(t),t=t.return;while(t);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Vi(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dy(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function q1(t){var s=dy(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),r=""+t[s];if(!t.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,p=a.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(A){r=""+A,p.call(this,A)}}),Object.defineProperty(t,s,{enumerable:a.enumerable}),{getValue:function(){return r},setValue:function(A){r=""+A},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ed(t){t._valueTracker||(t._valueTracker=q1(t))}function fy(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),r="";return t&&(r=dy(t)?t.checked?"true":"false":t.value),t=r,t!==a?(s.setValue(t),!0):!1}function Td(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var G1=/[\n"\\]/g;function Ki(t){return t.replace(G1,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ep(t,s,a,r,h,p,A,T){t.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.type=A:t.removeAttribute("type"),s!=null?A==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Vi(s)):t.value!==""+Vi(s)&&(t.value=""+Vi(s)):A!=="submit"&&A!=="reset"||t.removeAttribute("value"),s!=null?ip(t,A,Vi(s)):a!=null?ip(t,A,Vi(a)):r!=null&&t.removeAttribute("value"),h==null&&p!=null&&(t.defaultChecked=!!p),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Vi(T):t.removeAttribute("name")}function gy(t,s,a,r,h,p,A,T){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),s!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;a=a!=null?""+Vi(a):"",s=s!=null?""+Vi(s):a,T||s===t.value||(t.value=s),t.defaultValue=s}r=r??h,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=T?t.checked:!!r,t.defaultChecked=!!r,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(t.name=A)}function ip(t,s,a){s==="number"&&Td(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ur(t,s,a,r){if(t=t.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=s.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&r&&(t[a].defaultSelected=!0)}else{for(a=""+Vi(a),s=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,r&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function py(t,s,a){if(s!=null&&(s=""+Vi(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+Vi(a):""}function my(t,s,a,r){if(s==null){if(r!=null){if(a!=null)throw Error(n(92));if(pt(r)){if(1<r.length)throw Error(n(93));r=r[0]}a=r}a==null&&(a=""),s=a}a=Vi(s),t.defaultValue=a,r=t.textContent,r===a&&r!==""&&r!==null&&(t.value=r)}function Br(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var j1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function by(t,s,a){var r=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?r?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":r?t.setProperty(s,a):typeof a!="number"||a===0||j1.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function yy(t,s,a){if(s!=null&&typeof s!="object")throw Error(n(62));if(t=t.style,a!=null){for(var r in a)!a.hasOwnProperty(r)||s!=null&&s.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var h in s)r=s[h],s.hasOwnProperty(h)&&a[h]!==r&&by(t,h,r)}else for(var p in s)s.hasOwnProperty(p)&&by(t,p,s[p])}function sp(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var X1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Y1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wd(t){return Y1.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var np=null;function ap(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pr=null,Ir=null;function vy(t){var s=kr(t);if(s&&(t=s.stateNode)){var a=t[fi]||null;t:switch(t=s.stateNode,s.type){case"input":if(ep(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ki(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var r=a[s];if(r!==t&&r.form===t.form){var h=r[fi]||null;if(!h)throw Error(n(90));ep(r,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)r=a[s],r.form===t.form&&fy(r)}break t;case"textarea":py(t,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&Ur(t,!!a.multiple,s,!1)}}}var lp=!1;function Ay(t,s,a){if(lp)return t(s,a);lp=!0;try{var r=t(s);return r}finally{if(lp=!1,(Pr!==null||Ir!==null)&&(hf(),Pr&&(s=Pr,t=Ir,Ir=Pr=null,vy(s),t)))for(s=0;s<t.length;s++)vy(t[s])}}function kc(t,s){var a=t.stateNode;if(a===null)return null;var r=a[fi]||null;if(r===null)return null;a=r[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break t;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(n(231,s,typeof a));return a}var nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rp=!1;if(nn)try{var Hc={};Object.defineProperty(Hc,"passive",{get:function(){rp=!0}}),window.addEventListener("test",Hc,Hc),window.removeEventListener("test",Hc,Hc)}catch{rp=!1}var ea=null,op=null,xd=null;function Sy(){if(xd)return xd;var t,s=op,a=s.length,r,h="value"in ea?ea.value:ea.textContent,p=h.length;for(t=0;t<a&&s[t]===h[t];t++);var A=a-t;for(r=1;r<=A&&s[a-r]===h[p-r];r++);return xd=h.slice(t,1<r?1-r:void 0)}function Cd(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Md(){return!0}function _y(){return!1}function gi(t){function s(a,r,h,p,A){this._reactName=a,this._targetInst=h,this.type=r,this.nativeEvent=p,this.target=A,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Md:_y,this.isPropagationStopped=_y,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Md)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Md)},persist:function(){},isPersistent:Md}),s}var ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rd=gi(ll),zc=m({},ll,{view:0,detail:0}),V1=gi(zc),cp,up,Fc,Dd=m({},zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fc&&(Fc&&t.type==="mousemove"?(cp=t.screenX-Fc.screenX,up=t.screenY-Fc.screenY):up=cp=0,Fc=t),cp)},movementY:function(t){return"movementY"in t?t.movementY:up}}),Ey=gi(Dd),K1=m({},Dd,{dataTransfer:0}),Q1=gi(K1),Z1=m({},zc,{relatedTarget:0}),hp=gi(Z1),W1=m({},ll,{animationName:0,elapsedTime:0,pseudoElement:0}),$1=gi(W1),J1=m({},ll,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tT=gi(J1),eT=m({},ll,{data:0}),Ty=gi(eT),iT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aT(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=nT[t])?!!s[t]:!1}function dp(){return aT}var lT=m({},zc,{key:function(t){if(t.key){var s=iT[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Cd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dp,charCode:function(t){return t.type==="keypress"?Cd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rT=gi(lT),oT=m({},Dd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wy=gi(oT),cT=m({},zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dp}),uT=gi(cT),hT=m({},ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),dT=gi(hT),fT=m({},Dd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gT=gi(fT),pT=m({},ll,{newState:0,oldState:0}),mT=gi(pT),bT=[9,13,27,32],fp=nn&&"CompositionEvent"in window,Uc=null;nn&&"documentMode"in document&&(Uc=document.documentMode);var yT=nn&&"TextEvent"in window&&!Uc,xy=nn&&(!fp||Uc&&8<Uc&&11>=Uc),Cy=" ",My=!1;function Ry(t,s){switch(t){case"keyup":return bT.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qr=!1;function vT(t,s){switch(t){case"compositionend":return Dy(s);case"keypress":return s.which!==32?null:(My=!0,Cy);case"textInput":return t=s.data,t===Cy&&My?null:t;default:return null}}function AT(t,s){if(qr)return t==="compositionend"||!fp&&Ry(t,s)?(t=Sy(),xd=op=ea=null,qr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return xy&&s.locale!=="ko"?null:s.data;default:return null}}var ST={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oy(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!ST[t.type]:s==="textarea"}function Ly(t,s,a,r){Pr?Ir?Ir.push(r):Ir=[r]:Pr=r,s=bf(s,"onChange"),0<s.length&&(a=new Rd("onChange","change",null,a,r),t.push({event:a,listeners:s}))}var Bc=null,Pc=null;function _T(t){dS(t,0)}function Od(t){var s=Nc(t);if(fy(s))return t}function Ny(t,s){if(t==="change")return s}var ky=!1;if(nn){var gp;if(nn){var pp="oninput"in document;if(!pp){var Hy=document.createElement("div");Hy.setAttribute("oninput","return;"),pp=typeof Hy.oninput=="function"}gp=pp}else gp=!1;ky=gp&&(!document.documentMode||9<document.documentMode)}function zy(){Bc&&(Bc.detachEvent("onpropertychange",Fy),Pc=Bc=null)}function Fy(t){if(t.propertyName==="value"&&Od(Pc)){var s=[];Ly(s,Pc,t,ap(t)),Ay(_T,s)}}function ET(t,s,a){t==="focusin"?(zy(),Bc=s,Pc=a,Bc.attachEvent("onpropertychange",Fy)):t==="focusout"&&zy()}function TT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Od(Pc)}function wT(t,s){if(t==="click")return Od(s)}function xT(t,s){if(t==="input"||t==="change")return Od(s)}function CT(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Ci=typeof Object.is=="function"?Object.is:CT;function Ic(t,s){if(Ci(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),r=Object.keys(s);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var h=a[r];if(!jg.call(s,h)||!Ci(t[h],s[h]))return!1}return!0}function Uy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function By(t,s){var a=Uy(t);t=0;for(var r;a;){if(a.nodeType===3){if(r=t+a.textContent.length,t<=s&&r>=s)return{node:a,offset:s-t};t=r}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Uy(a)}}function Py(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Py(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Iy(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Td(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Td(t.document)}return s}function mp(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var MT=nn&&"documentMode"in document&&11>=document.documentMode,Gr=null,bp=null,qc=null,yp=!1;function qy(t,s,a){var r=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;yp||Gr==null||Gr!==Td(r)||(r=Gr,"selectionStart"in r&&mp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qc&&Ic(qc,r)||(qc=r,r=bf(bp,"onSelect"),0<r.length&&(s=new Rd("onSelect","select",null,s,a),t.push({event:s,listeners:r}),s.target=Gr)))}function rl(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var jr={animationend:rl("Animation","AnimationEnd"),animationiteration:rl("Animation","AnimationIteration"),animationstart:rl("Animation","AnimationStart"),transitionrun:rl("Transition","TransitionRun"),transitionstart:rl("Transition","TransitionStart"),transitioncancel:rl("Transition","TransitionCancel"),transitionend:rl("Transition","TransitionEnd")},vp={},Gy={};nn&&(Gy=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);function ol(t){if(vp[t])return vp[t];if(!jr[t])return t;var s=jr[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Gy)return vp[t]=s[a];return t}var jy=ol("animationend"),Xy=ol("animationiteration"),Yy=ol("animationstart"),RT=ol("transitionrun"),DT=ol("transitionstart"),OT=ol("transitioncancel"),Vy=ol("transitionend"),Ky=new Map,Ap="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ap.push("scrollEnd");function ds(t,s){Ky.set(t,s),al(s,[t])}var Qy=new WeakMap;function Qi(t,s){if(typeof t=="object"&&t!==null){var a=Qy.get(t);return a!==void 0?a:(s={value:t,source:s,stack:hy(s)},Qy.set(t,s),s)}return{value:t,source:s,stack:hy(s)}}var Zi=[],Xr=0,Sp=0;function Ld(){for(var t=Xr,s=Sp=Xr=0;s<t;){var a=Zi[s];Zi[s++]=null;var r=Zi[s];Zi[s++]=null;var h=Zi[s];Zi[s++]=null;var p=Zi[s];if(Zi[s++]=null,r!==null&&h!==null){var A=r.pending;A===null?h.next=h:(h.next=A.next,A.next=h),r.pending=h}p!==0&&Zy(a,h,p)}}function Nd(t,s,a,r){Zi[Xr++]=t,Zi[Xr++]=s,Zi[Xr++]=a,Zi[Xr++]=r,Sp|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function _p(t,s,a,r){return Nd(t,s,a,r),kd(t)}function Yr(t,s){return Nd(t,null,null,s),kd(t)}function Zy(t,s,a){t.lanes|=a;var r=t.alternate;r!==null&&(r.lanes|=a);for(var h=!1,p=t.return;p!==null;)p.childLanes|=a,r=p.alternate,r!==null&&(r.childLanes|=a),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(h=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,h&&s!==null&&(h=31-xi(a),t=p.hiddenUpdates,r=t[h],r===null?t[h]=[s]:r.push(s),s.lane=a|536870912),p):null}function kd(t){if(50<fu)throw fu=0,Mm=null,Error(n(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Vr={};function LT(t,s,a,r){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(t,s,a,r){return new LT(t,s,a,r)}function Ep(t){return t=t.prototype,!(!t||!t.isReactComponent)}function an(t,s){var a=t.alternate;return a===null?(a=Mi(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Wy(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Hd(t,s,a,r,h,p){var A=0;if(r=t,typeof t=="function")Ep(t)&&(A=1);else if(typeof t=="string")A=kw(t,a,rt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case nt:return t=Mi(31,a,s,h),t.elementType=nt,t.lanes=p,t;case x:return cl(a.children,h,p,s);case C:A=8,h|=24;break;case O:return t=Mi(12,a,s,h|2),t.elementType=O,t.lanes=p,t;case q:return t=Mi(13,a,s,h),t.elementType=q,t.lanes=p,t;case G:return t=Mi(19,a,s,h),t.elementType=G,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case M:case F:A=10;break t;case z:A=9;break t;case I:A=11;break t;case Q:A=14;break t;case J:A=16,r=null;break t}A=29,a=Error(n(130,t===null?"null":typeof t,"")),r=null}return s=Mi(A,a,s,h),s.elementType=t,s.type=r,s.lanes=p,s}function cl(t,s,a,r){return t=Mi(7,t,r,s),t.lanes=a,t}function Tp(t,s,a){return t=Mi(6,t,null,s),t.lanes=a,t}function wp(t,s,a){return s=Mi(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Kr=[],Qr=0,zd=null,Fd=0,Wi=[],$i=0,ul=null,ln=1,rn="";function hl(t,s){Kr[Qr++]=Fd,Kr[Qr++]=zd,zd=t,Fd=s}function $y(t,s,a){Wi[$i++]=ln,Wi[$i++]=rn,Wi[$i++]=ul,ul=t;var r=ln;t=rn;var h=32-xi(r)-1;r&=~(1<<h),a+=1;var p=32-xi(s)+h;if(30<p){var A=h-h%5;p=(r&(1<<A)-1).toString(32),r>>=A,h-=A,ln=1<<32-xi(s)+h|a<<h|r,rn=p+t}else ln=1<<p|a<<h|r,rn=t}function xp(t){t.return!==null&&(hl(t,1),$y(t,1,0))}function Cp(t){for(;t===zd;)zd=Kr[--Qr],Kr[Qr]=null,Fd=Kr[--Qr],Kr[Qr]=null;for(;t===ul;)ul=Wi[--$i],Wi[$i]=null,rn=Wi[--$i],Wi[$i]=null,ln=Wi[--$i],Wi[$i]=null}var ai=null,ue=null,Bt=!1,dl=null,Ls=!1,Mp=Error(n(519));function fl(t){var s=Error(n(418,""));throw Xc(Qi(s,t)),Mp}function Jy(t){var s=t.stateNode,a=t.type,r=t.memoizedProps;switch(s[Qe]=t,s[fi]=r,a){case"dialog":Nt("cancel",s),Nt("close",s);break;case"iframe":case"object":case"embed":Nt("load",s);break;case"video":case"audio":for(a=0;a<pu.length;a++)Nt(pu[a],s);break;case"source":Nt("error",s);break;case"img":case"image":case"link":Nt("error",s),Nt("load",s);break;case"details":Nt("toggle",s);break;case"input":Nt("invalid",s),gy(s,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),Ed(s);break;case"select":Nt("invalid",s);break;case"textarea":Nt("invalid",s),my(s,r.value,r.defaultValue,r.children),Ed(s)}a=r.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||r.suppressHydrationWarning===!0||mS(s.textContent,a)?(r.popover!=null&&(Nt("beforetoggle",s),Nt("toggle",s)),r.onScroll!=null&&Nt("scroll",s),r.onScrollEnd!=null&&Nt("scrollend",s),r.onClick!=null&&(s.onclick=yf),s=!0):s=!1,s||fl(t)}function tv(t){for(ai=t.return;ai;)switch(ai.tag){case 5:case 13:Ls=!1;return;case 27:case 3:Ls=!0;return;default:ai=ai.return}}function Gc(t){if(t!==ai)return!1;if(!Bt)return tv(t),Bt=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||jm(t.type,t.memoizedProps)),a=!a),a&&ue&&fl(t),tv(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));t:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(s===0){ue=gs(t.nextSibling);break t}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;t=t.nextSibling}ue=null}}else s===27?(s=ue,ba(t.type)?(t=Km,Km=null,ue=t):ue=s):ue=ai?gs(t.stateNode.nextSibling):null;return!0}function jc(){ue=ai=null,Bt=!1}function ev(){var t=dl;return t!==null&&(bi===null?bi=t:bi.push.apply(bi,t),dl=null),t}function Xc(t){dl===null?dl=[t]:dl.push(t)}var Rp=V(null),gl=null,on=null;function ia(t,s,a){Z(Rp,s._currentValue),s._currentValue=a}function cn(t){t._currentValue=Rp.current,$(Rp)}function Dp(t,s,a){for(;t!==null;){var r=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,r!==null&&(r.childLanes|=s)):r!==null&&(r.childLanes&s)!==s&&(r.childLanes|=s),t===a)break;t=t.return}}function Op(t,s,a,r){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var p=h.dependencies;if(p!==null){var A=h.child;p=p.firstContext;t:for(;p!==null;){var T=p;p=h;for(var R=0;R<s.length;R++)if(T.context===s[R]){p.lanes|=a,T=p.alternate,T!==null&&(T.lanes|=a),Dp(p.return,a,t),r||(A=null);break t}p=T.next}}else if(h.tag===18){if(A=h.return,A===null)throw Error(n(341));A.lanes|=a,p=A.alternate,p!==null&&(p.lanes|=a),Dp(A,a,t),A=null}else A=h.child;if(A!==null)A.return=h;else for(A=h;A!==null;){if(A===t){A=null;break}if(h=A.sibling,h!==null){h.return=A.return,A=h;break}A=A.return}h=A}}function Yc(t,s,a,r){t=null;for(var h=s,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var A=h.alternate;if(A===null)throw Error(n(387));if(A=A.memoizedProps,A!==null){var T=h.type;Ci(h.pendingProps.value,A.value)||(t!==null?t.push(T):t=[T])}}else if(h===Mt.current){if(A=h.alternate,A===null)throw Error(n(387));A.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Su):t=[Su])}h=h.return}t!==null&&Op(s,t,a,r),s.flags|=262144}function Ud(t){for(t=t.firstContext;t!==null;){if(!Ci(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function pl(t){gl=t,on=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ze(t){return iv(gl,t)}function Bd(t,s){return gl===null&&pl(t),iv(t,s)}function iv(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},on===null){if(t===null)throw Error(n(308));on=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else on=on.next=s;return a}var NT=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,r){t.push(r)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},kT=b.unstable_scheduleCallback,HT=b.unstable_NormalPriority,_e={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lp(){return{controller:new NT,data:new Map,refCount:0}}function Vc(t){t.refCount--,t.refCount===0&&kT(HT,function(){t.controller.abort()})}var Kc=null,Np=0,Zr=0,Wr=null;function zT(t,s){if(Kc===null){var a=Kc=[];Np=0,Zr=Hm(),Wr={status:"pending",value:void 0,then:function(r){a.push(r)}}}return Np++,s.then(sv,sv),s}function sv(){if(--Np===0&&Kc!==null){Wr!==null&&(Wr.status="fulfilled");var t=Kc;Kc=null,Zr=0,Wr=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function FT(t,s){var a=[],r={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){r.status="fulfilled",r.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(r.status="rejected",r.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),r}var nv=P.S;P.S=function(t,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&zT(t,s),nv!==null&&nv(t,s)};var ml=V(null);function kp(){var t=ml.current;return t!==null?t:te.pooledCache}function Pd(t,s){s===null?Z(ml,ml.current):Z(ml,s.pool)}function av(){var t=kp();return t===null?null:{parent:_e._currentValue,pool:t}}var Qc=Error(n(460)),lv=Error(n(474)),Id=Error(n(542)),Hp={then:function(){}};function rv(t){return t=t.status,t==="fulfilled"||t==="rejected"}function qd(){}function ov(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(qd,qd),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,uv(t),t;default:if(typeof s.status=="string")s.then(qd,qd);else{if(t=te,t!==null&&100<t.shellSuspendCounter)throw Error(n(482));t=s,t.status="pending",t.then(function(r){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=r}},function(r){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=r}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,uv(t),t}throw Zc=s,Qc}}var Zc=null;function cv(){if(Zc===null)throw Error(n(459));var t=Zc;return Zc=null,t}function uv(t){if(t===Qc||t===Id)throw Error(n(483))}var sa=!1;function zp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fp(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function na(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function aa(t,s,a){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(Gt&2)!==0){var h=r.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),r.pending=s,s=kd(t),Zy(t,null,a),s}return Nd(t,r,s,a),kd(t)}function Wc(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var r=s.lanes;r&=t.pendingLanes,a|=r,s.lanes=a,sy(t,a)}}function Up(t,s){var a=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,a===r)){var h=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?h=p=A:p=p.next=A,a=a.next}while(a!==null);p===null?h=p=s:p=p.next=s}else h=p=s;a={baseState:r.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:r.shared,callbacks:r.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Bp=!1;function $c(){if(Bp){var t=Wr;if(t!==null)throw t}}function Jc(t,s,a,r){Bp=!1;var h=t.updateQueue;sa=!1;var p=h.firstBaseUpdate,A=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var R=T,H=R.next;R.next=null,A===null?p=H:A.next=H,A=R;var j=t.alternate;j!==null&&(j=j.updateQueue,T=j.lastBaseUpdate,T!==A&&(T===null?j.firstBaseUpdate=H:T.next=H,j.lastBaseUpdate=R))}if(p!==null){var K=h.baseState;A=0,j=H=R=null,T=p;do{var U=T.lane&-536870913,B=U!==T.lane;if(B?(Ft&U)===U:(r&U)===U){U!==0&&U===Zr&&(Bp=!0),j!==null&&(j=j.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var ft=t,ht=T;U=s;var Zt=a;switch(ht.tag){case 1:if(ft=ht.payload,typeof ft=="function"){K=ft.call(Zt,K,U);break t}K=ft;break t;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=ht.payload,U=typeof ft=="function"?ft.call(Zt,K,U):ft,U==null)break t;K=m({},K,U);break t;case 2:sa=!0}}U=T.callback,U!==null&&(t.flags|=64,B&&(t.flags|=8192),B=h.callbacks,B===null?h.callbacks=[U]:B.push(U))}else B={lane:U,tag:T.tag,payload:T.payload,callback:T.callback,next:null},j===null?(H=j=B,R=K):j=j.next=B,A|=U;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;B=T,T=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);j===null&&(R=K),h.baseState=R,h.firstBaseUpdate=H,h.lastBaseUpdate=j,p===null&&(h.shared.lanes=0),fa|=A,t.lanes=A,t.memoizedState=K}}function hv(t,s){if(typeof t!="function")throw Error(n(191,t));t.call(s)}function dv(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)hv(a[t],s)}var $r=V(null),Gd=V(0);function fv(t,s){t=mn,Z(Gd,t),Z($r,s),mn=t|s.baseLanes}function Pp(){Z(Gd,mn),Z($r,$r.current)}function Ip(){mn=Gd.current,$($r),$(Gd)}var la=0,wt=null,Kt=null,be=null,jd=!1,Jr=!1,bl=!1,Xd=0,tu=0,to=null,UT=0;function fe(){throw Error(n(321))}function qp(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Ci(t[a],s[a]))return!1;return!0}function Gp(t,s,a,r,h,p){return la=p,wt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,P.H=t===null||t.memoizedState===null?Zv:Wv,bl=!1,p=a(r,h),bl=!1,Jr&&(p=pv(s,a,r,h)),gv(t),p}function gv(t){P.H=Wd;var s=Kt!==null&&Kt.next!==null;if(la=0,be=Kt=wt=null,jd=!1,tu=0,to=null,s)throw Error(n(300));t===null||Le||(t=t.dependencies,t!==null&&Ud(t)&&(Le=!0))}function pv(t,s,a,r){wt=t;var h=0;do{if(Jr&&(to=null),tu=0,Jr=!1,25<=h)throw Error(n(301));if(h+=1,be=Kt=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}P.H=XT,p=s(a,r)}while(Jr);return p}function BT(){var t=P.H,s=t.useState()[0];return s=typeof s.then=="function"?eu(s):s,t=t.useState()[0],(Kt!==null?Kt.memoizedState:null)!==t&&(wt.flags|=1024),s}function jp(){var t=Xd!==0;return Xd=0,t}function Xp(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function Yp(t){if(jd){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}jd=!1}la=0,be=Kt=wt=null,Jr=!1,tu=Xd=0,to=null}function pi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?wt.memoizedState=be=t:be=be.next=t,be}function ye(){if(Kt===null){var t=wt.alternate;t=t!==null?t.memoizedState:null}else t=Kt.next;var s=be===null?wt.memoizedState:be.next;if(s!==null)be=s,Kt=t;else{if(t===null)throw wt.alternate===null?Error(n(467)):Error(n(310));Kt=t,t={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},be===null?wt.memoizedState=be=t:be=be.next=t}return be}function Vp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eu(t){var s=tu;return tu+=1,to===null&&(to=[]),t=ov(to,t,s),s=wt,(be===null?s.memoizedState:be.next)===null&&(s=s.alternate,P.H=s===null||s.memoizedState===null?Zv:Wv),t}function Yd(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return eu(t);if(t.$$typeof===F)return Ze(t)}throw Error(n(438,String(t)))}function Kp(t){var s=null,a=wt.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var r=wt.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(s={data:r.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Vp(),wt.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),r=0;r<t;r++)a[r]=yt;return s.index++,a}function un(t,s){return typeof s=="function"?s(t):s}function Vd(t){var s=ye();return Qp(s,Kt,t)}function Qp(t,s,a){var r=t.queue;if(r===null)throw Error(n(311));r.lastRenderedReducer=a;var h=t.baseQueue,p=r.pending;if(p!==null){if(h!==null){var A=h.next;h.next=p.next,p.next=A}s.baseQueue=h=p,r.pending=null}if(p=t.baseState,h===null)t.memoizedState=p;else{s=h.next;var T=A=null,R=null,H=s,j=!1;do{var K=H.lane&-536870913;if(K!==H.lane?(Ft&K)===K:(la&K)===K){var U=H.revertLane;if(U===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),K===Zr&&(j=!0);else if((la&U)===U){H=H.next,U===Zr&&(j=!0);continue}else K={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},R===null?(T=R=K,A=p):R=R.next=K,wt.lanes|=U,fa|=U;K=H.action,bl&&a(p,K),p=H.hasEagerState?H.eagerState:a(p,K)}else U={lane:K,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},R===null?(T=R=U,A=p):R=R.next=U,wt.lanes|=K,fa|=K;H=H.next}while(H!==null&&H!==s);if(R===null?A=p:R.next=T,!Ci(p,t.memoizedState)&&(Le=!0,j&&(a=Wr,a!==null)))throw a;t.memoizedState=p,t.baseState=A,t.baseQueue=R,r.lastRenderedState=p}return h===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function Zp(t){var s=ye(),a=s.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=t;var r=a.dispatch,h=a.pending,p=s.memoizedState;if(h!==null){a.pending=null;var A=h=h.next;do p=t(p,A.action),A=A.next;while(A!==h);Ci(p,s.memoizedState)||(Le=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,r]}function mv(t,s,a){var r=wt,h=ye(),p=Bt;if(p){if(a===void 0)throw Error(n(407));a=a()}else a=s();var A=!Ci((Kt||h).memoizedState,a);A&&(h.memoizedState=a,Le=!0),h=h.queue;var T=vv.bind(null,r,h,t);if(iu(2048,8,T,[t]),h.getSnapshot!==s||A||be!==null&&be.memoizedState.tag&1){if(r.flags|=2048,eo(9,Kd(),yv.bind(null,r,h,a,s),null),te===null)throw Error(n(349));p||(la&124)!==0||bv(r,s,a)}return a}function bv(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=wt.updateQueue,s===null?(s=Vp(),wt.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function yv(t,s,a,r){s.value=a,s.getSnapshot=r,Av(s)&&Sv(t)}function vv(t,s,a){return a(function(){Av(s)&&Sv(t)})}function Av(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Ci(t,a)}catch{return!0}}function Sv(t){var s=Yr(t,2);s!==null&&Ni(s,t,2)}function Wp(t){var s=pi();if(typeof t=="function"){var a=t;if(t=a(),bl){Jn(!0);try{a()}finally{Jn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:un,lastRenderedState:t},s}function _v(t,s,a,r){return t.baseState=a,Qp(t,Kt,typeof r=="function"?r:un)}function PT(t,s,a,r,h){if(Zd(t))throw Error(n(485));if(t=s.action,t!==null){var p={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){p.listeners.push(A)}};P.T!==null?a(!0):p.isTransition=!1,r(p),a=s.pending,a===null?(p.next=s.pending=p,Ev(s,p)):(p.next=a.next,s.pending=a.next=p)}}function Ev(t,s){var a=s.action,r=s.payload,h=t.state;if(s.isTransition){var p=P.T,A={};P.T=A;try{var T=a(h,r),R=P.S;R!==null&&R(A,T),Tv(t,s,T)}catch(H){$p(t,s,H)}finally{P.T=p}}else try{p=a(h,r),Tv(t,s,p)}catch(H){$p(t,s,H)}}function Tv(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(r){wv(t,s,r)},function(r){return $p(t,s,r)}):wv(t,s,a)}function wv(t,s,a){s.status="fulfilled",s.value=a,xv(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Ev(t,a)))}function $p(t,s,a){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do s.status="rejected",s.reason=a,xv(s),s=s.next;while(s!==r)}t.action=null}function xv(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Cv(t,s){return s}function Mv(t,s){if(Bt){var a=te.formState;if(a!==null){t:{var r=wt;if(Bt){if(ue){e:{for(var h=ue,p=Ls;h.nodeType!==8;){if(!p){h=null;break e}if(h=gs(h.nextSibling),h===null){h=null;break e}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){ue=gs(h.nextSibling),r=h.data==="F!";break t}}fl(r)}r=!1}r&&(s=a[0])}}return a=pi(),a.memoizedState=a.baseState=s,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cv,lastRenderedState:s},a.queue=r,a=Vv.bind(null,wt,r),r.dispatch=a,r=Wp(!1),p=sm.bind(null,wt,!1,r.queue),r=pi(),h={state:s,dispatch:null,action:t,pending:null},r.queue=h,a=PT.bind(null,wt,h,p,a),h.dispatch=a,r.memoizedState=t,[s,a,!1]}function Rv(t){var s=ye();return Dv(s,Kt,t)}function Dv(t,s,a){if(s=Qp(t,s,Cv)[0],t=Vd(un)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var r=eu(s)}catch(A){throw A===Qc?Id:A}else r=s;s=ye();var h=s.queue,p=h.dispatch;return a!==s.memoizedState&&(wt.flags|=2048,eo(9,Kd(),IT.bind(null,h,a),null)),[r,p,t]}function IT(t,s){t.action=s}function Ov(t){var s=ye(),a=Kt;if(a!==null)return Dv(s,a,t);ye(),s=s.memoizedState,a=ye();var r=a.queue.dispatch;return a.memoizedState=t,[s,r,!1]}function eo(t,s,a,r){return t={tag:t,create:a,deps:r,inst:s,next:null},s=wt.updateQueue,s===null&&(s=Vp(),wt.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(r=a.next,a.next=t,t.next=r,s.lastEffect=t),t}function Kd(){return{destroy:void 0,resource:void 0}}function Lv(){return ye().memoizedState}function Qd(t,s,a,r){var h=pi();r=r===void 0?null:r,wt.flags|=t,h.memoizedState=eo(1|s,Kd(),a,r)}function iu(t,s,a,r){var h=ye();r=r===void 0?null:r;var p=h.memoizedState.inst;Kt!==null&&r!==null&&qp(r,Kt.memoizedState.deps)?h.memoizedState=eo(s,p,a,r):(wt.flags|=t,h.memoizedState=eo(1|s,p,a,r))}function Nv(t,s){Qd(8390656,8,t,s)}function kv(t,s){iu(2048,8,t,s)}function Hv(t,s){return iu(4,2,t,s)}function zv(t,s){return iu(4,4,t,s)}function Fv(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Uv(t,s,a){a=a!=null?a.concat([t]):null,iu(4,4,Fv.bind(null,s,t),a)}function Jp(){}function Bv(t,s){var a=ye();s=s===void 0?null:s;var r=a.memoizedState;return s!==null&&qp(s,r[1])?r[0]:(a.memoizedState=[t,s],t)}function Pv(t,s){var a=ye();s=s===void 0?null:s;var r=a.memoizedState;if(s!==null&&qp(s,r[1]))return r[0];if(r=t(),bl){Jn(!0);try{t()}finally{Jn(!1)}}return a.memoizedState=[r,s],r}function tm(t,s,a){return a===void 0||(la&1073741824)!==0?t.memoizedState=s:(t.memoizedState=a,t=GA(),wt.lanes|=t,fa|=t,a)}function Iv(t,s,a,r){return Ci(a,s)?a:$r.current!==null?(t=tm(t,a,r),Ci(t,s)||(Le=!0),t):(la&42)===0?(Le=!0,t.memoizedState=a):(t=GA(),wt.lanes|=t,fa|=t,s)}function qv(t,s,a,r,h){var p=X.p;X.p=p!==0&&8>p?p:8;var A=P.T,T={};P.T=T,sm(t,!1,s,a);try{var R=h(),H=P.S;if(H!==null&&H(T,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var j=FT(R,r);su(t,s,j,Li(t))}else su(t,s,r,Li(t))}catch(K){su(t,s,{then:function(){},status:"rejected",reason:K},Li())}finally{X.p=p,P.T=A}}function qT(){}function em(t,s,a,r){if(t.tag!==5)throw Error(n(476));var h=Gv(t).queue;qv(t,h,s,W,a===null?qT:function(){return jv(t),a(r)})}function Gv(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:un,lastRenderedState:W},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:un,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function jv(t){var s=Gv(t).next.queue;su(t,s,{},Li())}function im(){return Ze(Su)}function Xv(){return ye().memoizedState}function Yv(){return ye().memoizedState}function GT(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Li();t=na(a);var r=aa(s,t,a);r!==null&&(Ni(r,s,a),Wc(r,s,a)),s={cache:Lp()},t.payload=s;return}s=s.return}}function jT(t,s,a){var r=Li();a={lane:r,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Zd(t)?Kv(s,a):(a=_p(t,s,a,r),a!==null&&(Ni(a,t,r),Qv(a,s,r)))}function Vv(t,s,a){var r=Li();su(t,s,a,r)}function su(t,s,a,r){var h={lane:r,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zd(t))Kv(s,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var A=s.lastRenderedState,T=p(A,a);if(h.hasEagerState=!0,h.eagerState=T,Ci(T,A))return Nd(t,s,h,0),te===null&&Ld(),!1}catch{}finally{}if(a=_p(t,s,h,r),a!==null)return Ni(a,t,r),Qv(a,s,r),!0}return!1}function sm(t,s,a,r){if(r={lane:2,revertLane:Hm(),action:r,hasEagerState:!1,eagerState:null,next:null},Zd(t)){if(s)throw Error(n(479))}else s=_p(t,a,r,2),s!==null&&Ni(s,t,2)}function Zd(t){var s=t.alternate;return t===wt||s!==null&&s===wt}function Kv(t,s){Jr=jd=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Qv(t,s,a){if((a&4194048)!==0){var r=s.lanes;r&=t.pendingLanes,a|=r,s.lanes=a,sy(t,a)}}var Wd={readContext:Ze,use:Yd,useCallback:fe,useContext:fe,useEffect:fe,useImperativeHandle:fe,useLayoutEffect:fe,useInsertionEffect:fe,useMemo:fe,useReducer:fe,useRef:fe,useState:fe,useDebugValue:fe,useDeferredValue:fe,useTransition:fe,useSyncExternalStore:fe,useId:fe,useHostTransitionStatus:fe,useFormState:fe,useActionState:fe,useOptimistic:fe,useMemoCache:fe,useCacheRefresh:fe},Zv={readContext:Ze,use:Yd,useCallback:function(t,s){return pi().memoizedState=[t,s===void 0?null:s],t},useContext:Ze,useEffect:Nv,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Qd(4194308,4,Fv.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Qd(4194308,4,t,s)},useInsertionEffect:function(t,s){Qd(4,2,t,s)},useMemo:function(t,s){var a=pi();s=s===void 0?null:s;var r=t();if(bl){Jn(!0);try{t()}finally{Jn(!1)}}return a.memoizedState=[r,s],r},useReducer:function(t,s,a){var r=pi();if(a!==void 0){var h=a(s);if(bl){Jn(!0);try{a(s)}finally{Jn(!1)}}}else h=s;return r.memoizedState=r.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},r.queue=t,t=t.dispatch=jT.bind(null,wt,t),[r.memoizedState,t]},useRef:function(t){var s=pi();return t={current:t},s.memoizedState=t},useState:function(t){t=Wp(t);var s=t.queue,a=Vv.bind(null,wt,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:Jp,useDeferredValue:function(t,s){var a=pi();return tm(a,t,s)},useTransition:function(){var t=Wp(!1);return t=qv.bind(null,wt,t.queue,!0,!1),pi().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var r=wt,h=pi();if(Bt){if(a===void 0)throw Error(n(407));a=a()}else{if(a=s(),te===null)throw Error(n(349));(Ft&124)!==0||bv(r,s,a)}h.memoizedState=a;var p={value:a,getSnapshot:s};return h.queue=p,Nv(vv.bind(null,r,p,t),[t]),r.flags|=2048,eo(9,Kd(),yv.bind(null,r,p,a,s),null),a},useId:function(){var t=pi(),s=te.identifierPrefix;if(Bt){var a=rn,r=ln;a=(r&~(1<<32-xi(r)-1)).toString(32)+a,s=""+s+"R"+a,a=Xd++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=UT++,s=""+s+"r"+a.toString(32)+"";return t.memoizedState=s},useHostTransitionStatus:im,useFormState:Mv,useActionState:Mv,useOptimistic:function(t){var s=pi();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=sm.bind(null,wt,!0,a),a.dispatch=s,[t,s]},useMemoCache:Kp,useCacheRefresh:function(){return pi().memoizedState=GT.bind(null,wt)}},Wv={readContext:Ze,use:Yd,useCallback:Bv,useContext:Ze,useEffect:kv,useImperativeHandle:Uv,useInsertionEffect:Hv,useLayoutEffect:zv,useMemo:Pv,useReducer:Vd,useRef:Lv,useState:function(){return Vd(un)},useDebugValue:Jp,useDeferredValue:function(t,s){var a=ye();return Iv(a,Kt.memoizedState,t,s)},useTransition:function(){var t=Vd(un)[0],s=ye().memoizedState;return[typeof t=="boolean"?t:eu(t),s]},useSyncExternalStore:mv,useId:Xv,useHostTransitionStatus:im,useFormState:Rv,useActionState:Rv,useOptimistic:function(t,s){var a=ye();return _v(a,Kt,t,s)},useMemoCache:Kp,useCacheRefresh:Yv},XT={readContext:Ze,use:Yd,useCallback:Bv,useContext:Ze,useEffect:kv,useImperativeHandle:Uv,useInsertionEffect:Hv,useLayoutEffect:zv,useMemo:Pv,useReducer:Zp,useRef:Lv,useState:function(){return Zp(un)},useDebugValue:Jp,useDeferredValue:function(t,s){var a=ye();return Kt===null?tm(a,t,s):Iv(a,Kt.memoizedState,t,s)},useTransition:function(){var t=Zp(un)[0],s=ye().memoizedState;return[typeof t=="boolean"?t:eu(t),s]},useSyncExternalStore:mv,useId:Xv,useHostTransitionStatus:im,useFormState:Ov,useActionState:Ov,useOptimistic:function(t,s){var a=ye();return Kt!==null?_v(a,Kt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Kp,useCacheRefresh:Yv},io=null,nu=0;function $d(t){var s=nu;return nu+=1,io===null&&(io=[]),ov(io,t,s)}function au(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Jd(t,s){throw s.$$typeof===y?Error(n(525)):(t=Object.prototype.toString.call(s),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function $v(t){var s=t._init;return s(t._payload)}function Jv(t){function s(N,L){if(t){var k=N.deletions;k===null?(N.deletions=[L],N.flags|=16):k.push(L)}}function a(N,L){if(!t)return null;for(;L!==null;)s(N,L),L=L.sibling;return null}function r(N){for(var L=new Map;N!==null;)N.key!==null?L.set(N.key,N):L.set(N.index,N),N=N.sibling;return L}function h(N,L){return N=an(N,L),N.index=0,N.sibling=null,N}function p(N,L,k){return N.index=k,t?(k=N.alternate,k!==null?(k=k.index,k<L?(N.flags|=67108866,L):k):(N.flags|=67108866,L)):(N.flags|=1048576,L)}function A(N){return t&&N.alternate===null&&(N.flags|=67108866),N}function T(N,L,k,Y){return L===null||L.tag!==6?(L=Tp(k,N.mode,Y),L.return=N,L):(L=h(L,k),L.return=N,L)}function R(N,L,k,Y){var st=k.type;return st===x?j(N,L,k.props.children,Y,k.key):L!==null&&(L.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===J&&$v(st)===L.type)?(L=h(L,k.props),au(L,k),L.return=N,L):(L=Hd(k.type,k.key,k.props,null,N.mode,Y),au(L,k),L.return=N,L)}function H(N,L,k,Y){return L===null||L.tag!==4||L.stateNode.containerInfo!==k.containerInfo||L.stateNode.implementation!==k.implementation?(L=wp(k,N.mode,Y),L.return=N,L):(L=h(L,k.children||[]),L.return=N,L)}function j(N,L,k,Y,st){return L===null||L.tag!==7?(L=cl(k,N.mode,Y,st),L.return=N,L):(L=h(L,k),L.return=N,L)}function K(N,L,k){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Tp(""+L,N.mode,k),L.return=N,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case v:return k=Hd(L.type,L.key,L.props,null,N.mode,k),au(k,L),k.return=N,k;case E:return L=wp(L,N.mode,k),L.return=N,L;case J:var Y=L._init;return L=Y(L._payload),K(N,L,k)}if(pt(L)||gt(L))return L=cl(L,N.mode,k,null),L.return=N,L;if(typeof L.then=="function")return K(N,$d(L),k);if(L.$$typeof===F)return K(N,Bd(N,L),k);Jd(N,L)}return null}function U(N,L,k,Y){var st=L!==null?L.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return st!==null?null:T(N,L,""+k,Y);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case v:return k.key===st?R(N,L,k,Y):null;case E:return k.key===st?H(N,L,k,Y):null;case J:return st=k._init,k=st(k._payload),U(N,L,k,Y)}if(pt(k)||gt(k))return st!==null?null:j(N,L,k,Y,null);if(typeof k.then=="function")return U(N,L,$d(k),Y);if(k.$$typeof===F)return U(N,L,Bd(N,k),Y);Jd(N,k)}return null}function B(N,L,k,Y,st){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return N=N.get(k)||null,T(L,N,""+Y,st);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:return N=N.get(Y.key===null?k:Y.key)||null,R(L,N,Y,st);case E:return N=N.get(Y.key===null?k:Y.key)||null,H(L,N,Y,st);case J:var Rt=Y._init;return Y=Rt(Y._payload),B(N,L,k,Y,st)}if(pt(Y)||gt(Y))return N=N.get(k)||null,j(L,N,Y,st,null);if(typeof Y.then=="function")return B(N,L,k,$d(Y),st);if(Y.$$typeof===F)return B(N,L,k,Bd(L,Y),st);Jd(L,Y)}return null}function ft(N,L,k,Y){for(var st=null,Rt=null,ct=L,dt=L=0,ke=null;ct!==null&&dt<k.length;dt++){ct.index>dt?(ke=ct,ct=null):ke=ct.sibling;var Ut=U(N,ct,k[dt],Y);if(Ut===null){ct===null&&(ct=ke);break}t&&ct&&Ut.alternate===null&&s(N,ct),L=p(Ut,L,dt),Rt===null?st=Ut:Rt.sibling=Ut,Rt=Ut,ct=ke}if(dt===k.length)return a(N,ct),Bt&&hl(N,dt),st;if(ct===null){for(;dt<k.length;dt++)ct=K(N,k[dt],Y),ct!==null&&(L=p(ct,L,dt),Rt===null?st=ct:Rt.sibling=ct,Rt=ct);return Bt&&hl(N,dt),st}for(ct=r(ct);dt<k.length;dt++)ke=B(ct,N,dt,k[dt],Y),ke!==null&&(t&&ke.alternate!==null&&ct.delete(ke.key===null?dt:ke.key),L=p(ke,L,dt),Rt===null?st=ke:Rt.sibling=ke,Rt=ke);return t&&ct.forEach(function(_a){return s(N,_a)}),Bt&&hl(N,dt),st}function ht(N,L,k,Y){if(k==null)throw Error(n(151));for(var st=null,Rt=null,ct=L,dt=L=0,ke=null,Ut=k.next();ct!==null&&!Ut.done;dt++,Ut=k.next()){ct.index>dt?(ke=ct,ct=null):ke=ct.sibling;var _a=U(N,ct,Ut.value,Y);if(_a===null){ct===null&&(ct=ke);break}t&&ct&&_a.alternate===null&&s(N,ct),L=p(_a,L,dt),Rt===null?st=_a:Rt.sibling=_a,Rt=_a,ct=ke}if(Ut.done)return a(N,ct),Bt&&hl(N,dt),st;if(ct===null){for(;!Ut.done;dt++,Ut=k.next())Ut=K(N,Ut.value,Y),Ut!==null&&(L=p(Ut,L,dt),Rt===null?st=Ut:Rt.sibling=Ut,Rt=Ut);return Bt&&hl(N,dt),st}for(ct=r(ct);!Ut.done;dt++,Ut=k.next())Ut=B(ct,N,dt,Ut.value,Y),Ut!==null&&(t&&Ut.alternate!==null&&ct.delete(Ut.key===null?dt:Ut.key),L=p(Ut,L,dt),Rt===null?st=Ut:Rt.sibling=Ut,Rt=Ut);return t&&ct.forEach(function(Yw){return s(N,Yw)}),Bt&&hl(N,dt),st}function Zt(N,L,k,Y){if(typeof k=="object"&&k!==null&&k.type===x&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case v:t:{for(var st=k.key;L!==null;){if(L.key===st){if(st=k.type,st===x){if(L.tag===7){a(N,L.sibling),Y=h(L,k.props.children),Y.return=N,N=Y;break t}}else if(L.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===J&&$v(st)===L.type){a(N,L.sibling),Y=h(L,k.props),au(Y,k),Y.return=N,N=Y;break t}a(N,L);break}else s(N,L);L=L.sibling}k.type===x?(Y=cl(k.props.children,N.mode,Y,k.key),Y.return=N,N=Y):(Y=Hd(k.type,k.key,k.props,null,N.mode,Y),au(Y,k),Y.return=N,N=Y)}return A(N);case E:t:{for(st=k.key;L!==null;){if(L.key===st)if(L.tag===4&&L.stateNode.containerInfo===k.containerInfo&&L.stateNode.implementation===k.implementation){a(N,L.sibling),Y=h(L,k.children||[]),Y.return=N,N=Y;break t}else{a(N,L);break}else s(N,L);L=L.sibling}Y=wp(k,N.mode,Y),Y.return=N,N=Y}return A(N);case J:return st=k._init,k=st(k._payload),Zt(N,L,k,Y)}if(pt(k))return ft(N,L,k,Y);if(gt(k)){if(st=gt(k),typeof st!="function")throw Error(n(150));return k=st.call(k),ht(N,L,k,Y)}if(typeof k.then=="function")return Zt(N,L,$d(k),Y);if(k.$$typeof===F)return Zt(N,L,Bd(N,k),Y);Jd(N,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,L!==null&&L.tag===6?(a(N,L.sibling),Y=h(L,k),Y.return=N,N=Y):(a(N,L),Y=Tp(k,N.mode,Y),Y.return=N,N=Y),A(N)):a(N,L)}return function(N,L,k,Y){try{nu=0;var st=Zt(N,L,k,Y);return io=null,st}catch(ct){if(ct===Qc||ct===Id)throw ct;var Rt=Mi(29,ct,null,N.mode);return Rt.lanes=Y,Rt.return=N,Rt}finally{}}}var so=Jv(!0),tA=Jv(!1),Ji=V(null),Ns=null;function ra(t){var s=t.alternate;Z(Ee,Ee.current&1),Z(Ji,t),Ns===null&&(s===null||$r.current!==null||s.memoizedState!==null)&&(Ns=t)}function eA(t){if(t.tag===22){if(Z(Ee,Ee.current),Z(Ji,t),Ns===null){var s=t.alternate;s!==null&&s.memoizedState!==null&&(Ns=t)}}else oa()}function oa(){Z(Ee,Ee.current),Z(Ji,Ji.current)}function hn(t){$(Ji),Ns===t&&(Ns=null),$(Ee)}var Ee=V(0);function tf(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Vm(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function nm(t,s,a,r){s=t.memoizedState,a=a(r,s),a=a==null?s:m({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var am={enqueueSetState:function(t,s,a){t=t._reactInternals;var r=Li(),h=na(r);h.payload=s,a!=null&&(h.callback=a),s=aa(t,h,r),s!==null&&(Ni(s,t,r),Wc(s,t,r))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var r=Li(),h=na(r);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=aa(t,h,r),s!==null&&(Ni(s,t,r),Wc(s,t,r))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Li(),r=na(a);r.tag=2,s!=null&&(r.callback=s),s=aa(t,r,a),s!==null&&(Ni(s,t,a),Wc(s,t,a))}};function iA(t,s,a,r,h,p,A){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,p,A):s.prototype&&s.prototype.isPureReactComponent?!Ic(a,r)||!Ic(h,p):!0}function sA(t,s,a,r){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,r),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,r),s.state!==t&&am.enqueueReplaceState(s,s.state,null)}function yl(t,s){var a=s;if("ref"in s){a={};for(var r in s)r!=="ref"&&(a[r]=s[r])}if(t=t.defaultProps){a===s&&(a=m({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var ef=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function nA(t){ef(t)}function aA(t){console.error(t)}function lA(t){ef(t)}function sf(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(r){setTimeout(function(){throw r})}}function rA(t,s,a){try{var r=t.onCaughtError;r(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function lm(t,s,a){return a=na(a),a.tag=3,a.payload={element:null},a.callback=function(){sf(t,s)},a}function oA(t){return t=na(t),t.tag=3,t}function cA(t,s,a,r){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var p=r.value;t.payload=function(){return h(p)},t.callback=function(){rA(s,a,r)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(t.callback=function(){rA(s,a,r),typeof h!="function"&&(ga===null?ga=new Set([this]):ga.add(this));var T=r.stack;this.componentDidCatch(r.value,{componentStack:T!==null?T:""})})}function YT(t,s,a,r,h){if(a.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(s=a.alternate,s!==null&&Yc(s,a,h,!0),a=Ji.current,a!==null){switch(a.tag){case 13:return Ns===null?Dm():a.alternate===null&&he===0&&(he=3),a.flags&=-257,a.flags|=65536,a.lanes=h,r===Hp?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([r]):s.add(r),Lm(t,r,h)),!1;case 22:return a.flags|=65536,r===Hp?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([r])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([r]):a.add(r)),Lm(t,r,h)),!1}throw Error(n(435,a.tag))}return Lm(t,r,h),Dm(),!1}if(Bt)return s=Ji.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,r!==Mp&&(t=Error(n(422),{cause:r}),Xc(Qi(t,a)))):(r!==Mp&&(s=Error(n(423),{cause:r}),Xc(Qi(s,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,r=Qi(r,a),h=lm(t.stateNode,r,h),Up(t,h),he!==4&&(he=2)),!1;var p=Error(n(520),{cause:r});if(p=Qi(p,a),du===null?du=[p]:du.push(p),he!==4&&(he=2),s===null)return!0;r=Qi(r,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=lm(a.stateNode,r,t),Up(a,t),!1;case 1:if(s=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ga===null||!ga.has(p))))return a.flags|=65536,h&=-h,a.lanes|=h,h=oA(h),cA(h,t,a,r),Up(a,h),!1}a=a.return}while(a!==null);return!1}var uA=Error(n(461)),Le=!1;function Pe(t,s,a,r){s.child=t===null?tA(s,null,a,r):so(s,t.child,a,r)}function hA(t,s,a,r,h){a=a.render;var p=s.ref;if("ref"in r){var A={};for(var T in r)T!=="ref"&&(A[T]=r[T])}else A=r;return pl(s),r=Gp(t,s,a,A,p,h),T=jp(),t!==null&&!Le?(Xp(t,s,h),dn(t,s,h)):(Bt&&T&&xp(s),s.flags|=1,Pe(t,s,r,h),s.child)}function dA(t,s,a,r,h){if(t===null){var p=a.type;return typeof p=="function"&&!Ep(p)&&p.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=p,fA(t,s,p,r,h)):(t=Hd(a.type,null,r,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(p=t.child,!gm(t,h)){var A=p.memoizedProps;if(a=a.compare,a=a!==null?a:Ic,a(A,r)&&t.ref===s.ref)return dn(t,s,h)}return s.flags|=1,t=an(p,r),t.ref=s.ref,t.return=s,s.child=t}function fA(t,s,a,r,h){if(t!==null){var p=t.memoizedProps;if(Ic(p,r)&&t.ref===s.ref)if(Le=!1,s.pendingProps=r=p,gm(t,h))(t.flags&131072)!==0&&(Le=!0);else return s.lanes=t.lanes,dn(t,s,h)}return rm(t,s,a,r,h)}function gA(t,s,a){var r=s.pendingProps,h=r.children,p=t!==null?t.memoizedState:null;if(r.mode==="hidden"){if((s.flags&128)!==0){if(r=p!==null?p.baseLanes|a:a,t!==null){for(h=s.child=t.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;s.childLanes=p&~r}else s.childLanes=0,s.child=null;return pA(t,s,r,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Pd(s,p!==null?p.cachePool:null),p!==null?fv(s,p):Pp(),eA(s);else return s.lanes=s.childLanes=536870912,pA(t,s,p!==null?p.baseLanes|a:a,a)}else p!==null?(Pd(s,p.cachePool),fv(s,p),oa(),s.memoizedState=null):(t!==null&&Pd(s,null),Pp(),oa());return Pe(t,s,h,a),s.child}function pA(t,s,a,r){var h=kp();return h=h===null?null:{parent:_e._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},t!==null&&Pd(s,null),Pp(),eA(s),t!==null&&Yc(t,s,r,!0),null}function nf(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(n(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function rm(t,s,a,r,h){return pl(s),a=Gp(t,s,a,r,void 0,h),r=jp(),t!==null&&!Le?(Xp(t,s,h),dn(t,s,h)):(Bt&&r&&xp(s),s.flags|=1,Pe(t,s,a,h),s.child)}function mA(t,s,a,r,h,p){return pl(s),s.updateQueue=null,a=pv(s,r,a,h),gv(t),r=jp(),t!==null&&!Le?(Xp(t,s,p),dn(t,s,p)):(Bt&&r&&xp(s),s.flags|=1,Pe(t,s,a,p),s.child)}function bA(t,s,a,r,h){if(pl(s),s.stateNode===null){var p=Vr,A=a.contextType;typeof A=="object"&&A!==null&&(p=Ze(A)),p=new a(r,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=am,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=r,p.state=s.memoizedState,p.refs={},zp(s),A=a.contextType,p.context=typeof A=="object"&&A!==null?Ze(A):Vr,p.state=s.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(nm(s,a,A,r),p.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(A=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),A!==p.state&&am.enqueueReplaceState(p,p.state,null),Jc(s,r,p,h),$c(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),r=!0}else if(t===null){p=s.stateNode;var T=s.memoizedProps,R=yl(a,T);p.props=R;var H=p.context,j=a.contextType;A=Vr,typeof j=="object"&&j!==null&&(A=Ze(j));var K=a.getDerivedStateFromProps;j=typeof K=="function"||typeof p.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,j||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T||H!==A)&&sA(s,p,r,A),sa=!1;var U=s.memoizedState;p.state=U,Jc(s,r,p,h),$c(),H=s.memoizedState,T||U!==H||sa?(typeof K=="function"&&(nm(s,a,K,r),H=s.memoizedState),(R=sa||iA(s,a,R,r,U,H,A))?(j||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=r,s.memoizedState=H),p.props=r,p.state=H,p.context=A,r=R):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),r=!1)}else{p=s.stateNode,Fp(t,s),A=s.memoizedProps,j=yl(a,A),p.props=j,K=s.pendingProps,U=p.context,H=a.contextType,R=Vr,typeof H=="object"&&H!==null&&(R=Ze(H)),T=a.getDerivedStateFromProps,(H=typeof T=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A!==K||U!==R)&&sA(s,p,r,R),sa=!1,U=s.memoizedState,p.state=U,Jc(s,r,p,h),$c();var B=s.memoizedState;A!==K||U!==B||sa||t!==null&&t.dependencies!==null&&Ud(t.dependencies)?(typeof T=="function"&&(nm(s,a,T,r),B=s.memoizedState),(j=sa||iA(s,a,j,r,U,B,R)||t!==null&&t.dependencies!==null&&Ud(t.dependencies))?(H||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(r,B,R),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(r,B,R)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||A===t.memoizedProps&&U===t.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&U===t.memoizedState||(s.flags|=1024),s.memoizedProps=r,s.memoizedState=B),p.props=r,p.state=B,p.context=R,r=j):(typeof p.componentDidUpdate!="function"||A===t.memoizedProps&&U===t.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&U===t.memoizedState||(s.flags|=1024),r=!1)}return p=r,nf(t,s),r=(s.flags&128)!==0,p||r?(p=s.stateNode,a=r&&typeof a.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,t!==null&&r?(s.child=so(s,t.child,null,h),s.child=so(s,null,a,h)):Pe(t,s,a,h),s.memoizedState=p.state,t=s.child):t=dn(t,s,h),t}function yA(t,s,a,r){return jc(),s.flags|=256,Pe(t,s,a,r),s.child}var om={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cm(t){return{baseLanes:t,cachePool:av()}}function um(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=ts),t}function vA(t,s,a){var r=s.pendingProps,h=!1,p=(s.flags&128)!==0,A;if((A=p)||(A=t!==null&&t.memoizedState===null?!1:(Ee.current&2)!==0),A&&(h=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,t===null){if(Bt){if(h?ra(s):oa(),Bt){var T=ue,R;if(R=T){t:{for(R=T,T=Ls;R.nodeType!==8;){if(!T){T=null;break t}if(R=gs(R.nextSibling),R===null){T=null;break t}}T=R}T!==null?(s.memoizedState={dehydrated:T,treeContext:ul!==null?{id:ln,overflow:rn}:null,retryLane:536870912,hydrationErrors:null},R=Mi(18,null,null,0),R.stateNode=T,R.return=s,s.child=R,ai=s,ue=null,R=!0):R=!1}R||fl(s)}if(T=s.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Vm(T)?s.lanes=32:s.lanes=536870912,null;hn(s)}return T=r.children,r=r.fallback,h?(oa(),h=s.mode,T=af({mode:"hidden",children:T},h),r=cl(r,h,a,null),T.return=s,r.return=s,T.sibling=r,s.child=T,h=s.child,h.memoizedState=cm(a),h.childLanes=um(t,A,a),s.memoizedState=om,r):(ra(s),hm(s,T))}if(R=t.memoizedState,R!==null&&(T=R.dehydrated,T!==null)){if(p)s.flags&256?(ra(s),s.flags&=-257,s=dm(t,s,a)):s.memoizedState!==null?(oa(),s.child=t.child,s.flags|=128,s=null):(oa(),h=r.fallback,T=s.mode,r=af({mode:"visible",children:r.children},T),h=cl(h,T,a,null),h.flags|=2,r.return=s,h.return=s,r.sibling=h,s.child=r,so(s,t.child,null,a),r=s.child,r.memoizedState=cm(a),r.childLanes=um(t,A,a),s.memoizedState=om,s=h);else if(ra(s),Vm(T)){if(A=T.nextSibling&&T.nextSibling.dataset,A)var H=A.dgst;A=H,r=Error(n(419)),r.stack="",r.digest=A,Xc({value:r,source:null,stack:null}),s=dm(t,s,a)}else if(Le||Yc(t,s,a,!1),A=(a&t.childLanes)!==0,Le||A){if(A=te,A!==null&&(r=a&-a,r=(r&42)!==0?1:Kg(r),r=(r&(A.suspendedLanes|a))!==0?0:r,r!==0&&r!==R.retryLane))throw R.retryLane=r,Yr(t,r),Ni(A,t,r),uA;T.data==="$?"||Dm(),s=dm(t,s,a)}else T.data==="$?"?(s.flags|=192,s.child=t.child,s=null):(t=R.treeContext,ue=gs(T.nextSibling),ai=s,Bt=!0,dl=null,Ls=!1,t!==null&&(Wi[$i++]=ln,Wi[$i++]=rn,Wi[$i++]=ul,ln=t.id,rn=t.overflow,ul=s),s=hm(s,r.children),s.flags|=4096);return s}return h?(oa(),h=r.fallback,T=s.mode,R=t.child,H=R.sibling,r=an(R,{mode:"hidden",children:r.children}),r.subtreeFlags=R.subtreeFlags&65011712,H!==null?h=an(H,h):(h=cl(h,T,a,null),h.flags|=2),h.return=s,r.return=s,r.sibling=h,s.child=r,r=h,h=s.child,T=t.child.memoizedState,T===null?T=cm(a):(R=T.cachePool,R!==null?(H=_e._currentValue,R=R.parent!==H?{parent:H,pool:H}:R):R=av(),T={baseLanes:T.baseLanes|a,cachePool:R}),h.memoizedState=T,h.childLanes=um(t,A,a),s.memoizedState=om,r):(ra(s),a=t.child,t=a.sibling,a=an(a,{mode:"visible",children:r.children}),a.return=s,a.sibling=null,t!==null&&(A=s.deletions,A===null?(s.deletions=[t],s.flags|=16):A.push(t)),s.child=a,s.memoizedState=null,a)}function hm(t,s){return s=af({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function af(t,s){return t=Mi(22,t,null,s),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function dm(t,s,a){return so(s,t.child,null,a),t=hm(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function AA(t,s,a){t.lanes|=s;var r=t.alternate;r!==null&&(r.lanes|=s),Dp(t.return,s,a)}function fm(t,s,a,r,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:h}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=r,p.tail=a,p.tailMode=h)}function SA(t,s,a){var r=s.pendingProps,h=r.revealOrder,p=r.tail;if(Pe(t,s,r.children,a),r=Ee.current,(r&2)!==0)r=r&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&AA(t,a,s);else if(t.tag===19)AA(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break t;for(;t.sibling===null;){if(t.return===null||t.return===s)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}switch(Z(Ee,r),h){case"forwards":for(a=s.child,h=null;a!==null;)t=a.alternate,t!==null&&tf(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),fm(s,!1,h,a,p);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&tf(t)===null){s.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}fm(s,!0,a,null,p);break;case"together":fm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function dn(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),fa|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Yc(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(n(153));if(s.child!==null){for(t=s.child,a=an(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=an(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function gm(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Ud(t)))}function VT(t,s,a){switch(s.tag){case 3:It(s,s.stateNode.containerInfo),ia(s,_e,t.memoizedState.cache),jc();break;case 27:case 5:Mc(s);break;case 4:It(s,s.stateNode.containerInfo);break;case 10:ia(s,s.type,s.memoizedProps.value);break;case 13:var r=s.memoizedState;if(r!==null)return r.dehydrated!==null?(ra(s),s.flags|=128,null):(a&s.child.childLanes)!==0?vA(t,s,a):(ra(s),t=dn(t,s,a),t!==null?t.sibling:null);ra(s);break;case 19:var h=(t.flags&128)!==0;if(r=(a&s.childLanes)!==0,r||(Yc(t,s,a,!1),r=(a&s.childLanes)!==0),h){if(r)return SA(t,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Z(Ee,Ee.current),r)break;return null;case 22:case 23:return s.lanes=0,gA(t,s,a);case 24:ia(s,_e,t.memoizedState.cache)}return dn(t,s,a)}function _A(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)Le=!0;else{if(!gm(t,a)&&(s.flags&128)===0)return Le=!1,VT(t,s,a);Le=(t.flags&131072)!==0}else Le=!1,Bt&&(s.flags&1048576)!==0&&$y(s,Fd,s.index);switch(s.lanes=0,s.tag){case 16:t:{t=s.pendingProps;var r=s.elementType,h=r._init;if(r=h(r._payload),s.type=r,typeof r=="function")Ep(r)?(t=yl(r,t),s.tag=1,s=bA(null,s,r,t,a)):(s.tag=0,s=rm(null,s,r,t,a));else{if(r!=null){if(h=r.$$typeof,h===I){s.tag=11,s=hA(null,s,r,t,a);break t}else if(h===Q){s.tag=14,s=dA(null,s,r,t,a);break t}}throw s=Ot(r)||r,Error(n(306,s,""))}}return s;case 0:return rm(t,s,s.type,s.pendingProps,a);case 1:return r=s.type,h=yl(r,s.pendingProps),bA(t,s,r,h,a);case 3:t:{if(It(s,s.stateNode.containerInfo),t===null)throw Error(n(387));r=s.pendingProps;var p=s.memoizedState;h=p.element,Fp(t,s),Jc(s,r,null,a);var A=s.memoizedState;if(r=A.cache,ia(s,_e,r),r!==p.cache&&Op(s,[_e],a,!0),$c(),r=A.element,p.isDehydrated)if(p={element:r,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=yA(t,s,r,a);break t}else if(r!==h){h=Qi(Error(n(424)),s),Xc(h),s=yA(t,s,r,a);break t}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ue=gs(t.firstChild),ai=s,Bt=!0,dl=null,Ls=!0,a=tA(s,null,r,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(jc(),r===h){s=dn(t,s,a);break t}Pe(t,s,r,a)}s=s.child}return s;case 26:return nf(t,s),t===null?(a=xS(s.type,null,s.pendingProps,null))?s.memoizedState=a:Bt||(a=s.type,t=s.pendingProps,r=vf(lt.current).createElement(a),r[Qe]=s,r[fi]=t,qe(r,a,t),Oe(r),s.stateNode=r):s.memoizedState=xS(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Mc(s),t===null&&Bt&&(r=s.stateNode=ES(s.type,s.pendingProps,lt.current),ai=s,Ls=!0,h=ue,ba(s.type)?(Km=h,ue=gs(r.firstChild)):ue=h),Pe(t,s,s.pendingProps.children,a),nf(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Bt&&((h=r=ue)&&(r=Sw(r,s.type,s.pendingProps,Ls),r!==null?(s.stateNode=r,ai=s,ue=gs(r.firstChild),Ls=!1,h=!0):h=!1),h||fl(s)),Mc(s),h=s.type,p=s.pendingProps,A=t!==null?t.memoizedProps:null,r=p.children,jm(h,p)?r=null:A!==null&&jm(h,A)&&(s.flags|=32),s.memoizedState!==null&&(h=Gp(t,s,BT,null,null,a),Su._currentValue=h),nf(t,s),Pe(t,s,r,a),s.child;case 6:return t===null&&Bt&&((t=a=ue)&&(a=_w(a,s.pendingProps,Ls),a!==null?(s.stateNode=a,ai=s,ue=null,t=!0):t=!1),t||fl(s)),null;case 13:return vA(t,s,a);case 4:return It(s,s.stateNode.containerInfo),r=s.pendingProps,t===null?s.child=so(s,null,r,a):Pe(t,s,r,a),s.child;case 11:return hA(t,s,s.type,s.pendingProps,a);case 7:return Pe(t,s,s.pendingProps,a),s.child;case 8:return Pe(t,s,s.pendingProps.children,a),s.child;case 12:return Pe(t,s,s.pendingProps.children,a),s.child;case 10:return r=s.pendingProps,ia(s,s.type,r.value),Pe(t,s,r.children,a),s.child;case 9:return h=s.type._context,r=s.pendingProps.children,pl(s),h=Ze(h),r=r(h),s.flags|=1,Pe(t,s,r,a),s.child;case 14:return dA(t,s,s.type,s.pendingProps,a);case 15:return fA(t,s,s.type,s.pendingProps,a);case 19:return SA(t,s,a);case 31:return r=s.pendingProps,a=s.mode,r={mode:r.mode,children:r.children},t===null?(a=af(r,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=an(t.child,r),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return gA(t,s,a);case 24:return pl(s),r=Ze(_e),t===null?(h=kp(),h===null&&(h=te,p=Lp(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=a),h=p),s.memoizedState={parent:r,cache:h},zp(s),ia(s,_e,h)):((t.lanes&a)!==0&&(Fp(t,s),Jc(s,null,null,a),$c()),h=t.memoizedState,p=s.memoizedState,h.parent!==r?(h={parent:r,cache:r},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),ia(s,_e,r)):(r=p.cache,ia(s,_e,r),r!==h.cache&&Op(s,[_e],a,!0))),Pe(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function fn(t){t.flags|=4}function EA(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!OS(s)){if(s=Ji.current,s!==null&&((Ft&4194048)===Ft?Ns!==null:(Ft&62914560)!==Ft&&(Ft&536870912)===0||s!==Ns))throw Zc=Hp,lv;t.flags|=8192}}function lf(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?ey():536870912,t.lanes|=s,ro|=s)}function lu(t,s){if(!Bt)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ae(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,r=0;if(s)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,r|=h.subtreeFlags&65011712,r|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,r|=h.subtreeFlags,r|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=r,t.childLanes=a,s}function KT(t,s,a){var r=s.pendingProps;switch(Cp(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ae(s),null;case 1:return ae(s),null;case 3:return a=s.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),cn(_e),Yi(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Gc(s)?fn(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ev())),ae(s),null;case 26:return a=s.memoizedState,t===null?(fn(s),a!==null?(ae(s),EA(s,a)):(ae(s),s.flags&=-16777217)):a?a!==t.memoizedState?(fn(s),ae(s),EA(s,a)):(ae(s),s.flags&=-16777217):(t.memoizedProps!==r&&fn(s),ae(s),s.flags&=-16777217),null;case 27:md(s),a=lt.current;var h=s.type;if(t!==null&&s.stateNode!=null)t.memoizedProps!==r&&fn(s);else{if(!r){if(s.stateNode===null)throw Error(n(166));return ae(s),null}t=rt.current,Gc(s)?Jy(s):(t=ES(h,r,a),s.stateNode=t,fn(s))}return ae(s),null;case 5:if(md(s),a=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==r&&fn(s);else{if(!r){if(s.stateNode===null)throw Error(n(166));return ae(s),null}if(t=rt.current,Gc(s))Jy(s);else{switch(h=vf(lt.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof r.is=="string"?h.createElement("select",{is:r.is}):h.createElement("select"),r.multiple?t.multiple=!0:r.size&&(t.size=r.size);break;default:t=typeof r.is=="string"?h.createElement(a,{is:r.is}):h.createElement(a)}}t[Qe]=s,t[fi]=r;t:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break t;for(;h.sibling===null;){if(h.return===null||h.return===s)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=t;t:switch(qe(t,a,r),a){case"button":case"input":case"select":case"textarea":t=!!r.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&fn(s)}}return ae(s),s.flags&=-16777217,null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==r&&fn(s);else{if(typeof r!="string"&&s.stateNode===null)throw Error(n(166));if(t=lt.current,Gc(s)){if(t=s.stateNode,a=s.memoizedProps,r=null,h=ai,h!==null)switch(h.tag){case 27:case 5:r=h.memoizedProps}t[Qe]=s,t=!!(t.nodeValue===a||r!==null&&r.suppressHydrationWarning===!0||mS(t.nodeValue,a)),t||fl(s)}else t=vf(t).createTextNode(r),t[Qe]=s,s.stateNode=t}return ae(s),null;case 13:if(r=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Gc(s),r!==null&&r.dehydrated!==null){if(t===null){if(!h)throw Error(n(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));h[Qe]=s}else jc(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ae(s),h=!1}else h=ev(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(hn(s),s):(hn(s),null)}if(hn(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=r!==null,t=t!==null&&t.memoizedState!==null,a){r=s.child,h=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(h=r.alternate.memoizedState.cachePool.pool);var p=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(p=r.memoizedState.cachePool.pool),p!==h&&(r.flags|=2048)}return a!==t&&a&&(s.child.flags|=8192),lf(s,s.updateQueue),ae(s),null;case 4:return Yi(),t===null&&Bm(s.stateNode.containerInfo),ae(s),null;case 10:return cn(s.type),ae(s),null;case 19:if($(Ee),h=s.memoizedState,h===null)return ae(s),null;if(r=(s.flags&128)!==0,p=h.rendering,p===null)if(r)lu(h,!1);else{if(he!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(p=tf(t),p!==null){for(s.flags|=128,lu(h,!1),t=p.updateQueue,s.updateQueue=t,lf(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Wy(a,t),a=a.sibling;return Z(Ee,Ee.current&1|2),s.child}t=t.sibling}h.tail!==null&&Os()>cf&&(s.flags|=128,r=!0,lu(h,!1),s.lanes=4194304)}else{if(!r)if(t=tf(p),t!==null){if(s.flags|=128,r=!0,t=t.updateQueue,s.updateQueue=t,lf(s,t),lu(h,!0),h.tail===null&&h.tailMode==="hidden"&&!p.alternate&&!Bt)return ae(s),null}else 2*Os()-h.renderingStartTime>cf&&a!==536870912&&(s.flags|=128,r=!0,lu(h,!1),s.lanes=4194304);h.isBackwards?(p.sibling=s.child,s.child=p):(t=h.last,t!==null?t.sibling=p:s.child=p,h.last=p)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=Os(),s.sibling=null,t=Ee.current,Z(Ee,r?t&1|2:t&1),s):(ae(s),null);case 22:case 23:return hn(s),Ip(),r=s.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(s.flags|=8192):r&&(s.flags|=8192),r?(a&536870912)!==0&&(s.flags&128)===0&&(ae(s),s.subtreeFlags&6&&(s.flags|=8192)):ae(s),a=s.updateQueue,a!==null&&lf(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==a&&(s.flags|=2048),t!==null&&$(ml),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),cn(_e),ae(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function QT(t,s){switch(Cp(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return cn(_e),Yi(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return md(s),null;case 13:if(hn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(n(340));jc()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return $(Ee),null;case 4:return Yi(),null;case 10:return cn(s.type),null;case 22:case 23:return hn(s),Ip(),t!==null&&$(ml),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return cn(_e),null;case 25:return null;default:return null}}function TA(t,s){switch(Cp(s),s.tag){case 3:cn(_e),Yi();break;case 26:case 27:case 5:md(s);break;case 4:Yi();break;case 13:hn(s);break;case 19:$(Ee);break;case 10:cn(s.type);break;case 22:case 23:hn(s),Ip(),t!==null&&$(ml);break;case 24:cn(_e)}}function ru(t,s){try{var a=s.updateQueue,r=a!==null?a.lastEffect:null;if(r!==null){var h=r.next;a=h;do{if((a.tag&t)===t){r=void 0;var p=a.create,A=a.inst;r=p(),A.destroy=r}a=a.next}while(a!==h)}}catch(T){Jt(s,s.return,T)}}function ca(t,s,a){try{var r=s.updateQueue,h=r!==null?r.lastEffect:null;if(h!==null){var p=h.next;r=p;do{if((r.tag&t)===t){var A=r.inst,T=A.destroy;if(T!==void 0){A.destroy=void 0,h=s;var R=a,H=T;try{H()}catch(j){Jt(h,R,j)}}}r=r.next}while(r!==p)}}catch(j){Jt(s,s.return,j)}}function wA(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{dv(s,a)}catch(r){Jt(t,t.return,r)}}}function xA(t,s,a){a.props=yl(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(r){Jt(t,s,r)}}function ou(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof a=="function"?t.refCleanup=a(r):a.current=r}}catch(h){Jt(t,s,h)}}function ks(t,s){var a=t.ref,r=t.refCleanup;if(a!==null)if(typeof r=="function")try{r()}catch(h){Jt(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Jt(t,s,h)}else a.current=null}function CA(t){var s=t.type,a=t.memoizedProps,r=t.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&r.focus();break t;case"img":a.src?r.src=a.src:a.srcSet&&(r.srcset=a.srcSet)}}catch(h){Jt(t,t.return,h)}}function pm(t,s,a){try{var r=t.stateNode;mw(r,t.type,a,s),r[fi]=s}catch(h){Jt(t,t.return,h)}}function MA(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ba(t.type)||t.tag===4}function mm(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||MA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ba(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bm(t,s,a){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=yf));else if(r!==4&&(r===27&&ba(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(bm(t,s,a),t=t.sibling;t!==null;)bm(t,s,a),t=t.sibling}function rf(t,s,a){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(r!==4&&(r===27&&ba(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(rf(t,s,a),t=t.sibling;t!==null;)rf(t,s,a),t=t.sibling}function RA(t){var s=t.stateNode,a=t.memoizedProps;try{for(var r=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);qe(s,r,a),s[Qe]=t,s[fi]=a}catch(p){Jt(t,t.return,p)}}var gn=!1,ge=!1,ym=!1,DA=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function ZT(t,s){if(t=t.containerInfo,qm=wf,t=Iy(t),mp(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else t:{a=(a=t.ownerDocument)&&a.defaultView||window;var r=a.getSelection&&a.getSelection();if(r&&r.rangeCount!==0){a=r.anchorNode;var h=r.anchorOffset,p=r.focusNode;r=r.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break t}var A=0,T=-1,R=-1,H=0,j=0,K=t,U=null;e:for(;;){for(var B;K!==a||h!==0&&K.nodeType!==3||(T=A+h),K!==p||r!==0&&K.nodeType!==3||(R=A+r),K.nodeType===3&&(A+=K.nodeValue.length),(B=K.firstChild)!==null;)U=K,K=B;for(;;){if(K===t)break e;if(U===a&&++H===h&&(T=A),U===p&&++j===r&&(R=A),(B=K.nextSibling)!==null)break;K=U,U=K.parentNode}K=B}a=T===-1||R===-1?null:{start:T,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Gm={focusedElem:t,selectionRange:a},wf=!1,Ne=s;Ne!==null;)if(s=Ne,t=s.child,(s.subtreeFlags&1024)!==0&&t!==null)t.return=s,Ne=t;else for(;Ne!==null;){switch(s=Ne,p=s.alternate,t=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,a=s,h=p.memoizedProps,p=p.memoizedState,r=a.stateNode;try{var ft=yl(a.type,h,a.elementType===a.type);t=r.getSnapshotBeforeUpdate(ft,p),r.__reactInternalSnapshotBeforeUpdate=t}catch(ht){Jt(a,a.return,ht)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Ym(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ym(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(n(163))}if(t=s.sibling,t!==null){t.return=s.return,Ne=t;break}Ne=s.return}}function OA(t,s,a){var r=a.flags;switch(a.tag){case 0:case 11:case 15:ua(t,a),r&4&&ru(5,a);break;case 1:if(ua(t,a),r&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(A){Jt(a,a.return,A)}else{var h=yl(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(A){Jt(a,a.return,A)}}r&64&&wA(a),r&512&&ou(a,a.return);break;case 3:if(ua(t,a),r&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{dv(t,s)}catch(A){Jt(a,a.return,A)}}break;case 27:s===null&&r&4&&RA(a);case 26:case 5:ua(t,a),s===null&&r&4&&CA(a),r&512&&ou(a,a.return);break;case 12:ua(t,a);break;case 13:ua(t,a),r&4&&kA(t,a),r&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=aw.bind(null,a),Ew(t,a))));break;case 22:if(r=a.memoizedState!==null||gn,!r){s=s!==null&&s.memoizedState!==null||ge,h=gn;var p=ge;gn=r,(ge=s)&&!p?ha(t,a,(a.subtreeFlags&8772)!==0):ua(t,a),gn=h,ge=p}break;case 30:break;default:ua(t,a)}}function LA(t){var s=t.alternate;s!==null&&(t.alternate=null,LA(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Wg(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var se=null,mi=!1;function pn(t,s,a){for(a=a.child;a!==null;)NA(t,s,a),a=a.sibling}function NA(t,s,a){if(wi&&typeof wi.onCommitFiberUnmount=="function")try{wi.onCommitFiberUnmount(Rc,a)}catch{}switch(a.tag){case 26:ge||ks(a,s),pn(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ge||ks(a,s);var r=se,h=mi;ba(a.type)&&(se=a.stateNode,mi=!1),pn(t,s,a),bu(a.stateNode),se=r,mi=h;break;case 5:ge||ks(a,s);case 6:if(r=se,h=mi,se=null,pn(t,s,a),se=r,mi=h,se!==null)if(mi)try{(se.nodeType===9?se.body:se.nodeName==="HTML"?se.ownerDocument.body:se).removeChild(a.stateNode)}catch(p){Jt(a,s,p)}else try{se.removeChild(a.stateNode)}catch(p){Jt(a,s,p)}break;case 18:se!==null&&(mi?(t=se,SS(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),wu(t)):SS(se,a.stateNode));break;case 4:r=se,h=mi,se=a.stateNode.containerInfo,mi=!0,pn(t,s,a),se=r,mi=h;break;case 0:case 11:case 14:case 15:ge||ca(2,a,s),ge||ca(4,a,s),pn(t,s,a);break;case 1:ge||(ks(a,s),r=a.stateNode,typeof r.componentWillUnmount=="function"&&xA(a,s,r)),pn(t,s,a);break;case 21:pn(t,s,a);break;case 22:ge=(r=ge)||a.memoizedState!==null,pn(t,s,a),ge=r;break;default:pn(t,s,a)}}function kA(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{wu(t)}catch(a){Jt(s,s.return,a)}}function WT(t){switch(t.tag){case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new DA),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new DA),s;default:throw Error(n(435,t.tag))}}function vm(t,s){var a=WT(t);s.forEach(function(r){var h=lw.bind(null,t,r);a.has(r)||(a.add(r),r.then(h,h))})}function Ri(t,s){var a=s.deletions;if(a!==null)for(var r=0;r<a.length;r++){var h=a[r],p=t,A=s,T=A;t:for(;T!==null;){switch(T.tag){case 27:if(ba(T.type)){se=T.stateNode,mi=!1;break t}break;case 5:se=T.stateNode,mi=!1;break t;case 3:case 4:se=T.stateNode.containerInfo,mi=!0;break t}T=T.return}if(se===null)throw Error(n(160));NA(p,A,h),se=null,mi=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)HA(s,t),s=s.sibling}var fs=null;function HA(t,s){var a=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ri(s,t),Di(t),r&4&&(ca(3,t,t.return),ru(3,t),ca(5,t,t.return));break;case 1:Ri(s,t),Di(t),r&512&&(ge||a===null||ks(a,a.return)),r&64&&gn&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?r:a.concat(r))));break;case 26:var h=fs;if(Ri(s,t),Di(t),r&512&&(ge||a===null||ks(a,a.return)),r&4){var p=a!==null?a.memoizedState:null;if(r=t.memoizedState,a===null)if(r===null)if(t.stateNode===null){t:{r=t.type,a=t.memoizedProps,h=h.ownerDocument||h;e:switch(r){case"title":p=h.getElementsByTagName("title")[0],(!p||p[Lc]||p[Qe]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(r),h.head.insertBefore(p,h.querySelector("head > title"))),qe(p,r,a),p[Qe]=t,Oe(p),r=p;break t;case"link":var A=RS("link","href",h).get(r+(a.href||""));if(A){for(var T=0;T<A.length;T++)if(p=A[T],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(T,1);break e}}p=h.createElement(r),qe(p,r,a),h.head.appendChild(p);break;case"meta":if(A=RS("meta","content",h).get(r+(a.content||""))){for(T=0;T<A.length;T++)if(p=A[T],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(T,1);break e}}p=h.createElement(r),qe(p,r,a),h.head.appendChild(p);break;default:throw Error(n(468,r))}p[Qe]=t,Oe(p),r=p}t.stateNode=r}else DS(h,t.type,t.stateNode);else t.stateNode=MS(h,r,t.memoizedProps);else p!==r?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,r===null?DS(h,t.type,t.stateNode):MS(h,r,t.memoizedProps)):r===null&&t.stateNode!==null&&pm(t,t.memoizedProps,a.memoizedProps)}break;case 27:Ri(s,t),Di(t),r&512&&(ge||a===null||ks(a,a.return)),a!==null&&r&4&&pm(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Ri(s,t),Di(t),r&512&&(ge||a===null||ks(a,a.return)),t.flags&32){h=t.stateNode;try{Br(h,"")}catch(B){Jt(t,t.return,B)}}r&4&&t.stateNode!=null&&(h=t.memoizedProps,pm(t,h,a!==null?a.memoizedProps:h)),r&1024&&(ym=!0);break;case 6:if(Ri(s,t),Di(t),r&4){if(t.stateNode===null)throw Error(n(162));r=t.memoizedProps,a=t.stateNode;try{a.nodeValue=r}catch(B){Jt(t,t.return,B)}}break;case 3:if(_f=null,h=fs,fs=Af(s.containerInfo),Ri(s,t),fs=h,Di(t),r&4&&a!==null&&a.memoizedState.isDehydrated)try{wu(s.containerInfo)}catch(B){Jt(t,t.return,B)}ym&&(ym=!1,zA(t));break;case 4:r=fs,fs=Af(t.stateNode.containerInfo),Ri(s,t),Di(t),fs=r;break;case 12:Ri(s,t),Di(t);break;case 13:Ri(s,t),Di(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(wm=Os()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,vm(t,r)));break;case 22:h=t.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,H=gn,j=ge;if(gn=H||h,ge=j||R,Ri(s,t),ge=j,gn=H,Di(t),r&8192)t:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||R||gn||ge||vl(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){R=a=s;try{if(p=R.stateNode,h)A=p.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{T=R.stateNode;var K=R.memoizedProps.style,U=K!=null&&K.hasOwnProperty("display")?K.display:null;T.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(B){Jt(R,R.return,B)}}}else if(s.tag===6){if(a===null){R=s;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(B){Jt(R,R.return,B)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}r&4&&(r=t.updateQueue,r!==null&&(a=r.retryQueue,a!==null&&(r.retryQueue=null,vm(t,a))));break;case 19:Ri(s,t),Di(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,vm(t,r)));break;case 30:break;case 21:break;default:Ri(s,t),Di(t)}}function Di(t){var s=t.flags;if(s&2){try{for(var a,r=t.return;r!==null;){if(MA(r)){a=r;break}r=r.return}if(a==null)throw Error(n(160));switch(a.tag){case 27:var h=a.stateNode,p=mm(t);rf(t,p,h);break;case 5:var A=a.stateNode;a.flags&32&&(Br(A,""),a.flags&=-33);var T=mm(t);rf(t,T,A);break;case 3:case 4:var R=a.stateNode.containerInfo,H=mm(t);bm(t,H,R);break;default:throw Error(n(161))}}catch(j){Jt(t,t.return,j)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function zA(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;zA(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function ua(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)OA(t,s.alternate,s),s=s.sibling}function vl(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:ca(4,s,s.return),vl(s);break;case 1:ks(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&xA(s,s.return,a),vl(s);break;case 27:bu(s.stateNode);case 26:case 5:ks(s,s.return),vl(s);break;case 22:s.memoizedState===null&&vl(s);break;case 30:vl(s);break;default:vl(s)}t=t.sibling}}function ha(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var r=s.alternate,h=t,p=s,A=p.flags;switch(p.tag){case 0:case 11:case 15:ha(h,p,a),ru(4,p);break;case 1:if(ha(h,p,a),r=p,h=r.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(H){Jt(r,r.return,H)}if(r=p,h=r.updateQueue,h!==null){var T=r.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)hv(R[h],T)}catch(H){Jt(r,r.return,H)}}a&&A&64&&wA(p),ou(p,p.return);break;case 27:RA(p);case 26:case 5:ha(h,p,a),a&&r===null&&A&4&&CA(p),ou(p,p.return);break;case 12:ha(h,p,a);break;case 13:ha(h,p,a),a&&A&4&&kA(h,p);break;case 22:p.memoizedState===null&&ha(h,p,a),ou(p,p.return);break;case 30:break;default:ha(h,p,a)}s=s.sibling}}function Am(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Vc(a))}function Sm(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Vc(t))}function Hs(t,s,a,r){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)FA(t,s,a,r),s=s.sibling}function FA(t,s,a,r){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Hs(t,s,a,r),h&2048&&ru(9,s);break;case 1:Hs(t,s,a,r);break;case 3:Hs(t,s,a,r),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Vc(t)));break;case 12:if(h&2048){Hs(t,s,a,r),t=s.stateNode;try{var p=s.memoizedProps,A=p.id,T=p.onPostCommit;typeof T=="function"&&T(A,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(R){Jt(s,s.return,R)}}else Hs(t,s,a,r);break;case 13:Hs(t,s,a,r);break;case 23:break;case 22:p=s.stateNode,A=s.alternate,s.memoizedState!==null?p._visibility&2?Hs(t,s,a,r):cu(t,s):p._visibility&2?Hs(t,s,a,r):(p._visibility|=2,no(t,s,a,r,(s.subtreeFlags&10256)!==0)),h&2048&&Am(A,s);break;case 24:Hs(t,s,a,r),h&2048&&Sm(s.alternate,s);break;default:Hs(t,s,a,r)}}function no(t,s,a,r,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=t,A=s,T=a,R=r,H=A.flags;switch(A.tag){case 0:case 11:case 15:no(p,A,T,R,h),ru(8,A);break;case 23:break;case 22:var j=A.stateNode;A.memoizedState!==null?j._visibility&2?no(p,A,T,R,h):cu(p,A):(j._visibility|=2,no(p,A,T,R,h)),h&&H&2048&&Am(A.alternate,A);break;case 24:no(p,A,T,R,h),h&&H&2048&&Sm(A.alternate,A);break;default:no(p,A,T,R,h)}s=s.sibling}}function cu(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,r=s,h=r.flags;switch(r.tag){case 22:cu(a,r),h&2048&&Am(r.alternate,r);break;case 24:cu(a,r),h&2048&&Sm(r.alternate,r);break;default:cu(a,r)}s=s.sibling}}var uu=8192;function ao(t){if(t.subtreeFlags&uu)for(t=t.child;t!==null;)UA(t),t=t.sibling}function UA(t){switch(t.tag){case 26:ao(t),t.flags&uu&&t.memoizedState!==null&&zw(fs,t.memoizedState,t.memoizedProps);break;case 5:ao(t);break;case 3:case 4:var s=fs;fs=Af(t.stateNode.containerInfo),ao(t),fs=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=uu,uu=16777216,ao(t),uu=s):ao(t));break;default:ao(t)}}function BA(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function hu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var r=s[a];Ne=r,IA(r,t)}BA(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)PA(t),t=t.sibling}function PA(t){switch(t.tag){case 0:case 11:case 15:hu(t),t.flags&2048&&ca(9,t,t.return);break;case 3:hu(t);break;case 12:hu(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,of(t)):hu(t);break;default:hu(t)}}function of(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var r=s[a];Ne=r,IA(r,t)}BA(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:ca(8,s,s.return),of(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,of(s));break;default:of(s)}t=t.sibling}}function IA(t,s){for(;Ne!==null;){var a=Ne;switch(a.tag){case 0:case 11:case 15:ca(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var r=a.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Vc(a.memoizedState.cache)}if(r=a.child,r!==null)r.return=a,Ne=r;else t:for(a=t;Ne!==null;){r=Ne;var h=r.sibling,p=r.return;if(LA(r),r===a){Ne=null;break t}if(h!==null){h.return=p,Ne=h;break t}Ne=p}}}var $T={getCacheForType:function(t){var s=Ze(_e),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a}},JT=typeof WeakMap=="function"?WeakMap:Map,Gt=0,te=null,Lt=null,Ft=0,jt=0,Oi=null,da=!1,lo=!1,_m=!1,mn=0,he=0,fa=0,Al=0,Em=0,ts=0,ro=0,du=null,bi=null,Tm=!1,wm=0,cf=1/0,uf=null,ga=null,Ie=0,pa=null,oo=null,co=0,xm=0,Cm=null,qA=null,fu=0,Mm=null;function Li(){if((Gt&2)!==0&&Ft!==0)return Ft&-Ft;if(P.T!==null){var t=Zr;return t!==0?t:Hm()}return ny()}function GA(){ts===0&&(ts=(Ft&536870912)===0||Bt?ty():536870912);var t=Ji.current;return t!==null&&(t.flags|=32),ts}function Ni(t,s,a){(t===te&&(jt===2||jt===9)||t.cancelPendingCommit!==null)&&(uo(t,0),ma(t,Ft,ts,!1)),Oc(t,a),((Gt&2)===0||t!==te)&&(t===te&&((Gt&2)===0&&(Al|=a),he===4&&ma(t,Ft,ts,!1)),zs(t))}function jA(t,s,a){if((Gt&6)!==0)throw Error(n(327));var r=!a&&(s&124)===0&&(s&t.expiredLanes)===0||Dc(t,s),h=r?iw(t,s):Om(t,s,!0),p=r;do{if(h===0){lo&&!r&&ma(t,s,0,!1);break}else{if(a=t.current.alternate,p&&!tw(a)){h=Om(t,s,!1),p=!1;continue}if(h===2){if(p=s,t.errorRecoveryDisabledLanes&p)var A=0;else A=t.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;t:{var T=t;h=du;var R=T.current.memoizedState.isDehydrated;if(R&&(uo(T,A).flags|=256),A=Om(T,A,!1),A!==2){if(_m&&!R){T.errorRecoveryDisabledLanes|=p,Al|=p,h=4;break t}p=bi,bi=h,p!==null&&(bi===null?bi=p:bi.push.apply(bi,p))}h=A}if(p=!1,h!==2)continue}}if(h===1){uo(t,0),ma(t,s,0,!0);break}t:{switch(r=t,p=h,p){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:ma(r,s,ts,!da);break t;case 2:bi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(h=wm+300-Os(),10<h)){if(ma(r,s,ts,!da),Ad(r,0,!0)!==0)break t;r.timeoutHandle=vS(XA.bind(null,r,a,bi,uf,Tm,s,ts,Al,ro,da,p,2,-0,0),h);break t}XA(r,a,bi,uf,Tm,s,ts,Al,ro,da,p,0,-0,0)}}break}while(!0);zs(t)}function XA(t,s,a,r,h,p,A,T,R,H,j,K,U,B){if(t.timeoutHandle=-1,K=s.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(Au={stylesheets:null,count:0,unsuspend:Hw},UA(s),K=Fw(),K!==null)){t.cancelPendingCommit=K($A.bind(null,t,s,p,a,r,h,A,T,R,j,1,U,B)),ma(t,p,A,!H);return}$A(t,s,p,a,r,h,A,T,R)}function tw(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var r=0;r<a.length;r++){var h=a[r],p=h.getSnapshot;h=h.value;try{if(!Ci(p(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ma(t,s,a,r){s&=~Em,s&=~Al,t.suspendedLanes|=s,t.pingedLanes&=~s,r&&(t.warmLanes|=s),r=t.expirationTimes;for(var h=s;0<h;){var p=31-xi(h),A=1<<p;r[p]=-1,h&=~A}a!==0&&iy(t,a,s)}function hf(){return(Gt&6)===0?(gu(0),!1):!0}function Rm(){if(Lt!==null){if(jt===0)var t=Lt.return;else t=Lt,on=gl=null,Yp(t),io=null,nu=0,t=Lt;for(;t!==null;)TA(t.alternate,t),t=t.return;Lt=null}}function uo(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,yw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Rm(),te=t,Lt=a=an(t.current,null),Ft=s,jt=0,Oi=null,da=!1,lo=Dc(t,s),_m=!1,ro=ts=Em=Al=fa=he=0,bi=du=null,Tm=!1,(s&8)!==0&&(s|=s&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=s;0<r;){var h=31-xi(r),p=1<<h;s|=t[h],r&=~p}return mn=s,Ld(),a}function YA(t,s){wt=null,P.H=Wd,s===Qc||s===Id?(s=cv(),jt=3):s===lv?(s=cv(),jt=4):jt=s===uA?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Oi=s,Lt===null&&(he=1,sf(t,Qi(s,t.current)))}function VA(){var t=P.H;return P.H=Wd,t===null?Wd:t}function KA(){var t=P.A;return P.A=$T,t}function Dm(){he=4,da||(Ft&4194048)!==Ft&&Ji.current!==null||(lo=!0),(fa&134217727)===0&&(Al&134217727)===0||te===null||ma(te,Ft,ts,!1)}function Om(t,s,a){var r=Gt;Gt|=2;var h=VA(),p=KA();(te!==t||Ft!==s)&&(uf=null,uo(t,s)),s=!1;var A=he;t:do try{if(jt!==0&&Lt!==null){var T=Lt,R=Oi;switch(jt){case 8:Rm(),A=6;break t;case 3:case 2:case 9:case 6:Ji.current===null&&(s=!0);var H=jt;if(jt=0,Oi=null,ho(t,T,R,H),a&&lo){A=0;break t}break;default:H=jt,jt=0,Oi=null,ho(t,T,R,H)}}ew(),A=he;break}catch(j){YA(t,j)}while(!0);return s&&t.shellSuspendCounter++,on=gl=null,Gt=r,P.H=h,P.A=p,Lt===null&&(te=null,Ft=0,Ld()),A}function ew(){for(;Lt!==null;)QA(Lt)}function iw(t,s){var a=Gt;Gt|=2;var r=VA(),h=KA();te!==t||Ft!==s?(uf=null,cf=Os()+500,uo(t,s)):lo=Dc(t,s);t:do try{if(jt!==0&&Lt!==null){s=Lt;var p=Oi;e:switch(jt){case 1:jt=0,Oi=null,ho(t,s,p,1);break;case 2:case 9:if(rv(p)){jt=0,Oi=null,ZA(s);break}s=function(){jt!==2&&jt!==9||te!==t||(jt=7),zs(t)},p.then(s,s);break t;case 3:jt=7;break t;case 4:jt=5;break t;case 7:rv(p)?(jt=0,Oi=null,ZA(s)):(jt=0,Oi=null,ho(t,s,p,7));break;case 5:var A=null;switch(Lt.tag){case 26:A=Lt.memoizedState;case 5:case 27:var T=Lt;if(!A||OS(A)){jt=0,Oi=null;var R=T.sibling;if(R!==null)Lt=R;else{var H=T.return;H!==null?(Lt=H,df(H)):Lt=null}break e}}jt=0,Oi=null,ho(t,s,p,5);break;case 6:jt=0,Oi=null,ho(t,s,p,6);break;case 8:Rm(),he=6;break t;default:throw Error(n(462))}}sw();break}catch(j){YA(t,j)}while(!0);return on=gl=null,P.H=r,P.A=h,Gt=a,Lt!==null?0:(te=null,Ft=0,Ld(),he)}function sw(){for(;Lt!==null&&!w1();)QA(Lt)}function QA(t){var s=_A(t.alternate,t,mn);t.memoizedProps=t.pendingProps,s===null?df(t):Lt=s}function ZA(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=mA(a,s,s.pendingProps,s.type,void 0,Ft);break;case 11:s=mA(a,s,s.pendingProps,s.type.render,s.ref,Ft);break;case 5:Yp(s);default:TA(a,s),s=Lt=Wy(s,mn),s=_A(a,s,mn)}t.memoizedProps=t.pendingProps,s===null?df(t):Lt=s}function ho(t,s,a,r){on=gl=null,Yp(s),io=null,nu=0;var h=s.return;try{if(YT(t,h,s,a,Ft)){he=1,sf(t,Qi(a,t.current)),Lt=null;return}}catch(p){if(h!==null)throw Lt=h,p;he=1,sf(t,Qi(a,t.current)),Lt=null;return}s.flags&32768?(Bt||r===1?t=!0:lo||(Ft&536870912)!==0?t=!1:(da=t=!0,(r===2||r===9||r===3||r===6)&&(r=Ji.current,r!==null&&r.tag===13&&(r.flags|=16384))),WA(s,t)):df(s)}function df(t){var s=t;do{if((s.flags&32768)!==0){WA(s,da);return}t=s.return;var a=KT(s.alternate,s,mn);if(a!==null){Lt=a;return}if(s=s.sibling,s!==null){Lt=s;return}Lt=s=t}while(s!==null);he===0&&(he=5)}function WA(t,s){do{var a=QT(t.alternate,t);if(a!==null){a.flags&=32767,Lt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Lt=t;return}Lt=t=a}while(t!==null);he=6,Lt=null}function $A(t,s,a,r,h,p,A,T,R){t.cancelPendingCommit=null;do ff();while(Ie!==0);if((Gt&6)!==0)throw Error(n(327));if(s!==null){if(s===t.current)throw Error(n(177));if(p=s.lanes|s.childLanes,p|=Sp,H1(t,a,p,A,T,R),t===te&&(Lt=te=null,Ft=0),oo=s,pa=t,co=a,xm=p,Cm=h,qA=r,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,rw(bd,function(){return sS(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||r){r=P.T,P.T=null,h=X.p,X.p=2,A=Gt,Gt|=4;try{ZT(t,s,a)}finally{Gt=A,X.p=h,P.T=r}}Ie=1,JA(),tS(),eS()}}function JA(){if(Ie===1){Ie=0;var t=pa,s=oo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=P.T,P.T=null;var r=X.p;X.p=2;var h=Gt;Gt|=4;try{HA(s,t);var p=Gm,A=Iy(t.containerInfo),T=p.focusedElem,R=p.selectionRange;if(A!==T&&T&&T.ownerDocument&&Py(T.ownerDocument.documentElement,T)){if(R!==null&&mp(T)){var H=R.start,j=R.end;if(j===void 0&&(j=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min(j,T.value.length);else{var K=T.ownerDocument||document,U=K&&K.defaultView||window;if(U.getSelection){var B=U.getSelection(),ft=T.textContent.length,ht=Math.min(R.start,ft),Zt=R.end===void 0?ht:Math.min(R.end,ft);!B.extend&&ht>Zt&&(A=Zt,Zt=ht,ht=A);var N=By(T,ht),L=By(T,Zt);if(N&&L&&(B.rangeCount!==1||B.anchorNode!==N.node||B.anchorOffset!==N.offset||B.focusNode!==L.node||B.focusOffset!==L.offset)){var k=K.createRange();k.setStart(N.node,N.offset),B.removeAllRanges(),ht>Zt?(B.addRange(k),B.extend(L.node,L.offset)):(k.setEnd(L.node,L.offset),B.addRange(k))}}}}for(K=[],B=T;B=B.parentNode;)B.nodeType===1&&K.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<K.length;T++){var Y=K[T];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}wf=!!qm,Gm=qm=null}finally{Gt=h,X.p=r,P.T=a}}t.current=s,Ie=2}}function tS(){if(Ie===2){Ie=0;var t=pa,s=oo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=P.T,P.T=null;var r=X.p;X.p=2;var h=Gt;Gt|=4;try{OA(t,s.alternate,s)}finally{Gt=h,X.p=r,P.T=a}}Ie=3}}function eS(){if(Ie===4||Ie===3){Ie=0,x1();var t=pa,s=oo,a=co,r=qA;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ie=5:(Ie=0,oo=pa=null,iS(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ga=null),Qg(a),s=s.stateNode,wi&&typeof wi.onCommitFiberRoot=="function")try{wi.onCommitFiberRoot(Rc,s,void 0,(s.current.flags&128)===128)}catch{}if(r!==null){s=P.T,h=X.p,X.p=2,P.T=null;try{for(var p=t.onRecoverableError,A=0;A<r.length;A++){var T=r[A];p(T.value,{componentStack:T.stack})}}finally{P.T=s,X.p=h}}(co&3)!==0&&ff(),zs(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Mm?fu++:(fu=0,Mm=t):fu=0,gu(0)}}function iS(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Vc(s)))}function ff(t){return JA(),tS(),eS(),sS()}function sS(){if(Ie!==5)return!1;var t=pa,s=xm;xm=0;var a=Qg(co),r=P.T,h=X.p;try{X.p=32>a?32:a,P.T=null,a=Cm,Cm=null;var p=pa,A=co;if(Ie=0,oo=pa=null,co=0,(Gt&6)!==0)throw Error(n(331));var T=Gt;if(Gt|=4,PA(p.current),FA(p,p.current,A,a),Gt=T,gu(0,!1),wi&&typeof wi.onPostCommitFiberRoot=="function")try{wi.onPostCommitFiberRoot(Rc,p)}catch{}return!0}finally{X.p=h,P.T=r,iS(t,s)}}function nS(t,s,a){s=Qi(a,s),s=lm(t.stateNode,s,2),t=aa(t,s,2),t!==null&&(Oc(t,2),zs(t))}function Jt(t,s,a){if(t.tag===3)nS(t,t,a);else for(;s!==null;){if(s.tag===3){nS(s,t,a);break}else if(s.tag===1){var r=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ga===null||!ga.has(r))){t=Qi(a,t),a=oA(2),r=aa(s,a,2),r!==null&&(cA(a,r,s,t),Oc(r,2),zs(r));break}}s=s.return}}function Lm(t,s,a){var r=t.pingCache;if(r===null){r=t.pingCache=new JT;var h=new Set;r.set(s,h)}else h=r.get(s),h===void 0&&(h=new Set,r.set(s,h));h.has(a)||(_m=!0,h.add(a),t=nw.bind(null,t,s,a),s.then(t,t))}function nw(t,s,a){var r=t.pingCache;r!==null&&r.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,te===t&&(Ft&a)===a&&(he===4||he===3&&(Ft&62914560)===Ft&&300>Os()-wm?(Gt&2)===0&&uo(t,0):Em|=a,ro===Ft&&(ro=0)),zs(t)}function aS(t,s){s===0&&(s=ey()),t=Yr(t,s),t!==null&&(Oc(t,s),zs(t))}function aw(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),aS(t,a)}function lw(t,s){var a=0;switch(t.tag){case 13:var r=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(n(314))}r!==null&&r.delete(s),aS(t,a)}function rw(t,s){return Xg(t,s)}var gf=null,fo=null,Nm=!1,pf=!1,km=!1,Sl=0;function zs(t){t!==fo&&t.next===null&&(fo===null?gf=fo=t:fo=fo.next=t),pf=!0,Nm||(Nm=!0,cw())}function gu(t,s){if(!km&&pf){km=!0;do for(var a=!1,r=gf;r!==null;){if(t!==0){var h=r.pendingLanes;if(h===0)var p=0;else{var A=r.suspendedLanes,T=r.pingedLanes;p=(1<<31-xi(42|t)+1)-1,p&=h&~(A&~T),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,cS(r,p))}else p=Ft,p=Ad(r,r===te?p:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(p&3)===0||Dc(r,p)||(a=!0,cS(r,p));r=r.next}while(a);km=!1}}function ow(){lS()}function lS(){pf=Nm=!1;var t=0;Sl!==0&&(bw()&&(t=Sl),Sl=0);for(var s=Os(),a=null,r=gf;r!==null;){var h=r.next,p=rS(r,s);p===0?(r.next=null,a===null?gf=h:a.next=h,h===null&&(fo=a)):(a=r,(t!==0||(p&3)!==0)&&(pf=!0)),r=h}gu(t)}function rS(t,s){for(var a=t.suspendedLanes,r=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var A=31-xi(p),T=1<<A,R=h[A];R===-1?((T&a)===0||(T&r)!==0)&&(h[A]=k1(T,s)):R<=s&&(t.expiredLanes|=T),p&=~T}if(s=te,a=Ft,a=Ad(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,a===0||t===s&&(jt===2||jt===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&Yg(r),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Dc(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(r!==null&&Yg(r),Qg(a)){case 2:case 8:a=$0;break;case 32:a=bd;break;case 268435456:a=J0;break;default:a=bd}return r=oS.bind(null,t),a=Xg(a,r),t.callbackPriority=s,t.callbackNode=a,s}return r!==null&&r!==null&&Yg(r),t.callbackPriority=2,t.callbackNode=null,2}function oS(t,s){if(Ie!==0&&Ie!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ff()&&t.callbackNode!==a)return null;var r=Ft;return r=Ad(t,t===te?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(jA(t,r,s),rS(t,Os()),t.callbackNode!=null&&t.callbackNode===a?oS.bind(null,t):null)}function cS(t,s){if(ff())return null;jA(t,s,!0)}function cw(){vw(function(){(Gt&6)!==0?Xg(W0,ow):lS()})}function Hm(){return Sl===0&&(Sl=ty()),Sl}function uS(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:wd(""+t)}function hS(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function uw(t,s,a,r,h){if(s==="submit"&&a&&a.stateNode===h){var p=uS((h[fi]||null).action),A=r.submitter;A&&(s=(s=A[fi]||null)?uS(s.formAction):A.getAttribute("formAction"),s!==null&&(p=s,A=null));var T=new Rd("action","action",null,r,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Sl!==0){var R=A?hS(h,A):new FormData(h);em(a,{pending:!0,data:R,method:h.method,action:p},null,R)}}else typeof p=="function"&&(T.preventDefault(),R=A?hS(h,A):new FormData(h),em(a,{pending:!0,data:R,method:h.method,action:p},p,R))},currentTarget:h}]})}}for(var zm=0;zm<Ap.length;zm++){var Fm=Ap[zm],hw=Fm.toLowerCase(),dw=Fm[0].toUpperCase()+Fm.slice(1);ds(hw,"on"+dw)}ds(jy,"onAnimationEnd"),ds(Xy,"onAnimationIteration"),ds(Yy,"onAnimationStart"),ds("dblclick","onDoubleClick"),ds("focusin","onFocus"),ds("focusout","onBlur"),ds(RT,"onTransitionRun"),ds(DT,"onTransitionStart"),ds(OT,"onTransitionCancel"),ds(Vy,"onTransitionEnd"),zr("onMouseEnter",["mouseout","mouseover"]),zr("onMouseLeave",["mouseout","mouseover"]),zr("onPointerEnter",["pointerout","pointerover"]),zr("onPointerLeave",["pointerout","pointerover"]),al("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),al("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),al("onBeforeInput",["compositionend","keypress","textInput","paste"]),al("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),al("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),al("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pu));function dS(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var r=t[a],h=r.event;r=r.listeners;t:{var p=void 0;if(s)for(var A=r.length-1;0<=A;A--){var T=r[A],R=T.instance,H=T.currentTarget;if(T=T.listener,R!==p&&h.isPropagationStopped())break t;p=T,h.currentTarget=H;try{p(h)}catch(j){ef(j)}h.currentTarget=null,p=R}else for(A=0;A<r.length;A++){if(T=r[A],R=T.instance,H=T.currentTarget,T=T.listener,R!==p&&h.isPropagationStopped())break t;p=T,h.currentTarget=H;try{p(h)}catch(j){ef(j)}h.currentTarget=null,p=R}}}}function Nt(t,s){var a=s[Zg];a===void 0&&(a=s[Zg]=new Set);var r=t+"__bubble";a.has(r)||(fS(s,t,2,!1),a.add(r))}function Um(t,s,a){var r=0;s&&(r|=4),fS(a,t,r,s)}var mf="_reactListening"+Math.random().toString(36).slice(2);function Bm(t){if(!t[mf]){t[mf]=!0,ly.forEach(function(a){a!=="selectionchange"&&(fw.has(a)||Um(a,!1,t),Um(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[mf]||(s[mf]=!0,Um("selectionchange",!1,s))}}function fS(t,s,a,r){switch(FS(s)){case 2:var h=Pw;break;case 8:h=Iw;break;default:h=Jm}a=h.bind(null,s,a,t),h=void 0,!rp||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),r?h!==void 0?t.addEventListener(s,a,{capture:!0,passive:h}):t.addEventListener(s,a,!0):h!==void 0?t.addEventListener(s,a,{passive:h}):t.addEventListener(s,a,!1)}function Pm(t,s,a,r,h){var p=r;if((s&1)===0&&(s&2)===0&&r!==null)t:for(;;){if(r===null)return;var A=r.tag;if(A===3||A===4){var T=r.stateNode.containerInfo;if(T===h)break;if(A===4)for(A=r.return;A!==null;){var R=A.tag;if((R===3||R===4)&&A.stateNode.containerInfo===h)return;A=A.return}for(;T!==null;){if(A=Nr(T),A===null)return;if(R=A.tag,R===5||R===6||R===26||R===27){r=p=A;continue t}T=T.parentNode}}r=r.return}Ay(function(){var H=p,j=ap(a),K=[];t:{var U=Ky.get(t);if(U!==void 0){var B=Rd,ft=t;switch(t){case"keypress":if(Cd(a)===0)break t;case"keydown":case"keyup":B=rT;break;case"focusin":ft="focus",B=hp;break;case"focusout":ft="blur",B=hp;break;case"beforeblur":case"afterblur":B=hp;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Ey;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Q1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=uT;break;case jy:case Xy:case Yy:B=$1;break;case Vy:B=dT;break;case"scroll":case"scrollend":B=V1;break;case"wheel":B=gT;break;case"copy":case"cut":case"paste":B=tT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=wy;break;case"toggle":case"beforetoggle":B=mT}var ht=(s&4)!==0,Zt=!ht&&(t==="scroll"||t==="scrollend"),N=ht?U!==null?U+"Capture":null:U;ht=[];for(var L=H,k;L!==null;){var Y=L;if(k=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||k===null||N===null||(Y=kc(L,N),Y!=null&&ht.push(mu(L,Y,k))),Zt)break;L=L.return}0<ht.length&&(U=new B(U,ft,null,a,j),K.push({event:U,listeners:ht}))}}if((s&7)===0){t:{if(U=t==="mouseover"||t==="pointerover",B=t==="mouseout"||t==="pointerout",U&&a!==np&&(ft=a.relatedTarget||a.fromElement)&&(Nr(ft)||ft[Lr]))break t;if((B||U)&&(U=j.window===j?j:(U=j.ownerDocument)?U.defaultView||U.parentWindow:window,B?(ft=a.relatedTarget||a.toElement,B=H,ft=ft?Nr(ft):null,ft!==null&&(Zt=o(ft),ht=ft.tag,ft!==Zt||ht!==5&&ht!==27&&ht!==6)&&(ft=null)):(B=null,ft=H),B!==ft)){if(ht=Ey,Y="onMouseLeave",N="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(ht=wy,Y="onPointerLeave",N="onPointerEnter",L="pointer"),Zt=B==null?U:Nc(B),k=ft==null?U:Nc(ft),U=new ht(Y,L+"leave",B,a,j),U.target=Zt,U.relatedTarget=k,Y=null,Nr(j)===H&&(ht=new ht(N,L+"enter",ft,a,j),ht.target=k,ht.relatedTarget=Zt,Y=ht),Zt=Y,B&&ft)e:{for(ht=B,N=ft,L=0,k=ht;k;k=go(k))L++;for(k=0,Y=N;Y;Y=go(Y))k++;for(;0<L-k;)ht=go(ht),L--;for(;0<k-L;)N=go(N),k--;for(;L--;){if(ht===N||N!==null&&ht===N.alternate)break e;ht=go(ht),N=go(N)}ht=null}else ht=null;B!==null&&gS(K,U,B,ht,!1),ft!==null&&Zt!==null&&gS(K,Zt,ft,ht,!0)}}t:{if(U=H?Nc(H):window,B=U.nodeName&&U.nodeName.toLowerCase(),B==="select"||B==="input"&&U.type==="file")var st=Ny;else if(Oy(U))if(ky)st=xT;else{st=TT;var Rt=ET}else B=U.nodeName,!B||B.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?H&&sp(H.elementType)&&(st=Ny):st=wT;if(st&&(st=st(t,H))){Ly(K,st,a,j);break t}Rt&&Rt(t,U,H),t==="focusout"&&H&&U.type==="number"&&H.memoizedProps.value!=null&&ip(U,"number",U.value)}switch(Rt=H?Nc(H):window,t){case"focusin":(Oy(Rt)||Rt.contentEditable==="true")&&(Gr=Rt,bp=H,qc=null);break;case"focusout":qc=bp=Gr=null;break;case"mousedown":yp=!0;break;case"contextmenu":case"mouseup":case"dragend":yp=!1,qy(K,a,j);break;case"selectionchange":if(MT)break;case"keydown":case"keyup":qy(K,a,j)}var ct;if(fp)t:{switch(t){case"compositionstart":var dt="onCompositionStart";break t;case"compositionend":dt="onCompositionEnd";break t;case"compositionupdate":dt="onCompositionUpdate";break t}dt=void 0}else qr?Ry(t,a)&&(dt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(dt="onCompositionStart");dt&&(xy&&a.locale!=="ko"&&(qr||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&qr&&(ct=Sy()):(ea=j,op="value"in ea?ea.value:ea.textContent,qr=!0)),Rt=bf(H,dt),0<Rt.length&&(dt=new Ty(dt,t,null,a,j),K.push({event:dt,listeners:Rt}),ct?dt.data=ct:(ct=Dy(a),ct!==null&&(dt.data=ct)))),(ct=yT?vT(t,a):AT(t,a))&&(dt=bf(H,"onBeforeInput"),0<dt.length&&(Rt=new Ty("onBeforeInput","beforeinput",null,a,j),K.push({event:Rt,listeners:dt}),Rt.data=ct)),uw(K,t,H,a,j)}dS(K,s)})}function mu(t,s,a){return{instance:t,listener:s,currentTarget:a}}function bf(t,s){for(var a=s+"Capture",r=[];t!==null;){var h=t,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=kc(t,a),h!=null&&r.unshift(mu(t,h,p)),h=kc(t,s),h!=null&&r.push(mu(t,h,p))),t.tag===3)return r;t=t.return}return[]}function go(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function gS(t,s,a,r,h){for(var p=s._reactName,A=[];a!==null&&a!==r;){var T=a,R=T.alternate,H=T.stateNode;if(T=T.tag,R!==null&&R===r)break;T!==5&&T!==26&&T!==27||H===null||(R=H,h?(H=kc(a,p),H!=null&&A.unshift(mu(a,H,R))):h||(H=kc(a,p),H!=null&&A.push(mu(a,H,R)))),a=a.return}A.length!==0&&t.push({event:s,listeners:A})}var gw=/\r\n?/g,pw=/\u0000|\uFFFD/g;function pS(t){return(typeof t=="string"?t:""+t).replace(gw,`
`).replace(pw,"")}function mS(t,s){return s=pS(s),pS(t)===s}function yf(){}function Qt(t,s,a,r,h,p){switch(a){case"children":typeof r=="string"?s==="body"||s==="textarea"&&r===""||Br(t,r):(typeof r=="number"||typeof r=="bigint")&&s!=="body"&&Br(t,""+r);break;case"className":_d(t,"class",r);break;case"tabIndex":_d(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":_d(t,a,r);break;case"style":yy(t,r,p);break;case"data":if(s!=="object"){_d(t,"data",r);break}case"src":case"href":if(r===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(a);break}r=wd(""+r),t.setAttribute(a,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(s!=="input"&&Qt(t,s,"name",h.name,h,null),Qt(t,s,"formEncType",h.formEncType,h,null),Qt(t,s,"formMethod",h.formMethod,h,null),Qt(t,s,"formTarget",h.formTarget,h,null)):(Qt(t,s,"encType",h.encType,h,null),Qt(t,s,"method",h.method,h,null),Qt(t,s,"target",h.target,h,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(a);break}r=wd(""+r),t.setAttribute(a,r);break;case"onClick":r!=null&&(t.onclick=yf);break;case"onScroll":r!=null&&Nt("scroll",t);break;case"onScrollEnd":r!=null&&Nt("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(n(61));if(a=r.__html,a!=null){if(h.children!=null)throw Error(n(60));t.innerHTML=a}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}a=wd(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(a,""+r):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":r===!0?t.setAttribute(a,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(a,r):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(a,r):t.removeAttribute(a);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(a):t.setAttribute(a,r);break;case"popover":Nt("beforetoggle",t),Nt("toggle",t),Sd(t,"popover",r);break;case"xlinkActuate":sn(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":sn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":sn(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":sn(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":sn(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":sn(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":sn(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":sn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":sn(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Sd(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=X1.get(a)||a,Sd(t,a,r))}}function Im(t,s,a,r,h,p){switch(a){case"style":yy(t,r,p);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(n(61));if(a=r.__html,a!=null){if(h.children!=null)throw Error(n(60));t.innerHTML=a}}break;case"children":typeof r=="string"?Br(t,r):(typeof r=="number"||typeof r=="bigint")&&Br(t,""+r);break;case"onScroll":r!=null&&Nt("scroll",t);break;case"onScrollEnd":r!=null&&Nt("scrollend",t);break;case"onClick":r!=null&&(t.onclick=yf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ry.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),p=t[fi]||null,p=p!=null?p[a]:null,typeof p=="function"&&t.removeEventListener(s,p,h),typeof r=="function")){typeof p!="function"&&p!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,r,h);break t}a in t?t[a]=r:r===!0?t.setAttribute(a,""):Sd(t,a,r)}}}function qe(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",t),Nt("load",t);var r=!1,h=!1,p;for(p in a)if(a.hasOwnProperty(p)){var A=a[p];if(A!=null)switch(p){case"src":r=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Qt(t,s,p,A,a,null)}}h&&Qt(t,s,"srcSet",a.srcSet,a,null),r&&Qt(t,s,"src",a.src,a,null);return;case"input":Nt("invalid",t);var T=p=A=h=null,R=null,H=null;for(r in a)if(a.hasOwnProperty(r)){var j=a[r];if(j!=null)switch(r){case"name":h=j;break;case"type":A=j;break;case"checked":R=j;break;case"defaultChecked":H=j;break;case"value":p=j;break;case"defaultValue":T=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(n(137,s));break;default:Qt(t,s,r,j,a,null)}}gy(t,p,T,R,H,A,h,!1),Ed(t);return;case"select":Nt("invalid",t),r=A=p=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":p=T;break;case"defaultValue":A=T;break;case"multiple":r=T;default:Qt(t,s,h,T,a,null)}s=p,a=A,t.multiple=!!r,s!=null?Ur(t,!!r,s,!1):a!=null&&Ur(t,!!r,a,!0);return;case"textarea":Nt("invalid",t),p=h=r=null;for(A in a)if(a.hasOwnProperty(A)&&(T=a[A],T!=null))switch(A){case"value":r=T;break;case"defaultValue":h=T;break;case"children":p=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(n(91));break;default:Qt(t,s,A,T,a,null)}my(t,r,h,p),Ed(t);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(r=a[R],r!=null))switch(R){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:Qt(t,s,R,r,a,null)}return;case"dialog":Nt("beforetoggle",t),Nt("toggle",t),Nt("cancel",t),Nt("close",t);break;case"iframe":case"object":Nt("load",t);break;case"video":case"audio":for(r=0;r<pu.length;r++)Nt(pu[r],t);break;case"image":Nt("error",t),Nt("load",t);break;case"details":Nt("toggle",t);break;case"embed":case"source":case"link":Nt("error",t),Nt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(r=a[H],r!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Qt(t,s,H,r,a,null)}return;default:if(sp(s)){for(j in a)a.hasOwnProperty(j)&&(r=a[j],r!==void 0&&Im(t,s,j,r,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(r=a[T],r!=null&&Qt(t,s,T,r,a,null))}function mw(t,s,a,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,A=null,T=null,R=null,H=null,j=null;for(B in a){var K=a[B];if(a.hasOwnProperty(B)&&K!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":R=K;default:r.hasOwnProperty(B)||Qt(t,s,B,null,r,K)}}for(var U in r){var B=r[U];if(K=a[U],r.hasOwnProperty(U)&&(B!=null||K!=null))switch(U){case"type":p=B;break;case"name":h=B;break;case"checked":H=B;break;case"defaultChecked":j=B;break;case"value":A=B;break;case"defaultValue":T=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(n(137,s));break;default:B!==K&&Qt(t,s,U,B,r,K)}}ep(t,A,T,R,H,j,p,h);return;case"select":B=A=T=U=null;for(p in a)if(R=a[p],a.hasOwnProperty(p)&&R!=null)switch(p){case"value":break;case"multiple":B=R;default:r.hasOwnProperty(p)||Qt(t,s,p,null,r,R)}for(h in r)if(p=r[h],R=a[h],r.hasOwnProperty(h)&&(p!=null||R!=null))switch(h){case"value":U=p;break;case"defaultValue":T=p;break;case"multiple":A=p;default:p!==R&&Qt(t,s,h,p,r,R)}s=T,a=A,r=B,U!=null?Ur(t,!!a,U,!1):!!r!=!!a&&(s!=null?Ur(t,!!a,s,!0):Ur(t,!!a,a?[]:"",!1));return;case"textarea":B=U=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!r.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Qt(t,s,T,null,r,h)}for(A in r)if(h=r[A],p=a[A],r.hasOwnProperty(A)&&(h!=null||p!=null))switch(A){case"value":U=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(n(91));break;default:h!==p&&Qt(t,s,A,h,r,p)}py(t,U,B);return;case"option":for(var ft in a)if(U=a[ft],a.hasOwnProperty(ft)&&U!=null&&!r.hasOwnProperty(ft))switch(ft){case"selected":t.selected=!1;break;default:Qt(t,s,ft,null,r,U)}for(R in r)if(U=r[R],B=a[R],r.hasOwnProperty(R)&&U!==B&&(U!=null||B!=null))switch(R){case"selected":t.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:Qt(t,s,R,U,r,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ht in a)U=a[ht],a.hasOwnProperty(ht)&&U!=null&&!r.hasOwnProperty(ht)&&Qt(t,s,ht,null,r,U);for(H in r)if(U=r[H],B=a[H],r.hasOwnProperty(H)&&U!==B&&(U!=null||B!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(n(137,s));break;default:Qt(t,s,H,U,r,B)}return;default:if(sp(s)){for(var Zt in a)U=a[Zt],a.hasOwnProperty(Zt)&&U!==void 0&&!r.hasOwnProperty(Zt)&&Im(t,s,Zt,void 0,r,U);for(j in r)U=r[j],B=a[j],!r.hasOwnProperty(j)||U===B||U===void 0&&B===void 0||Im(t,s,j,U,r,B);return}}for(var N in a)U=a[N],a.hasOwnProperty(N)&&U!=null&&!r.hasOwnProperty(N)&&Qt(t,s,N,null,r,U);for(K in r)U=r[K],B=a[K],!r.hasOwnProperty(K)||U===B||U==null&&B==null||Qt(t,s,K,U,r,B)}var qm=null,Gm=null;function vf(t){return t.nodeType===9?t:t.ownerDocument}function bS(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yS(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function jm(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Xm=null;function bw(){var t=window.event;return t&&t.type==="popstate"?t===Xm?!1:(Xm=t,!0):(Xm=null,!1)}var vS=typeof setTimeout=="function"?setTimeout:void 0,yw=typeof clearTimeout=="function"?clearTimeout:void 0,AS=typeof Promise=="function"?Promise:void 0,vw=typeof queueMicrotask=="function"?queueMicrotask:typeof AS<"u"?function(t){return AS.resolve(null).then(t).catch(Aw)}:vS;function Aw(t){setTimeout(function(){throw t})}function ba(t){return t==="head"}function SS(t,s){var a=s,r=0,h=0;do{var p=a.nextSibling;if(t.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(0<r&&8>r){a=r;var A=t.ownerDocument;if(a&1&&bu(A.documentElement),a&2&&bu(A.body),a&4)for(a=A.head,bu(a),A=a.firstChild;A;){var T=A.nextSibling,R=A.nodeName;A[Lc]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&A.rel.toLowerCase()==="stylesheet"||a.removeChild(A),A=T}}if(h===0){t.removeChild(p),wu(s);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:r=a.charCodeAt(0)-48;else r=0;a=p}while(a);wu(s)}function Ym(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ym(a),Wg(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Sw(t,s,a,r){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[Lc])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=gs(t.nextSibling),t===null)break}return null}function _w(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=gs(t.nextSibling),t===null))return null;return t}function Vm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Ew(t,s){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")s();else{var r=function(){s(),a.removeEventListener("DOMContentLoaded",r)};a.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function gs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return t}var Km=null;function _S(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return t;s--}else a==="/$"&&s++}t=t.previousSibling}return null}function ES(t,s,a){switch(s=vf(a),t){case"html":if(t=s.documentElement,!t)throw Error(n(452));return t;case"head":if(t=s.head,!t)throw Error(n(453));return t;case"body":if(t=s.body,!t)throw Error(n(454));return t;default:throw Error(n(451))}}function bu(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Wg(t)}var es=new Map,TS=new Set;function Af(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var bn=X.d;X.d={f:Tw,r:ww,D:xw,C:Cw,L:Mw,m:Rw,X:Ow,S:Dw,M:Lw};function Tw(){var t=bn.f(),s=hf();return t||s}function ww(t){var s=kr(t);s!==null&&s.tag===5&&s.type==="form"?jv(s):bn.r(t)}var po=typeof document>"u"?null:document;function wS(t,s,a){var r=po;if(r&&typeof s=="string"&&s){var h=Ki(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),TS.has(h)||(TS.add(h),t={rel:t,crossOrigin:a,href:s},r.querySelector(h)===null&&(s=r.createElement("link"),qe(s,"link",t),Oe(s),r.head.appendChild(s)))}}function xw(t){bn.D(t),wS("dns-prefetch",t,null)}function Cw(t,s){bn.C(t,s),wS("preconnect",t,s)}function Mw(t,s,a){bn.L(t,s,a);var r=po;if(r&&t&&s){var h='link[rel="preload"][as="'+Ki(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Ki(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Ki(a.imageSizes)+'"]')):h+='[href="'+Ki(t)+'"]';var p=h;switch(s){case"style":p=mo(t);break;case"script":p=bo(t)}es.has(p)||(t=m({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),es.set(p,t),r.querySelector(h)!==null||s==="style"&&r.querySelector(yu(p))||s==="script"&&r.querySelector(vu(p))||(s=r.createElement("link"),qe(s,"link",t),Oe(s),r.head.appendChild(s)))}}function Rw(t,s){bn.m(t,s);var a=po;if(a&&t){var r=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Ki(r)+'"][href="'+Ki(t)+'"]',p=h;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=bo(t)}if(!es.has(p)&&(t=m({rel:"modulepreload",href:t},s),es.set(p,t),a.querySelector(h)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(vu(p)))return}r=a.createElement("link"),qe(r,"link",t),Oe(r),a.head.appendChild(r)}}}function Dw(t,s,a){bn.S(t,s,a);var r=po;if(r&&t){var h=Hr(r).hoistableStyles,p=mo(t);s=s||"default";var A=h.get(p);if(!A){var T={loading:0,preload:null};if(A=r.querySelector(yu(p)))T.loading=5;else{t=m({rel:"stylesheet",href:t,"data-precedence":s},a),(a=es.get(p))&&Qm(t,a);var R=A=r.createElement("link");Oe(R),qe(R,"link",t),R._p=new Promise(function(H,j){R.onload=H,R.onerror=j}),R.addEventListener("load",function(){T.loading|=1}),R.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Sf(A,s,r)}A={type:"stylesheet",instance:A,count:1,state:T},h.set(p,A)}}}function Ow(t,s){bn.X(t,s);var a=po;if(a&&t){var r=Hr(a).hoistableScripts,h=bo(t),p=r.get(h);p||(p=a.querySelector(vu(h)),p||(t=m({src:t,async:!0},s),(s=es.get(h))&&Zm(t,s),p=a.createElement("script"),Oe(p),qe(p,"link",t),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},r.set(h,p))}}function Lw(t,s){bn.M(t,s);var a=po;if(a&&t){var r=Hr(a).hoistableScripts,h=bo(t),p=r.get(h);p||(p=a.querySelector(vu(h)),p||(t=m({src:t,async:!0,type:"module"},s),(s=es.get(h))&&Zm(t,s),p=a.createElement("script"),Oe(p),qe(p,"link",t),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},r.set(h,p))}}function xS(t,s,a,r){var h=(h=lt.current)?Af(h):null;if(!h)throw Error(n(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=mo(a.href),a=Hr(h).hoistableStyles,r=a.get(s),r||(r={type:"style",instance:null,count:0,state:null},a.set(s,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=mo(a.href);var p=Hr(h).hoistableStyles,A=p.get(t);if(A||(h=h.ownerDocument||h,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,A),(p=h.querySelector(yu(t)))&&!p._p&&(A.instance=p,A.state.loading=5),es.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},es.set(t,a),p||Nw(h,t,a,A.state))),s&&r===null)throw Error(n(528,""));return A}if(s&&r!==null)throw Error(n(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=bo(a),a=Hr(h).hoistableScripts,r=a.get(s),r||(r={type:"script",instance:null,count:0,state:null},a.set(s,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,t))}}function mo(t){return'href="'+Ki(t)+'"'}function yu(t){return'link[rel="stylesheet"]['+t+"]"}function CS(t){return m({},t,{"data-precedence":t.precedence,precedence:null})}function Nw(t,s,a,r){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?r.loading=1:(s=t.createElement("link"),r.preload=s,s.addEventListener("load",function(){return r.loading|=1}),s.addEventListener("error",function(){return r.loading|=2}),qe(s,"link",a),Oe(s),t.head.appendChild(s))}function bo(t){return'[src="'+Ki(t)+'"]'}function vu(t){return"script[async]"+t}function MS(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var r=t.querySelector('style[data-href~="'+Ki(a.href)+'"]');if(r)return s.instance=r,Oe(r),r;var h=m({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),Oe(r),qe(r,"style",h),Sf(r,a.precedence,t),s.instance=r;case"stylesheet":h=mo(a.href);var p=t.querySelector(yu(h));if(p)return s.state.loading|=4,s.instance=p,Oe(p),p;r=CS(a),(h=es.get(h))&&Qm(r,h),p=(t.ownerDocument||t).createElement("link"),Oe(p);var A=p;return A._p=new Promise(function(T,R){A.onload=T,A.onerror=R}),qe(p,"link",r),s.state.loading|=4,Sf(p,a.precedence,t),s.instance=p;case"script":return p=bo(a.src),(h=t.querySelector(vu(p)))?(s.instance=h,Oe(h),h):(r=a,(h=es.get(p))&&(r=m({},a),Zm(r,h)),t=t.ownerDocument||t,h=t.createElement("script"),Oe(h),qe(h,"link",r),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(r=s.instance,s.state.loading|=4,Sf(r,a.precedence,t));return s.instance}function Sf(t,s,a){for(var r=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=r.length?r[r.length-1]:null,p=h,A=0;A<r.length;A++){var T=r[A];if(T.dataset.precedence===s)p=T;else if(p!==h)break}p?p.parentNode.insertBefore(t,p.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function Qm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Zm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var _f=null;function RS(t,s,a){if(_f===null){var r=new Map,h=_f=new Map;h.set(a,r)}else h=_f,r=h.get(a),r||(r=new Map,h.set(a,r));if(r.has(t))return r;for(r.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var p=a[h];if(!(p[Lc]||p[Qe]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var A=p.getAttribute(s)||"";A=t+A;var T=r.get(A);T?T.push(p):r.set(A,[p])}}return r}function DS(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function kw(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function OS(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Au=null;function Hw(){}function zw(t,s,a){if(Au===null)throw Error(n(475));var r=Au;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=mo(a.href),p=t.querySelector(yu(h));if(p){t=p._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(r.count++,r=Ef.bind(r),t.then(r,r)),s.state.loading|=4,s.instance=p,Oe(p);return}p=t.ownerDocument||t,a=CS(a),(h=es.get(h))&&Qm(a,h),p=p.createElement("link"),Oe(p);var A=p;A._p=new Promise(function(T,R){A.onload=T,A.onerror=R}),qe(p,"link",a),s.instance=p}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(r.count++,s=Ef.bind(r),t.addEventListener("load",s),t.addEventListener("error",s))}}function Fw(){if(Au===null)throw Error(n(475));var t=Au;return t.stylesheets&&t.count===0&&Wm(t,t.stylesheets),0<t.count?function(s){var a=setTimeout(function(){if(t.stylesheets&&Wm(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Ef(){if(this.count--,this.count===0){if(this.stylesheets)Wm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Tf=null;function Wm(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Tf=new Map,s.forEach(Uw,t),Tf=null,Ef.call(t))}function Uw(t,s){if(!(s.state.loading&4)){var a=Tf.get(t);if(a)var r=a.get(null);else{a=new Map,Tf.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var A=h[p];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),r=A)}r&&a.set(null,r)}h=s.instance,A=h.getAttribute("data-precedence"),p=a.get(A)||r,p===r&&a.set(null,h),a.set(A,h),this.count++,r=Ef.bind(this),h.addEventListener("load",r),h.addEventListener("error",r),p?p.parentNode.insertBefore(h,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var Su={$$typeof:F,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function Bw(t,s,a,r,h,p,A,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vg(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vg(0),this.hiddenUpdates=Vg(null),this.identifierPrefix=r,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function LS(t,s,a,r,h,p,A,T,R,H,j,K){return t=new Bw(t,s,a,A,T,R,H,K),s=1,p===!0&&(s|=24),p=Mi(3,null,null,s),t.current=p,p.stateNode=t,s=Lp(),s.refCount++,t.pooledCache=s,s.refCount++,p.memoizedState={element:r,isDehydrated:a,cache:s},zp(p),t}function NS(t){return t?(t=Vr,t):Vr}function kS(t,s,a,r,h,p){h=NS(h),r.context===null?r.context=h:r.pendingContext=h,r=na(s),r.payload={element:a},p=p===void 0?null:p,p!==null&&(r.callback=p),a=aa(t,r,s),a!==null&&(Ni(a,t,s),Wc(a,t,s))}function HS(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function $m(t,s){HS(t,s),(t=t.alternate)&&HS(t,s)}function zS(t){if(t.tag===13){var s=Yr(t,67108864);s!==null&&Ni(s,t,67108864),$m(t,67108864)}}var wf=!0;function Pw(t,s,a,r){var h=P.T;P.T=null;var p=X.p;try{X.p=2,Jm(t,s,a,r)}finally{X.p=p,P.T=h}}function Iw(t,s,a,r){var h=P.T;P.T=null;var p=X.p;try{X.p=8,Jm(t,s,a,r)}finally{X.p=p,P.T=h}}function Jm(t,s,a,r){if(wf){var h=tb(r);if(h===null)Pm(t,s,r,xf,a),US(t,r);else if(Gw(h,t,s,a,r))r.stopPropagation();else if(US(t,r),s&4&&-1<qw.indexOf(t)){for(;h!==null;){var p=kr(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var A=nl(p.pendingLanes);if(A!==0){var T=p;for(T.pendingLanes|=2,T.entangledLanes|=2;A;){var R=1<<31-xi(A);T.entanglements[1]|=R,A&=~R}zs(p),(Gt&6)===0&&(cf=Os()+500,gu(0))}}break;case 13:T=Yr(p,2),T!==null&&Ni(T,p,2),hf(),$m(p,2)}if(p=tb(r),p===null&&Pm(t,s,r,xf,a),p===h)break;h=p}h!==null&&r.stopPropagation()}else Pm(t,s,r,null,a)}}function tb(t){return t=ap(t),eb(t)}var xf=null;function eb(t){if(xf=null,t=Nr(t),t!==null){var s=o(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=u(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return xf=t,null}function FS(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(C1()){case W0:return 2;case $0:return 8;case bd:case M1:return 32;case J0:return 268435456;default:return 32}default:return 32}}var ib=!1,ya=null,va=null,Aa=null,_u=new Map,Eu=new Map,Sa=[],qw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function US(t,s){switch(t){case"focusin":case"focusout":ya=null;break;case"dragenter":case"dragleave":va=null;break;case"mouseover":case"mouseout":Aa=null;break;case"pointerover":case"pointerout":_u.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eu.delete(s.pointerId)}}function Tu(t,s,a,r,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:s,domEventName:a,eventSystemFlags:r,nativeEvent:p,targetContainers:[h]},s!==null&&(s=kr(s),s!==null&&zS(s)),t):(t.eventSystemFlags|=r,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function Gw(t,s,a,r,h){switch(s){case"focusin":return ya=Tu(ya,t,s,a,r,h),!0;case"dragenter":return va=Tu(va,t,s,a,r,h),!0;case"mouseover":return Aa=Tu(Aa,t,s,a,r,h),!0;case"pointerover":var p=h.pointerId;return _u.set(p,Tu(_u.get(p)||null,t,s,a,r,h)),!0;case"gotpointercapture":return p=h.pointerId,Eu.set(p,Tu(Eu.get(p)||null,t,s,a,r,h)),!0}return!1}function BS(t){var s=Nr(t.target);if(s!==null){var a=o(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){t.blockedOn=s,z1(t.priority,function(){if(a.tag===13){var r=Li();r=Kg(r);var h=Yr(a,r);h!==null&&Ni(h,a,r),$m(a,r)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cf(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=tb(t.nativeEvent);if(a===null){a=t.nativeEvent;var r=new a.constructor(a.type,a);np=r,a.target.dispatchEvent(r),np=null}else return s=kr(a),s!==null&&zS(s),t.blockedOn=a,!1;s.shift()}return!0}function PS(t,s,a){Cf(t)&&a.delete(s)}function jw(){ib=!1,ya!==null&&Cf(ya)&&(ya=null),va!==null&&Cf(va)&&(va=null),Aa!==null&&Cf(Aa)&&(Aa=null),_u.forEach(PS),Eu.forEach(PS)}function Mf(t,s){t.blockedOn===s&&(t.blockedOn=null,ib||(ib=!0,b.unstable_scheduleCallback(b.unstable_NormalPriority,jw)))}var Rf=null;function IS(t){Rf!==t&&(Rf=t,b.unstable_scheduleCallback(b.unstable_NormalPriority,function(){Rf===t&&(Rf=null);for(var s=0;s<t.length;s+=3){var a=t[s],r=t[s+1],h=t[s+2];if(typeof r!="function"){if(eb(r||a)===null)continue;break}var p=kr(a);p!==null&&(t.splice(s,3),s-=3,em(p,{pending:!0,data:h,method:a.method,action:r},r,h))}}))}function wu(t){function s(R){return Mf(R,t)}ya!==null&&Mf(ya,t),va!==null&&Mf(va,t),Aa!==null&&Mf(Aa,t),_u.forEach(s),Eu.forEach(s);for(var a=0;a<Sa.length;a++){var r=Sa[a];r.blockedOn===t&&(r.blockedOn=null)}for(;0<Sa.length&&(a=Sa[0],a.blockedOn===null);)BS(a),a.blockedOn===null&&Sa.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(r=0;r<a.length;r+=3){var h=a[r],p=a[r+1],A=h[fi]||null;if(typeof p=="function")A||IS(a);else if(A){var T=null;if(p&&p.hasAttribute("formAction")){if(h=p,A=p[fi]||null)T=A.formAction;else if(eb(h)!==null)continue}else T=A.action;typeof T=="function"?a[r+1]=T:(a.splice(r,3),r-=3),IS(a)}}}function sb(t){this._internalRoot=t}Df.prototype.render=sb.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(n(409));var a=s.current,r=Li();kS(a,r,t,s,null,null)},Df.prototype.unmount=sb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;kS(t.current,2,null,t,null,null),hf(),s[Lr]=null}};function Df(t){this._internalRoot=t}Df.prototype.unstable_scheduleHydration=function(t){if(t){var s=ny();t={blockedOn:null,target:t,priority:s};for(var a=0;a<Sa.length&&s!==0&&s<Sa[a].priority;a++);Sa.splice(a,0,t),a===0&&BS(t)}};var qS=e.version;if(qS!=="19.1.0")throw Error(n(527,qS,"19.1.0"));X.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=f(s),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var Xw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Of=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Of.isDisabled&&Of.supportsFiber)try{Rc=Of.inject(Xw),wi=Of}catch{}}return Cu.createRoot=function(t,s){if(!l(t))throw Error(n(299));var a=!1,r="",h=nA,p=aA,A=lA,T=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(T=s.unstable_transitionCallbacks)),s=LS(t,1,!1,null,null,a,r,h,p,A,T,null),t[Lr]=s.current,Bm(t),new sb(s)},Cu.hydrateRoot=function(t,s,a){if(!l(t))throw Error(n(299));var r=!1,h="",p=nA,A=aA,T=lA,R=null,H=null;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(R=a.unstable_transitionCallbacks),a.formState!==void 0&&(H=a.formState)),s=LS(t,1,!0,s,a??null,r,h,p,A,T,R,H),s.context=NS(null),a=s.current,r=Li(),r=Kg(r),h=na(r),h.callback=null,aa(a,h,r),a=r,s.current.lanes=a,Oc(s,a),zs(s),t[Lr]=s.current,Bm(t),new Df(s)},Cu.version="19.1.0",Cu}var JS;function sx(){if(JS)return rb.exports;JS=1;function b(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b)}catch(e){console.error(e)}}return b(),rb.exports=ix(),rb.exports}var nx=sx();const ax="modulepreload",lx=function(b){return"/Geolocation/"+b},t_={},Lf=function(e,i,n){let l=Promise.resolve();if(i&&i.length>0){let u=function(g){return Promise.all(g.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));l=u(i.map(g=>{if(g=lx(g),g in t_)return;t_[g]=!0;const m=g.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${y}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":ax,m||(v.as="script"),v.crossOrigin="",v.href=g,f&&v.setAttribute("nonce",f),document.head.appendChild(v),m)return new Promise((E,x)=>{v.addEventListener("load",E),v.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return l.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};var Vu={};Vu.d=(b,e)=>{for(var i in e)Vu.o(e,i)&&!Vu.o(b,i)&&Object.defineProperty(b,i,{enumerable:!0,get:e[i]})};Vu.o=(b,e)=>Object.prototype.hasOwnProperty.call(b,e);var vt=globalThis.pdfjsLib={};Vu.d(vt,{AbortException:()=>Dr,AnnotationEditorLayer:()=>C0,AnnotationEditorParamsType:()=>bt,AnnotationEditorType:()=>_t,AnnotationEditorUIManager:()=>wr,AnnotationLayer:()=>nM,AnnotationMode:()=>wa,ColorPicker:()=>bg,DOMSVGFactory:()=>Y0,DrawLayer:()=>O0,FeatureTest:()=>ui,GlobalWorkerOptions:()=>Vn,ImageKind:()=>Uf,InvalidPDFException:()=>__,MissingPDFException:()=>Rr,OPS:()=>ms,OutputScale:()=>Sb,PDFDataRangeTransport:()=>yE,PDFDateString:()=>B0,PDFWorker:()=>Ro,PasswordResponses:()=>ux,PermissionFlag:()=>cx,PixelsPerInch:()=>Ja,RenderingCancelledException:()=>F0,TextLayer:()=>Zu,UnexpectedResponseException:()=>Bg,Util:()=>ot,VerbosityLevel:()=>zg,XfaLayer:()=>AE,build:()=>UC,createValidAbsoluteUrl:()=>gx,fetchData:()=>Ig,getDocument:()=>RC,getFilenameFromUrl:()=>Ex,getPdfFilenameFromUrl:()=>Tx,getXfaPageViewport:()=>wx,isDataScheme:()=>qg,isPdfFile:()=>U0,noContextMenu:()=>hs,normalizeUnicode:()=>Ax,setLayerDimensions:()=>Tr,shadow:()=>zt,version:()=>FC});const ni=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),S_=[1,0,0,1,0,0],bb=[.001,0,0,.001,0,0],rx=1e7,hb=1.35,Gi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},wa={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ox="pdfjs_internal_editor_",_t={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},bt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},cx={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},$e={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Uf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Te={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Mu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},zg={ERRORS:0,WARNINGS:1,INFOS:5},ms={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},ux={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Fg=zg.WARNINGS;function hx(b){Number.isInteger(b)&&(Fg=b)}function dx(){return Fg}function Ug(b){Fg>=zg.INFOS&&console.log(`Info: ${b}`)}function xt(b){Fg>=zg.WARNINGS&&console.log(`Warning: ${b}`)}function ie(b){throw new Error(b)}function Re(b,e){b||ie(e)}function fx(b){switch(b==null?void 0:b.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function gx(b,e=null,i=null){if(!b)return null;try{if(i&&typeof b=="string"){if(i.addDefaultProtocol&&b.startsWith("www.")){const l=b.match(/\./g);(l==null?void 0:l.length)>=2&&(b=`http://${b}`)}if(i.tryConvertEncoding)try{b=vx(b)}catch{}}const n=e?new URL(b,e):new URL(b);if(fx(n))return n}catch{}return null}function zt(b,e,i,n=!1){return Object.defineProperty(b,e,{value:i,enumerable:!n,configurable:!0,writable:!1}),i}const sl=function(){function e(i,n){this.message=i,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class yb extends sl{constructor(e,i){super(e,"PasswordException"),this.code=i}}class vb extends sl{constructor(e,i){super(e,"UnknownErrorException"),this.details=i}}class __ extends sl{constructor(e){super(e,"InvalidPDFException")}}class Rr extends sl{constructor(e){super(e,"MissingPDFException")}}class Bg extends sl{constructor(e,i){super(e,"UnexpectedResponseException"),this.status=i}}class px extends sl{constructor(e){super(e,"FormatError")}}class Dr extends sl{constructor(e){super(e,"AbortException")}}function E_(b){(typeof b!="object"||(b==null?void 0:b.length)===void 0)&&ie("Invalid argument for bytesToString");const e=b.length,i=8192;if(e<i)return String.fromCharCode.apply(null,b);const n=[];for(let l=0;l<e;l+=i){const o=Math.min(l+i,e),u=b.subarray(l,o);n.push(String.fromCharCode.apply(null,u))}return n.join("")}function Pg(b){typeof b!="string"&&ie("Invalid argument for stringToBytes");const e=b.length,i=new Uint8Array(e);for(let n=0;n<e;++n)i[n]=b.charCodeAt(n)&255;return i}function mx(b){return String.fromCharCode(b>>24&255,b>>16&255,b>>8&255,b&255)}function H0(b){const e=Object.create(null);for(const[i,n]of b)e[i]=n;return e}function bx(){const b=new Uint8Array(4);return b[0]=1,new Uint32Array(b.buffer,0,1)[0]===1}function yx(){try{return new Function(""),!0}catch{return!1}}class ui{static get isLittleEndian(){return zt(this,"isLittleEndian",bx())}static get isEvalSupported(){return zt(this,"isEvalSupported",yx())}static get isOffscreenCanvasSupported(){return zt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?zt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):zt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,i;return zt(this,"isCSSRoundSupported",(i=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:i.call(e,"width: round(1.5px, 1px)"))}}const db=Array.from(Array(256).keys(),b=>b.toString(16).padStart(2,"0"));var Qn,Bf,Ab;class ot{static makeHexColor(e,i,n){return`#${db[e]}${db[i]}${db[n]}`}static scaleMinMax(e,i){let n;e[0]?(e[0]<0&&(n=i[0],i[0]=i[2],i[2]=n),i[0]*=e[0],i[2]*=e[0],e[3]<0&&(n=i[1],i[1]=i[3],i[3]=n),i[1]*=e[3],i[3]*=e[3]):(n=i[0],i[0]=i[1],i[1]=n,n=i[2],i[2]=i[3],i[3]=n,e[1]<0&&(n=i[1],i[1]=i[3],i[3]=n),i[1]*=e[1],i[3]*=e[1],e[2]<0&&(n=i[0],i[0]=i[2],i[2]=n),i[0]*=e[2],i[2]*=e[2]),i[0]+=e[4],i[1]+=e[5],i[2]+=e[4],i[3]+=e[5]}static transform(e,i){return[e[0]*i[0]+e[2]*i[1],e[1]*i[0]+e[3]*i[1],e[0]*i[2]+e[2]*i[3],e[1]*i[2]+e[3]*i[3],e[0]*i[4]+e[2]*i[5]+e[4],e[1]*i[4]+e[3]*i[5]+e[5]]}static applyTransform(e,i){const n=e[0]*i[0]+e[1]*i[2]+i[4],l=e[0]*i[1]+e[1]*i[3]+i[5];return[n,l]}static applyInverseTransform(e,i){const n=i[0]*i[3]-i[1]*i[2],l=(e[0]*i[3]-e[1]*i[2]+i[2]*i[5]-i[4]*i[3])/n,o=(-e[0]*i[1]+e[1]*i[0]+i[4]*i[1]-i[5]*i[0])/n;return[l,o]}static getAxialAlignedBoundingBox(e,i){const n=this.applyTransform(e,i),l=this.applyTransform(e.slice(2,4),i),o=this.applyTransform([e[0],e[3]],i),u=this.applyTransform([e[2],e[1]],i);return[Math.min(n[0],l[0],o[0],u[0]),Math.min(n[1],l[1],o[1],u[1]),Math.max(n[0],l[0],o[0],u[0]),Math.max(n[1],l[1],o[1],u[1])]}static inverseTransform(e){const i=e[0]*e[3]-e[1]*e[2];return[e[3]/i,-e[1]/i,-e[2]/i,e[0]/i,(e[2]*e[5]-e[4]*e[3])/i,(e[4]*e[1]-e[5]*e[0])/i]}static singularValueDecompose2dScale(e){const i=[e[0],e[2],e[1],e[3]],n=e[0]*i[0]+e[1]*i[2],l=e[0]*i[1]+e[1]*i[3],o=e[2]*i[0]+e[3]*i[2],u=e[2]*i[1]+e[3]*i[3],d=(n+u)/2,f=Math.sqrt((n+u)**2-4*(n*u-o*l))/2,g=d+f||1,m=d-f||1;return[Math.sqrt(g),Math.sqrt(m)]}static normalizeRect(e){const i=e.slice(0);return e[0]>e[2]&&(i[0]=e[2],i[2]=e[0]),e[1]>e[3]&&(i[1]=e[3],i[3]=e[1]),i}static intersect(e,i){const n=Math.max(Math.min(e[0],e[2]),Math.min(i[0],i[2])),l=Math.min(Math.max(e[0],e[2]),Math.max(i[0],i[2]));if(n>l)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(i[1],i[3])),u=Math.min(Math.max(e[1],e[3]),Math.max(i[1],i[3]));return o>u?null:[n,o,l,u]}static bezierBoundingBox(e,i,n,l,o,u,d,f,g){return g?(g[0]=Math.min(g[0],e,d),g[1]=Math.min(g[1],i,f),g[2]=Math.max(g[2],e,d),g[3]=Math.max(g[3],i,f)):g=[Math.min(e,d),Math.min(i,f),Math.max(e,d),Math.max(i,f)],_(this,Qn,Ab).call(this,e,n,o,d,i,l,u,f,3*(-e+3*(n-o)+d),6*(e-2*n+o),3*(n-e),g),_(this,Qn,Ab).call(this,e,n,o,d,i,l,u,f,3*(-i+3*(l-u)+f),6*(i-2*l+u),3*(l-i),g),g}}Qn=new WeakSet,Bf=function(e,i,n,l,o,u,d,f,g,m){if(g<=0||g>=1)return;const y=1-g,v=g*g,E=v*g,x=y*(y*(y*e+3*g*i)+3*v*n)+E*l,C=y*(y*(y*o+3*g*u)+3*v*d)+E*f;m[0]=Math.min(m[0],x),m[1]=Math.min(m[1],C),m[2]=Math.max(m[2],x),m[3]=Math.max(m[3],C)},Ab=function(e,i,n,l,o,u,d,f,g,m,y,v){if(Math.abs(g)<1e-12){Math.abs(m)>=1e-12&&_(this,Qn,Bf).call(this,e,i,n,l,o,u,d,f,-y/m,v);return}const E=m**2-4*y*g;if(E<0)return;const x=Math.sqrt(E),C=2*g;_(this,Qn,Bf).call(this,e,i,n,l,o,u,d,f,(-m+x)/C,v),_(this,Qn,Bf).call(this,e,i,n,l,o,u,d,f,(-m-x)/C,v)},w(ot,Qn);function vx(b){return decodeURIComponent(escape(b))}let fb=null,e_=null;function Ax(b){return fb||(fb=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,e_=new Map([["","t"]])),b.replaceAll(fb,(e,i,n)=>i?i.normalize("NFKC"):e_.get(n))}function Sx(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const b=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(b);else for(let e=0;e<32;e++)b[e]=Math.floor(Math.random()*255);return E_(b)}const z0="pdfjs_internal_id_",yn={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function _x(b){return Uint8Array.prototype.toBase64?b.toBase64():btoa(E_(b))}const An="http://www.w3.org/2000/svg",xl=class xl{};mt(xl,"CSS",96),mt(xl,"PDF",72),mt(xl,"PDF_TO_CSS_UNITS",xl.CSS/xl.PDF);let Ja=xl;async function Ig(b,e="text"){if(Ou(b,document.baseURI)){const i=await fetch(b);if(!i.ok)throw new Error(i.statusText);switch(e){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,n)=>{const l=new XMLHttpRequest;l.open("GET",b,!0),l.responseType=e,l.onreadystatechange=()=>{if(l.readyState===XMLHttpRequest.DONE){if(l.status===200||l.status===0){switch(e){case"arraybuffer":case"blob":case"json":i(l.response);return}i(l.responseText);return}n(new Error(l.statusText))}},l.send(null)})}class fd{constructor({viewBox:e,scale:i,rotation:n,offsetX:l=0,offsetY:o=0,dontFlip:u=!1}){this.viewBox=e,this.scale=i,this.rotation=n,this.offsetX=l,this.offsetY=o;const d=(e[2]+e[0])/2,f=(e[3]+e[1])/2;let g,m,y,v;switch(n%=360,n<0&&(n+=360),n){case 180:g=-1,m=0,y=0,v=1;break;case 90:g=0,m=1,y=1,v=0;break;case 270:g=0,m=-1,y=-1,v=0;break;case 0:g=1,m=0,y=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(y=-y,v=-v);let E,x,C,O;g===0?(E=Math.abs(f-e[1])*i+l,x=Math.abs(d-e[0])*i+o,C=(e[3]-e[1])*i,O=(e[2]-e[0])*i):(E=Math.abs(d-e[0])*i+l,x=Math.abs(f-e[1])*i+o,C=(e[2]-e[0])*i,O=(e[3]-e[1])*i),this.transform=[g*i,m*i,y*i,v*i,E-g*i*d-y*i*f,x-m*i*d-v*i*f],this.width=C,this.height=O}get rawDims(){const{viewBox:e}=this;return zt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:i=this.rotation,offsetX:n=this.offsetX,offsetY:l=this.offsetY,dontFlip:o=!1}={}){return new fd({viewBox:this.viewBox.slice(),scale:e,rotation:i,offsetX:n,offsetY:l,dontFlip:o})}convertToViewportPoint(e,i){return ot.applyTransform([e,i],this.transform)}convertToViewportRectangle(e){const i=ot.applyTransform([e[0],e[1]],this.transform),n=ot.applyTransform([e[2],e[3]],this.transform);return[i[0],i[1],n[0],n[1]]}convertToPdfPoint(e,i){return ot.applyInverseTransform([e,i],this.transform)}}class F0 extends sl{constructor(e,i=0){super(e,"RenderingCancelledException"),this.extraDelay=i}}function qg(b){const e=b.length;let i=0;for(;i<e&&b[i].trim()==="";)i++;return b.substring(i,i+5).toLowerCase()==="data:"}function U0(b){return typeof b=="string"&&/\.pdf$/i.test(b)}function Ex(b){return[b]=b.split(/[#?]/,1),b.substring(b.lastIndexOf("/")+1)}function Tx(b,e="document.pdf"){if(typeof b!="string")return e;if(qg(b))return xt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,l=i.exec(b);let o=n.exec(l[1])||n.exec(l[2])||n.exec(l[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch{}return o||e}class i_{constructor(){mt(this,"started",Object.create(null));mt(this,"times",[])}time(e){e in this.started&&xt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||xt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let i=0;for(const{name:n}of this.times)i=Math.max(n.length,i);for(const{name:n,start:l,end:o}of this.times)e.push(`${n.padEnd(i)} ${o-l}ms
`);return e.join("")}}function Ou(b,e){try{const{protocol:i}=e?new URL(b,e):new URL(b);return i==="http:"||i==="https:"}catch{return!1}}function hs(b){b.preventDefault()}function s_(b){console.log("Deprecated API usage: "+b)}var $u;class B0{static toDateObject(e){if(!e||typeof e!="string")return null;c(this,$u)||S(this,$u,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const i=c(this,$u).exec(e);if(!i)return null;const n=parseInt(i[1],10);let l=parseInt(i[2],10);l=l>=1&&l<=12?l-1:0;let o=parseInt(i[3],10);o=o>=1&&o<=31?o:1;let u=parseInt(i[4],10);u=u>=0&&u<=23?u:0;let d=parseInt(i[5],10);d=d>=0&&d<=59?d:0;let f=parseInt(i[6],10);f=f>=0&&f<=59?f:0;const g=i[7]||"Z";let m=parseInt(i[8],10);m=m>=0&&m<=23?m:0;let y=parseInt(i[9],10)||0;return y=y>=0&&y<=59?y:0,g==="-"?(u+=m,d+=y):g==="+"&&(u-=m,d-=y),new Date(Date.UTC(n,l,o,u,d,f))}}$u=new WeakMap,w(B0,$u);function wx(b,{scale:e=1,rotation:i=0}){const{width:n,height:l}=b.attributes.style,o=[0,0,parseInt(n),parseInt(l)];return new fd({viewBox:o,scale:e,rotation:i})}function P0(b){if(b.startsWith("#")){const e=parseInt(b.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return b.startsWith("rgb(")?b.slice(4,-1).split(",").map(e=>parseInt(e)):b.startsWith("rgba(")?b.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(xt(`Not a valid color format: "${b}"`),[0,0,0])}function xx(b){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const i of b.keys()){e.style.color=i;const n=window.getComputedStyle(e).color;b.set(i,P0(n))}e.remove()}function ce(b){const{a:e,b:i,c:n,d:l,e:o,f:u}=b.getTransform();return[e,i,n,l,o,u]}function vn(b){const{a:e,b:i,c:n,d:l,e:o,f:u}=b.getTransform().invertSelf();return[e,i,n,l,o,u]}function Tr(b,e,i=!1,n=!0){if(e instanceof fd){const{pageWidth:l,pageHeight:o}=e.rawDims,{style:u}=b,d=ui.isCSSRoundSupported,f=`var(--scale-factor) * ${l}px`,g=`var(--scale-factor) * ${o}px`,m=d?`round(down, ${f}, var(--scale-round-x, 1px))`:`calc(${f})`,y=d?`round(down, ${g}, var(--scale-round-y, 1px))`:`calc(${g})`;!i||e.rotation%180===0?(u.width=m,u.height=y):(u.width=y,u.height=m)}n&&b.setAttribute("data-main-rotation",e.rotation)}class Sb{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var xa,Ml,bs,Rl,Ju,th,vg,T_,hi,w_,x_,Pf,C_,Eb;const Sn=class Sn{constructor(e){w(this,hi);w(this,xa,null);w(this,Ml,null);w(this,bs);w(this,Rl,null);w(this,Ju,null);S(this,bs,e),c(Sn,th)||S(Sn,th,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=S(this,xa,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const i=c(this,bs)._uiManager._signal;e.addEventListener("contextmenu",hs,{signal:i}),e.addEventListener("pointerdown",_(Sn,vg,T_),{signal:i});const n=S(this,Rl,document.createElement("div"));n.className="buttons",e.append(n);const l=c(this,bs).toolbarPosition;if(l){const{style:o}=e,u=c(this,bs)._uiManager.direction==="ltr"?1-l[0]:l[0];o.insetInlineEnd=`${100*u}%`,o.top=`calc(${100*l[1]}% + var(--editor-toolbar-vert-offset))`}return _(this,hi,C_).call(this),e}get div(){return c(this,xa)}hide(){var e;c(this,xa).classList.add("hidden"),(e=c(this,Ml))==null||e.hideDropdown()}show(){var e;c(this,xa).classList.remove("hidden"),(e=c(this,Ju))==null||e.shown()}async addAltText(e){const i=await e.render();_(this,hi,Pf).call(this,i),c(this,Rl).prepend(i,c(this,hi,Eb)),S(this,Ju,e)}addColorPicker(e){S(this,Ml,e);const i=e.renderButton();_(this,hi,Pf).call(this,i),c(this,Rl).prepend(i,c(this,hi,Eb))}remove(){var e;c(this,xa).remove(),(e=c(this,Ml))==null||e.destroy(),S(this,Ml,null)}};xa=new WeakMap,Ml=new WeakMap,bs=new WeakMap,Rl=new WeakMap,Ju=new WeakMap,th=new WeakMap,vg=new WeakSet,T_=function(e){e.stopPropagation()},hi=new WeakSet,w_=function(e){c(this,bs)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},x_=function(e){c(this,bs)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},Pf=function(e){const i=c(this,bs)._uiManager._signal;e.addEventListener("focusin",_(this,hi,w_).bind(this),{capture:!0,signal:i}),e.addEventListener("focusout",_(this,hi,x_).bind(this),{capture:!0,signal:i}),e.addEventListener("contextmenu",hs,{signal:i})},C_=function(){const{editorType:e,_uiManager:i}=c(this,bs),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",c(Sn,th)[e]),_(this,hi,Pf).call(this,n),n.addEventListener("click",l=>{i.delete()},{signal:i._signal}),c(this,Rl).append(n)},Eb=function(){const e=document.createElement("div");return e.className="divider",e},w(Sn,vg),w(Sn,th,null);let _b=Sn;var eh,Dl,Ol,el,M_,R_,D_;class Cx{constructor(e){w(this,el);w(this,eh,null);w(this,Dl,null);w(this,Ol);S(this,Ol,e)}show(e,i,n){const[l,o]=_(this,el,R_).call(this,i,n),{style:u}=c(this,Dl)||S(this,Dl,_(this,el,M_).call(this));e.append(c(this,Dl)),u.insetInlineEnd=`${100*l}%`,u.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,Dl).remove()}}eh=new WeakMap,Dl=new WeakMap,Ol=new WeakMap,el=new WeakSet,M_=function(){const e=S(this,Dl,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",hs,{signal:c(this,Ol)._signal});const i=S(this,eh,document.createElement("div"));return i.className="buttons",e.append(i),_(this,el,D_).call(this),e},R_=function(e,i){let n=0,l=0;for(const o of e){const u=o.y+o.height;if(u<n)continue;const d=o.x+(i?o.width:0);if(u>n){l=d,n=u;continue}i?d>l&&(l=d):d<l&&(l=d)}return[i?1-l:l,n]},D_=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const i=document.createElement("span");e.append(i),i.className="visuallyHidden",i.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=c(this,Ol)._signal;e.addEventListener("contextmenu",hs,{signal:n}),e.addEventListener("click",()=>{c(this,Ol).highlightSelection("floating_button")},{signal:n}),c(this,eh).append(e)};function gg(b,e,i){for(const n of i)e.addEventListener(n,b[n].bind(b))}function Mx(b){return Math.round(Math.min(255,Math.max(1,255*b))).toString(16).padStart(2,"0")}var Ag;class Rx{constructor(){w(this,Ag,0)}get id(){return`${ox}${li(this,Ag)._++}`}}Ag=new WeakMap;var Do,ih,ti,Oo,If;const K0=class K0{constructor(){w(this,Oo);w(this,Do,Sx());w(this,ih,0);w(this,ti,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),l=new Image;l.src=e;const o=l.decode().then(()=>(n.drawImage(l,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return zt(this,"_isSVGFittingCanvas",o)}async getFromFile(e){const{lastModified:i,name:n,size:l,type:o}=e;return _(this,Oo,If).call(this,`${i}_${n}_${l}_${o}`,e)}async getFromUrl(e){return _(this,Oo,If).call(this,e,e)}async getFromBlob(e,i){const n=await i;return _(this,Oo,If).call(this,e,n)}async getFromId(e){c(this,ti)||S(this,ti,new Map);const i=c(this,ti).get(e);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:n}=i;return delete i.blobPromise,this.getFromBlob(i.id,n)}return this.getFromUrl(i.url)}getFromCanvas(e,i){c(this,ti)||S(this,ti,new Map);let n=c(this,ti).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const l=new OffscreenCanvas(i.width,i.height);return l.getContext("2d").drawImage(i,0,0),n={bitmap:l.transferToImageBitmap(),id:`image_${c(this,Do)}_${li(this,ih)._++}`,refCounter:1,isSvg:!1},c(this,ti).set(e,n),c(this,ti).set(n.id,n),n}getSvgUrl(e){const i=c(this,ti).get(e);return i!=null&&i.isSvg?i.svgUrl:null}deleteId(e){var l;c(this,ti)||S(this,ti,new Map);const i=c(this,ti).get(e);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:n}=i;if(!i.url&&!i.file){const o=new OffscreenCanvas(n.width,n.height);o.getContext("bitmaprenderer").transferFromImageBitmap(n),i.blobPromise=o.convertToBlob()}(l=n.close)==null||l.call(n),i.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,Do)}_`)}};Do=new WeakMap,ih=new WeakMap,ti=new WeakMap,Oo=new WeakSet,If=async function(e,i){c(this,ti)||S(this,ti,new Map);let n=c(this,ti).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${c(this,Do)}_${li(this,ih)._++}`,refCounter:0,isSvg:!1});let l;if(typeof i=="string"?(n.url=i,l=await Ig(i,"blob")):i instanceof File?l=n.file=i:i instanceof Blob&&(l=i),l.type==="image/svg+xml"){const o=K0._isSVGFittingCanvas,u=new FileReader,d=new Image,f=new Promise((g,m)=>{d.onload=()=>{n.bitmap=d,n.isSvg=!0,g()},u.onload=async()=>{const y=n.svgUrl=u.result;d.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},d.onerror=u.onerror=m});u.readAsDataURL(l),await f}else n.bitmap=await createImageBitmap(l);n.refCounter=1}catch(l){console.error(l),n=null}return c(this,ti).set(e,n),n&&c(this,ti).set(n.id,n),n};let Tb=K0;var He,Ca,sh,ze;class Dx{constructor(e=128){w(this,He,[]);w(this,Ca,!1);w(this,sh);w(this,ze,-1);S(this,sh,e)}add({cmd:e,undo:i,post:n,mustExec:l,type:o=NaN,overwriteIfSameType:u=!1,keepUndo:d=!1}){if(l&&e(),c(this,Ca))return;const f={cmd:e,undo:i,post:n,type:o};if(c(this,ze)===-1){c(this,He).length>0&&(c(this,He).length=0),S(this,ze,0),c(this,He).push(f);return}if(u&&c(this,He)[c(this,ze)].type===o){d&&(f.undo=c(this,He)[c(this,ze)].undo),c(this,He)[c(this,ze)]=f;return}const g=c(this,ze)+1;g===c(this,sh)?c(this,He).splice(0,1):(S(this,ze,g),g<c(this,He).length&&c(this,He).splice(g)),c(this,He).push(f)}undo(){if(c(this,ze)===-1)return;S(this,Ca,!0);const{undo:e,post:i}=c(this,He)[c(this,ze)];e(),i==null||i(),S(this,Ca,!1),S(this,ze,c(this,ze)-1)}redo(){if(c(this,ze)<c(this,He).length-1){S(this,ze,c(this,ze)+1),S(this,Ca,!0);const{cmd:e,post:i}=c(this,He)[c(this,ze)];e(),i==null||i(),S(this,Ca,!1)}}hasSomethingToUndo(){return c(this,ze)!==-1}hasSomethingToRedo(){return c(this,ze)<c(this,He).length-1}destroy(){S(this,He,null)}}He=new WeakMap,Ca=new WeakMap,sh=new WeakMap,ze=new WeakMap;var Sg,O_;class gd{constructor(e){w(this,Sg);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=ui.platform;for(const[n,l,o={}]of e)for(const u of n){const d=u.startsWith("mac+");i&&d?(this.callbacks.set(u.slice(4),{callback:l,options:o}),this.allKeys.add(u.split("+").at(-1))):!i&&!d&&(this.callbacks.set(u,{callback:l,options:o}),this.allKeys.add(u.split("+").at(-1)))}}exec(e,i){if(!this.allKeys.has(i.key))return;const n=this.callbacks.get(_(this,Sg,O_).call(this,i));if(!n)return;const{callback:l,options:{bubbles:o=!1,args:u=[],checker:d=null}}=n;d&&!d(e,i)||(l.bind(e,...u,i)(),o||(i.stopPropagation(),i.preventDefault()))}}Sg=new WeakSet,O_=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const i=this.buffer.join("+");return this.buffer.length=0,i};const _g=class _g{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return xx(e),zt(this,"_colors",e)}convert(e){const i=P0(e);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[n,l]of this._colors)if(l.every((o,u)=>o===i[u]))return _g._colorsMapping.get(n);return i}getHexCode(e){const i=this._colors.get(e);return i?ot.makeHexColor(...i):e}};mt(_g,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let wb=_g;var Lo,Hi,xe,Xe,No,En,ko,ys,Ma,Ho,Ll,Us,vs,Nl,nh,ah,zo,lh,Bs,Ra,Fo,Da,Ps,Eg,Oa,rh,La,kl,oh,ch,Fe,Xt,Tn,Hl,uh,hh,Na,Is,wn,dh,ss,et,qf,xb,L_,N_,Gf,k_,H_,z_,Cb,F_,Mb,Rb,U_,ri,Ea,B_,P_,Db,I_,Lu,Ob;const Co=class Co{constructor(e,i,n,l,o,u,d,f,g,m,y){w(this,et);w(this,Lo,new AbortController);w(this,Hi,null);w(this,xe,new Map);w(this,Xe,new Map);w(this,No,null);w(this,En,null);w(this,ko,null);w(this,ys,new Dx);w(this,Ma,null);w(this,Ho,0);w(this,Ll,new Set);w(this,Us,null);w(this,vs,null);w(this,Nl,new Set);w(this,nh,!1);w(this,ah,!1);w(this,zo,!1);w(this,lh,null);w(this,Bs,null);w(this,Ra,null);w(this,Fo,null);w(this,Da,!1);w(this,Ps,null);w(this,Eg,new Rx);w(this,Oa,!1);w(this,rh,!1);w(this,La,null);w(this,kl,null);w(this,oh,null);w(this,ch,null);w(this,Fe,_t.NONE);w(this,Xt,new Set);w(this,Tn,null);w(this,Hl,null);w(this,uh,null);w(this,hh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});w(this,Na,[0,0]);w(this,Is,null);w(this,wn,null);w(this,dh,null);w(this,ss,null);const v=this._signal=c(this,Lo).signal;S(this,wn,e),S(this,dh,i),S(this,No,n),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:v}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),l._on("setpreference",this.onSetPreference.bind(this),{signal:v}),l._on("switchannotationeditorparams",E=>this.updateParams(E.type,E.value),{signal:v}),_(this,et,k_).call(this),_(this,et,U_).call(this),_(this,et,Cb).call(this),S(this,En,o.annotationStorage),S(this,lh,o.filterFactory),S(this,Hl,u),S(this,Fo,d||null),S(this,nh,f),S(this,ah,g),S(this,zo,m),S(this,ch,y||null),this.viewParameters={realScale:Ja.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=Co.prototype,i=u=>c(u,wn).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),n=(u,{target:d})=>{if(d instanceof HTMLInputElement){const{type:f}=d;return f!=="text"&&f!=="number"}return!0},l=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return zt(this,"_keyboardManager",new gd([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(u,{target:d})=>!(d instanceof HTMLButtonElement)&&c(u,wn).contains(d)&&!u.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(u,{target:d})=>!(d instanceof HTMLButtonElement)&&c(u,wn).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-l,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[l,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-l],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,l],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:i}]]))}destroy(){var e,i,n,l;(e=c(this,ss))==null||e.resolve(),S(this,ss,null),(i=c(this,Lo))==null||i.abort(),S(this,Lo,null),this._signal=null;for(const o of c(this,Xe).values())o.destroy();c(this,Xe).clear(),c(this,xe).clear(),c(this,Nl).clear(),S(this,Hi,null),c(this,Xt).clear(),c(this,ys).destroy(),(n=c(this,No))==null||n.destroy(),(l=c(this,Ps))==null||l.hide(),S(this,Ps,null),c(this,Bs)&&(clearTimeout(c(this,Bs)),S(this,Bs,null)),c(this,Is)&&(clearTimeout(c(this,Is)),S(this,Is,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,ch)}get useNewAltTextFlow(){return c(this,ah)}get useNewAltTextWhenAddingImage(){return c(this,zo)}get hcmFilter(){return zt(this,"hcmFilter",c(this,Hl)?c(this,lh).addHCMFilter(c(this,Hl).foreground,c(this,Hl).background):"none")}get direction(){return zt(this,"direction",getComputedStyle(c(this,wn)).direction)}get highlightColors(){return zt(this,"highlightColors",c(this,Fo)?new Map(c(this,Fo).split(",").map(e=>e.split("=").map(i=>i.trim()))):null)}get highlightColorNames(){return zt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){S(this,oh,e)}editAltText(e,i=!1){var n;(n=c(this,No))==null||n.editAltText(this,e,i)}switchToMode(e,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,i){this._eventBus.dispatch("setpreference",{source:this,name:e,value:i})}onSetPreference({name:e,value:i}){switch(e){case"enableNewAltTextWhenAddingImage":S(this,zo,i);break}}onPageChanging({pageNumber:e}){S(this,Ho,e-1)}focusMainContainer(){c(this,wn).focus()}findParent(e,i){for(const n of c(this,Xe).values()){const{x:l,y:o,width:u,height:d}=n.div.getBoundingClientRect();if(e>=l&&e<=l+u&&i>=o&&i<=o+d)return n}return null}disableUserSelect(e=!1){c(this,dh).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,Nl).add(e)}removeShouldRescale(e){c(this,Nl).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Ja.PDF_TO_CSS_UNITS;for(const i of c(this,Nl))i.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:n,anchorOffset:l,focusNode:o,focusOffset:u}=i,d=i.toString(),g=_(this,et,qf).call(this,i).closest(".textLayer"),m=this.getSelectionBoxes(g);if(!m)return;i.empty();const y=_(this,et,xb).call(this,g),v=c(this,Fe)===_t.NONE,E=()=>{y==null||y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:m,anchorNode:n,anchorOffset:l,focusNode:o,focusOffset:u,text:d}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(_t.HIGHLIGHT,E);return}E()}addToAnnotationStorage(e){!e.isEmpty()&&c(this,En)&&!c(this,En).has(e.id)&&c(this,En).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,c(this,Da)&&(S(this,Da,!1),_(this,et,Gf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const i of c(this,Xt))if(i.div.contains(e)){S(this,kl,[i,e]),i._focusEventsAllowed=!1;break}}focus(){if(!c(this,kl))return;const[e,i]=c(this,kl);S(this,kl,null),i.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}addEditListeners(){_(this,et,Cb).call(this),_(this,et,Mb).call(this)}removeEditListeners(){_(this,et,F_).call(this),_(this,et,Rb).call(this)}dragOver(e){for(const{type:i}of e.dataTransfer.items)for(const n of c(this,vs))if(n.isHandlingMimeForPasting(i)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const i of e.dataTransfer.items)for(const n of c(this,vs))if(n.isHandlingMimeForPasting(i.type)){n.paste(i,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=c(this,Hi))==null||n.commitOrRemove(),!this.hasSelection)return;const i=[];for(const l of c(this,Xt)){const o=l.serialize(!0);o&&i.push(o)}i.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:i}=e;for(const o of i.items)for(const u of c(this,vs))if(u.isHandlingMimeForPasting(o.type)){u.paste(o,this.currentLayer);return}let n=i.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){xt(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const l=this.currentLayer;try{const o=[];for(const f of n){const g=await l.deserialize(f);if(!g)return;o.push(g)}const u=()=>{for(const f of o)_(this,et,Db).call(this,f);_(this,et,Ob).call(this,o)},d=()=>{for(const f of o)f.remove()};this.addCommands({cmd:u,undo:d,mustExec:!0})}catch(o){xt(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,Fe)!==_t.NONE&&!this.isEditorHandlingKeyboard&&Co._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,Da)&&(S(this,Da,!1),_(this,et,Gf).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(_(this,et,H_).call(this),_(this,et,Mb).call(this),_(this,et,ri).call(this,{isEditing:c(this,Fe)!==_t.NONE,isEmpty:_(this,et,Lu).call(this),hasSomethingToUndo:c(this,ys).hasSomethingToUndo(),hasSomethingToRedo:c(this,ys).hasSomethingToRedo(),hasSelectedEditor:!1})):(_(this,et,z_).call(this),_(this,et,Rb).call(this),_(this,et,ri).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,vs)){S(this,vs,e);for(const i of c(this,vs))_(this,et,Ea).call(this,i.defaultPropertiesToUpdate)}}getId(){return c(this,Eg).id}get currentLayer(){return c(this,Xe).get(c(this,Ho))}getLayer(e){return c(this,Xe).get(e)}get currentPageIndex(){return c(this,Ho)}addLayer(e){c(this,Xe).set(e.pageIndex,e),c(this,Oa)?e.enable():e.disable()}removeLayer(e){c(this,Xe).delete(e.pageIndex)}async updateMode(e,i=null,n=!1){if(c(this,Fe)!==e&&!(c(this,ss)&&(await c(this,ss).promise,!c(this,ss)))){if(S(this,ss,Promise.withResolvers()),S(this,Fe,e),e===_t.NONE){this.setEditingState(!1),_(this,et,P_).call(this),c(this,ss).resolve();return}this.setEditingState(!0),await _(this,et,B_).call(this),this.unselectAll();for(const l of c(this,Xe).values())l.updateMode(e);if(!i){n&&this.addNewEditorFromKeyboard(),c(this,ss).resolve();return}for(const l of c(this,xe).values())l.annotationElementId===i?(this.setSelected(l),l.enterInEditMode()):l.unselect();c(this,ss).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==c(this,Fe)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,i){var n;if(c(this,vs)){switch(e){case bt.CREATE:this.currentLayer.addNewEditor();return;case bt.HIGHLIGHT_DEFAULT_COLOR:(n=c(this,oh))==null||n.updateColor(i);break;case bt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,uh)||S(this,uh,new Map)).set(e,i),this.showAllEditors("highlight",i);break}for(const l of c(this,Xt))l.updateParams(e,i);for(const l of c(this,vs))l.updateDefaultParams(e,i)}}showAllEditors(e,i,n=!1){var o;for(const u of c(this,xe).values())u.editorType===e&&u.show(i);(((o=c(this,uh))==null?void 0:o.get(bt.HIGHLIGHT_SHOW_ALL))??!0)!==i&&_(this,et,Ea).call(this,[[bt.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(e=!1){if(c(this,rh)!==e){S(this,rh,e);for(const i of c(this,Xe).values())e?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",e)}}getEditors(e){const i=[];for(const n of c(this,xe).values())n.pageIndex===e&&i.push(n);return i}getEditor(e){return c(this,xe).get(e)}addEditor(e){c(this,xe).set(e.id,e)}removeEditor(e){var i;e.div.contains(document.activeElement)&&(c(this,Bs)&&clearTimeout(c(this,Bs)),S(this,Bs,setTimeout(()=>{this.focusMainContainer(),S(this,Bs,null)},0))),c(this,xe).delete(e.id),this.unselect(e),(!e.annotationElementId||!c(this,Ll).has(e.annotationElementId))&&((i=c(this,En))==null||i.remove(e.id))}addDeletedAnnotationElement(e){c(this,Ll).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,Ll).has(e)}removeDeletedAnnotationElement(e){c(this,Ll).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,Hi)!==e&&(S(this,Hi,e),e&&_(this,et,Ea).call(this,e.propertiesToUpdate))}updateUI(e){c(this,et,I_)===e&&_(this,et,Ea).call(this,e.propertiesToUpdate)}toggleSelected(e){if(c(this,Xt).has(e)){c(this,Xt).delete(e),e.unselect(),_(this,et,ri).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,Xt).add(e),e.select(),_(this,et,Ea).call(this,e.propertiesToUpdate),_(this,et,ri).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const i of c(this,Xt))i!==e&&i.unselect();c(this,Xt).clear(),c(this,Xt).add(e),e.select(),_(this,et,Ea).call(this,e.propertiesToUpdate),_(this,et,ri).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,Xt).has(e)}get firstSelectedEditor(){return c(this,Xt).values().next().value}unselect(e){e.unselect(),c(this,Xt).delete(e),_(this,et,ri).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,Xt).size!==0}get isEnterHandled(){return c(this,Xt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){c(this,ys).undo(),_(this,et,ri).call(this,{hasSomethingToUndo:c(this,ys).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_(this,et,Lu).call(this)})}redo(){c(this,ys).redo(),_(this,et,ri).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,ys).hasSomethingToRedo(),isEmpty:_(this,et,Lu).call(this)})}addCommands(e){c(this,ys).add(e),_(this,et,ri).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_(this,et,Lu).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...c(this,Xt)],i=()=>{for(const l of e)l.remove()},n=()=>{for(const l of e)_(this,et,Db).call(this,l)};this.addCommands({cmd:i,undo:n,mustExec:!0})}commitOrRemove(){var e;(e=c(this,Hi))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,Hi)||this.hasSelection}selectAll(){for(const e of c(this,Xt))e.commit();_(this,et,Ob).call(this,c(this,xe).values())}unselectAll(){if(!(c(this,Hi)&&(c(this,Hi).commitOrRemove(),c(this,Fe)!==_t.NONE))&&this.hasSelection){for(const e of c(this,Xt))e.unselect();c(this,Xt).clear(),_(this,et,ri).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,i,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;c(this,Na)[0]+=e,c(this,Na)[1]+=i;const[l,o]=c(this,Na),u=[...c(this,Xt)],d=1e3;c(this,Is)&&clearTimeout(c(this,Is)),S(this,Is,setTimeout(()=>{S(this,Is,null),c(this,Na)[0]=c(this,Na)[1]=0,this.addCommands({cmd:()=>{for(const f of u)c(this,xe).has(f.id)&&f.translateInPage(l,o)},undo:()=>{for(const f of u)c(this,xe).has(f.id)&&f.translateInPage(-l,-o)},mustExec:!1})},d));for(const f of u)f.translateInPage(e,i)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),S(this,Us,new Map);for(const e of c(this,Xt))c(this,Us).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,Us))return!1;this.disableUserSelect(!1);const e=c(this,Us);S(this,Us,null);let i=!1;for(const[{x:l,y:o,pageIndex:u},d]of e)d.newX=l,d.newY=o,d.newPageIndex=u,i||(i=l!==d.savedX||o!==d.savedY||u!==d.savedPageIndex);if(!i)return!1;const n=(l,o,u,d)=>{if(c(this,xe).has(l.id)){const f=c(this,Xe).get(d);f?l._setParentAndPosition(f,o,u):(l.pageIndex=d,l.x=o,l.y=u)}};return this.addCommands({cmd:()=>{for(const[l,{newX:o,newY:u,newPageIndex:d}]of e)n(l,o,u,d)},undo:()=>{for(const[l,{savedX:o,savedY:u,savedPageIndex:d}]of e)n(l,o,u,d)},mustExec:!0}),!0}dragSelectedEditors(e,i){if(c(this,Us))for(const n of c(this,Us).keys())n.drag(e,i)}rebuild(e){if(e.parent===null){const i=this.getLayer(e.pageIndex);i?(i.changeParent(e),i.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,Xt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,Hi)===e}getActive(){return c(this,Hi)}getMode(){return c(this,Fe)}get imageManager(){return zt(this,"imageManager",new Tb)}getSelectionBoxes(e){if(!e)return null;const i=document.getSelection();for(let g=0,m=i.rangeCount;g<m;g++)if(!e.contains(i.getRangeAt(g).commonAncestorContainer))return null;const{x:n,y:l,width:o,height:u}=e.getBoundingClientRect();let d;switch(e.getAttribute("data-main-rotation")){case"90":d=(g,m,y,v)=>({x:(m-l)/u,y:1-(g+y-n)/o,width:v/u,height:y/o});break;case"180":d=(g,m,y,v)=>({x:1-(g+y-n)/o,y:1-(m+v-l)/u,width:y/o,height:v/u});break;case"270":d=(g,m,y,v)=>({x:1-(m+v-l)/u,y:(g-n)/o,width:v/u,height:y/o});break;default:d=(g,m,y,v)=>({x:(g-n)/o,y:(m-l)/u,width:y/o,height:v/u});break}const f=[];for(let g=0,m=i.rangeCount;g<m;g++){const y=i.getRangeAt(g);if(!y.collapsed)for(const{x:v,y:E,width:x,height:C}of y.getClientRects())x===0||C===0||f.push(d(v,E,x,C))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:e,id:i}){(c(this,ko)||S(this,ko,new Map)).set(e,i)}removeChangedExistingAnnotation({annotationElementId:e}){var i;(i=c(this,ko))==null||i.delete(e)}renderAnnotationElement(e){var l;const i=(l=c(this,ko))==null?void 0:l.get(e.data.id);if(!i)return;const n=c(this,En).getRawValue(i);n&&(c(this,Fe)===_t.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};Lo=new WeakMap,Hi=new WeakMap,xe=new WeakMap,Xe=new WeakMap,No=new WeakMap,En=new WeakMap,ko=new WeakMap,ys=new WeakMap,Ma=new WeakMap,Ho=new WeakMap,Ll=new WeakMap,Us=new WeakMap,vs=new WeakMap,Nl=new WeakMap,nh=new WeakMap,ah=new WeakMap,zo=new WeakMap,lh=new WeakMap,Bs=new WeakMap,Ra=new WeakMap,Fo=new WeakMap,Da=new WeakMap,Ps=new WeakMap,Eg=new WeakMap,Oa=new WeakMap,rh=new WeakMap,La=new WeakMap,kl=new WeakMap,oh=new WeakMap,ch=new WeakMap,Fe=new WeakMap,Xt=new WeakMap,Tn=new WeakMap,Hl=new WeakMap,uh=new WeakMap,hh=new WeakMap,Na=new WeakMap,Is=new WeakMap,wn=new WeakMap,dh=new WeakMap,ss=new WeakMap,et=new WeakSet,qf=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},xb=function(e){const{currentLayer:i}=this;if(i.hasTextLayer(e))return i;for(const n of c(this,Xe).values())if(n.hasTextLayer(e))return n;return null},L_=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=_(this,et,qf).call(this,e).closest(".textLayer"),l=this.getSelectionBoxes(n);l&&(c(this,Ps)||S(this,Ps,new Cx(this)),c(this,Ps).show(n,l,this.direction==="ltr"))},N_=function(){var o,u,d;const e=document.getSelection();if(!e||e.isCollapsed){c(this,Tn)&&((o=c(this,Ps))==null||o.hide(),S(this,Tn,null),_(this,et,ri).call(this,{hasSelectedText:!1}));return}const{anchorNode:i}=e;if(i===c(this,Tn))return;const l=_(this,et,qf).call(this,e).closest(".textLayer");if(!l){c(this,Tn)&&((u=c(this,Ps))==null||u.hide(),S(this,Tn,null),_(this,et,ri).call(this,{hasSelectedText:!1}));return}if((d=c(this,Ps))==null||d.hide(),S(this,Tn,i),_(this,et,ri).call(this,{hasSelectedText:!0}),!(c(this,Fe)!==_t.HIGHLIGHT&&c(this,Fe)!==_t.NONE)&&(c(this,Fe)===_t.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),S(this,Da,this.isShiftKeyDown),!this.isShiftKeyDown)){const f=c(this,Fe)===_t.HIGHLIGHT?_(this,et,xb).call(this,l):null;f==null||f.toggleDrawing();const g=new AbortController,m=this.combinedSignal(g),y=v=>{v.type==="pointerup"&&v.button!==0||(g.abort(),f==null||f.toggleDrawing(!0),v.type==="pointerup"&&_(this,et,Gf).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("blur",y,{signal:m})}},Gf=function(e=""){c(this,Fe)===_t.HIGHLIGHT?this.highlightSelection(e):c(this,nh)&&_(this,et,L_).call(this)},k_=function(){document.addEventListener("selectionchange",_(this,et,N_).bind(this),{signal:this._signal})},H_=function(){if(c(this,Ra))return;S(this,Ra,new AbortController);const e=this.combinedSignal(c(this,Ra));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},z_=function(){var e;(e=c(this,Ra))==null||e.abort(),S(this,Ra,null)},Cb=function(){if(c(this,La))return;S(this,La,new AbortController);const e=this.combinedSignal(c(this,La));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},F_=function(){var e;(e=c(this,La))==null||e.abort(),S(this,La,null)},Mb=function(){if(c(this,Ma))return;S(this,Ma,new AbortController);const e=this.combinedSignal(c(this,Ma));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Rb=function(){var e;(e=c(this,Ma))==null||e.abort(),S(this,Ma,null)},U_=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},ri=function(e){Object.entries(e).some(([n,l])=>c(this,hh)[n]!==l)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,hh),e)}),c(this,Fe)===_t.HIGHLIGHT&&e.hasSelectedEditor===!1&&_(this,et,Ea).call(this,[[bt.HIGHLIGHT_FREE,!0]]))},Ea=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},B_=async function(){if(!c(this,Oa)){S(this,Oa,!0);const e=[];for(const i of c(this,Xe).values())e.push(i.enable());await Promise.all(e);for(const i of c(this,xe).values())i.enable()}},P_=function(){if(this.unselectAll(),c(this,Oa)){S(this,Oa,!1);for(const e of c(this,Xe).values())e.disable();for(const e of c(this,xe).values())e.disable()}},Db=function(e){const i=c(this,Xe).get(e.pageIndex);i?i.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},I_=function(){let e=null;for(e of c(this,Xt));return e},Lu=function(){if(c(this,xe).size===0)return!0;if(c(this,xe).size===1)for(const e of c(this,xe).values())return e.isEmpty();return!1},Ob=function(e){for(const i of c(this,Xt))i.unselect();c(this,Xt).clear();for(const i of e)i.isEmpty()||(c(this,Xt).add(i),i.select());_(this,et,ri).call(this,{hasSelectedEditor:this.hasSelection})},mt(Co,"TRANSLATE_SMALL",1),mt(Co,"TRANSLATE_BIG",10);let wr=Co;var Ue,qs,As,Uo,Gs,zi,Bo,js,Ai,xn,zl,Xs,ka,Ds,Nu,jf;const oi=class oi{constructor(e){w(this,Ds);w(this,Ue,null);w(this,qs,!1);w(this,As,null);w(this,Uo,null);w(this,Gs,null);w(this,zi,null);w(this,Bo,!1);w(this,js,null);w(this,Ai,null);w(this,xn,null);w(this,zl,null);w(this,Xs,!1);S(this,Ai,e),S(this,Xs,e._uiManager.useNewAltTextFlow),c(oi,ka)||S(oi,ka,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){oi._l10n??(oi._l10n=e)}async render(){const e=S(this,As,document.createElement("button"));e.className="altText",e.tabIndex="0";const i=S(this,Uo,document.createElement("span"));e.append(i),c(this,Xs)?(e.classList.add("new"),e.setAttribute("data-l10n-id",c(oi,ka).missing),i.setAttribute("data-l10n-id",c(oi,ka)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(this,Ai)._uiManager._signal;e.addEventListener("contextmenu",hs,{signal:n}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const l=o=>{o.preventDefault(),c(this,Ai)._uiManager.editAltText(c(this,Ai)),c(this,Xs)&&c(this,Ai)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Ds,Nu)}})};return e.addEventListener("click",l,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(S(this,Bo,!0),l(o))},{signal:n}),await _(this,Ds,jf).call(this),e}finish(){c(this,As)&&(c(this,As).focus({focusVisible:c(this,Bo)}),S(this,Bo,!1))}isEmpty(){return c(this,Xs)?c(this,Ue)===null:!c(this,Ue)&&!c(this,qs)}hasData(){return c(this,Xs)?c(this,Ue)!==null||!!c(this,xn):this.isEmpty()}get guessedText(){return c(this,xn)}async setGuessedText(e){c(this,Ue)===null&&(S(this,xn,e),S(this,zl,await oi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),_(this,Ds,jf).call(this))}toggleAltTextBadge(e=!1){var i;if(!c(this,Xs)||c(this,Ue)){(i=c(this,js))==null||i.remove(),S(this,js,null);return}if(!c(this,js)){const n=S(this,js,document.createElement("div"));n.className="noAltTextBadge",c(this,Ai).div.append(n)}c(this,js).classList.toggle("hidden",!e)}serialize(e){let i=c(this,Ue);return!e&&c(this,xn)===i&&(i=c(this,zl)),{altText:i,decorative:c(this,qs),guessedText:c(this,xn),textWithDisclaimer:c(this,zl)}}get data(){return{altText:c(this,Ue),decorative:c(this,qs)}}set data({altText:e,decorative:i,guessedText:n,textWithDisclaimer:l,cancel:o=!1}){n&&(S(this,xn,n),S(this,zl,l)),!(c(this,Ue)===e&&c(this,qs)===i)&&(o||(S(this,Ue,e),S(this,qs,i)),_(this,Ds,jf).call(this))}toggle(e=!1){c(this,As)&&(!e&&c(this,zi)&&(clearTimeout(c(this,zi)),S(this,zi,null)),c(this,As).disabled=!e)}shown(){c(this,Ai)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Ds,Nu)}})}destroy(){var e,i;(e=c(this,As))==null||e.remove(),S(this,As,null),S(this,Uo,null),S(this,Gs,null),(i=c(this,js))==null||i.remove(),S(this,js,null)}};Ue=new WeakMap,qs=new WeakMap,As=new WeakMap,Uo=new WeakMap,Gs=new WeakMap,zi=new WeakMap,Bo=new WeakMap,js=new WeakMap,Ai=new WeakMap,xn=new WeakMap,zl=new WeakMap,Xs=new WeakMap,ka=new WeakMap,Ds=new WeakSet,Nu=function(){return c(this,Ue)&&"added"||c(this,Ue)===null&&this.guessedText&&"review"||"missing"},jf=async function(){var l,o,u;const e=c(this,As);if(!e)return;if(c(this,Xs)){if(e.classList.toggle("done",!!c(this,Ue)),e.setAttribute("data-l10n-id",c(oi,ka)[c(this,Ds,Nu)]),(l=c(this,Uo))==null||l.setAttribute("data-l10n-id",c(oi,ka)[`${c(this,Ds,Nu)}-label`]),!c(this,Ue)){(o=c(this,Gs))==null||o.remove();return}}else{if(!c(this,Ue)&&!c(this,qs)){e.classList.remove("done"),(u=c(this,Gs))==null||u.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=c(this,Gs);if(!i){S(this,Gs,i=document.createElement("span")),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${c(this,Ai).id}`;const d=100,f=c(this,Ai)._uiManager._signal;f.addEventListener("abort",()=>{clearTimeout(c(this,zi)),S(this,zi,null)},{once:!0}),e.addEventListener("mouseenter",()=>{S(this,zi,setTimeout(()=>{S(this,zi,null),c(this,Gs).classList.add("show"),c(this,Ai)._reportTelemetry({action:"alt_text_tooltip"})},d))},{signal:f}),e.addEventListener("mouseleave",()=>{var g;c(this,zi)&&(clearTimeout(c(this,zi)),S(this,zi,null)),(g=c(this,Gs))==null||g.classList.remove("show")},{signal:f})}c(this,qs)?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=c(this,Ue)),i.parentNode||e.append(i);const n=c(this,Ai).getImageForAltText();n==null||n.setAttribute("aria-describedby",i.id)},w(oi,ka,null),mt(oi,"_l10n",null);let pg=oi;var Fl,Ss,re,Po,Ul,Ye,Bl,Ha,fh,Pl,za,gh,Il,Cn,Ys,Io,qo,ns,ph,Tg,Et,Lb,mh,Nb,kb,q_,G_,Hb,zb,Fb,j_,Ub,X_,Y_,V_,Bb,ku;const qt=class qt{constructor(e){w(this,Et);w(this,Fl,null);w(this,Ss,null);w(this,re,null);w(this,Po,!1);w(this,Ul,!1);w(this,Ye,null);w(this,Bl,null);w(this,Ha,null);w(this,fh,"");w(this,Pl,!1);w(this,za,null);w(this,gh,!1);w(this,Il,!1);w(this,Cn,!1);w(this,Ys,null);w(this,Io,0);w(this,qo,0);w(this,ns,null);mt(this,"_editToolbar",null);mt(this,"_initialOptions",Object.create(null));mt(this,"_initialData",null);mt(this,"_isVisible",!0);mt(this,"_uiManager",null);mt(this,"_focusEventsAllowed",!0);w(this,ph,!1);w(this,Tg,qt._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:i,rawDims:{pageWidth:n,pageHeight:l,pageX:o,pageY:u}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,l],this.pageTranslation=[o,u];const[d,f]=this.parentDimensions;this.x=e.x/d,this.y=e.y/f,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=qt.prototype._resizeWithKeyboard,i=wr.TRANSLATE_SMALL,n=wr.TRANSLATE_BIG;return zt(this,"_resizerKeyboardManager",new gd([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],qt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return zt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const i=new Ox({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});i.annotationElementId=e.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(e,i){if(qt._l10n??(qt._l10n=e),qt._l10nResizer||(qt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),qt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);qt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,i){ie("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,ph)}set _isDraggable(e){var i;S(this,ph,e),(i=this.div)==null||i.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(e*2),this.y+=this.width*e/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(e*2),this.y-=this.width*e/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,Tg)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):_(this,Et,ku).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,Pl)?S(this,Pl,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const i=e.relatedTarget;i!=null&&i.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,i,n,l){const[o,u]=this.parentDimensions;[n,l]=this.screenToPageTranslation(n,l),this.x=(e+n)/o,this.y=(i+l)/u,this.fixAndSetPosition()}translate(e,i){_(this,Et,Lb).call(this,this.parentDimensions,e,i)}translateInPage(e,i){c(this,za)||S(this,za,[this.x,this.y]),_(this,Et,Lb).call(this,this.pageDimensions,e,i),this.div.scrollIntoView({block:"nearest"})}drag(e,i){c(this,za)||S(this,za,[this.x,this.y]);const[n,l]=this.parentDimensions;if(this.x+=e/n,this.y+=i/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:u}=this;const[d,f]=this.getBaseTranslation();o+=d,u+=f,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*u).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!c(this,za)&&(c(this,za)[0]!==this.x||c(this,za)[1]!==this.y)}getBaseTranslation(){const[e,i]=this.parentDimensions,{_borderLineWidth:n}=qt,l=n/e,o=n/i;switch(this.rotation){case 90:return[-l,o];case 180:return[l,o];case 270:return[l,-o];default:return[-l,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[i,n]=this.pageDimensions;let{x:l,y:o,width:u,height:d}=this;if(u*=i,d*=n,l*=i,o*=n,this._mustFixPosition)switch(e){case 0:l=Math.max(0,Math.min(i-u,l)),o=Math.max(0,Math.min(n-d,o));break;case 90:l=Math.max(0,Math.min(i-d,l)),o=Math.min(n,Math.max(u,o));break;case 180:l=Math.min(i,Math.max(u,l)),o=Math.min(n,Math.max(d,o));break;case 270:l=Math.min(i,Math.max(d,l)),o=Math.max(0,Math.min(n-u,o));break}this.x=l/=i,this.y=o/=n;const[f,g]=this.getBaseTranslation();l+=f,o+=g;const{style:m}=this.div;m.left=`${(100*l).toFixed(2)}%`,m.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,i){var n;return _(n=qt,mh,Nb).call(n,e,i,this.parentRotation)}pageTranslationToScreen(e,i){var n;return _(n=qt,mh,Nb).call(n,e,i,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[i,n]}=this;return[i*e,n*e]}setDims(e,i){const[n,l]=this.parentDimensions;this.div.style.width=`${(100*e/n).toFixed(2)}%`,c(this,Ul)||(this.div.style.height=`${(100*i/l).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:i,width:n}=e,l=n.endsWith("%"),o=!c(this,Ul)&&i.endsWith("%");if(l&&o)return;const[u,d]=this.parentDimensions;l||(e.width=`${(100*parseFloat(n)/u).toFixed(2)}%`),!c(this,Ul)&&!o&&(e.height=`${(100*parseFloat(i)/d).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=c(this,re))==null||e.finish()}async addEditToolbar(){return this._editToolbar||c(this,Il)?this._editToolbar:(this._editToolbar=new _b(this),this.div.append(this._editToolbar.render()),c(this,re)&&await this._editToolbar.addAltText(c(this,re)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=c(this,re))==null||e.destroy())}addContainer(e){var n;const i=(n=this._editToolbar)==null?void 0:n.div;i?i.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,re)||(pg.initialize(qt._l10n),S(this,re,new pg(this)),c(this,Fl)&&(c(this,re).data=c(this,Fl),S(this,Fl,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=c(this,re))==null?void 0:e.data}set altTextData(e){c(this,re)&&(c(this,re).data=e)}get guessedAltText(){var e;return(e=c(this,re))==null?void 0:e.guessedText}async setGuessedAltText(e){var i;await((i=c(this,re))==null?void 0:i.setGuessedText(e))}serializeAltText(e){var i;return(i=c(this,re))==null?void 0:i.serialize(e)}hasAltText(){return!!c(this,re)&&!c(this,re).isEmpty()}hasAltTextData(){var e;return((e=c(this,re))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=c(this,Po)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),_(this,Et,Ub).call(this);const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*i/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[n,l]=this.getInitialTranslation();return this.translate(n,l),gg(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:i}=ui.platform;if(e.button!==0||e.ctrlKey&&i){e.preventDefault();return}if(S(this,Pl,!0),this._isDraggable){_(this,Et,j_).call(this,e);return}_(this,Et,Fb).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){c(this,Ys)&&clearTimeout(c(this,Ys)),S(this,Ys,setTimeout(()=>{var e;S(this,Ys,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,i,n){e.changeParent(this),this.x=i,this.y=n,this.fixAndSetPosition()}getRect(e,i,n=this.rotation){const l=this.parentScale,[o,u]=this.pageDimensions,[d,f]=this.pageTranslation,g=e/l,m=i/l,y=this.x*o,v=this.y*u,E=this.width*o,x=this.height*u;switch(n){case 0:return[y+g+d,u-v-m-x+f,y+g+E+d,u-v-m+f];case 90:return[y+m+d,u-v+g+f,y+m+x+d,u-v+g+E+f];case 180:return[y-g-E+d,u-v+m+f,y-g+d,u-v+m+x+f];case 270:return[y-m-x+d,u-v-g-E+f,y-m+d,u-v-g+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,i){const[n,l,o,u]=e,d=o-n,f=u-l;switch(this.rotation){case 0:return[n,i-u,d,f];case 90:return[n,i-l,f,d];case 180:return[o,i-l,d,f];case 270:return[o,i-u,f,d];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){S(this,Il,!0)}disableEditMode(){S(this,Il,!1)}isInEditMode(){return c(this,Il)}shouldGetKeyboardEvents(){return c(this,Cn)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){_(this,Et,Ub).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,i=null){ie("An editor must be serializable")}static async deserialize(e,i,n){const l=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:n});l.rotation=e.rotation,S(l,Fl,e.accessibilityData);const[o,u]=l.pageDimensions,[d,f,g,m]=l.getRectInCurrentCoords(e.rect,u);return l.x=d/o,l.y=f/u,l.width=g/o,l.height=m/u,l}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=c(this,Ha))==null||e.abort(),S(this,Ha,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,Ys)&&(clearTimeout(c(this,Ys)),S(this,Ys,null)),_(this,Et,ku).call(this),this.removeEditToolbar(),c(this,ns)){for(const i of c(this,ns).values())clearTimeout(i);S(this,ns,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(_(this,Et,q_).call(this),c(this,Ye).classList.remove("hidden"),gg(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),S(this,Bl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const i=c(this,Ye).children;if(!c(this,Ss)){S(this,Ss,Array.from(i));const u=_(this,Et,X_).bind(this),d=_(this,Et,Y_).bind(this),f=this._uiManager._signal;for(const g of c(this,Ss)){const m=g.getAttribute("data-resizer-name");g.setAttribute("role","spinbutton"),g.addEventListener("keydown",u,{signal:f}),g.addEventListener("blur",d,{signal:f}),g.addEventListener("focus",_(this,Et,V_).bind(this,m),{signal:f}),g.setAttribute("data-l10n-id",qt._l10nResizer[m])}}const n=c(this,Ss)[0];let l=0;for(const u of i){if(u===n)break;l++}const o=(360-this.rotation+this.parentRotation)%360/90*(c(this,Ss).length/4);if(o!==l){if(o<l)for(let d=0;d<l-o;d++)c(this,Ye).append(c(this,Ye).firstChild);else if(o>l)for(let d=0;d<o-l;d++)c(this,Ye).firstChild.before(c(this,Ye).lastChild);let u=0;for(const d of i){const g=c(this,Ss)[u++].getAttribute("data-resizer-name");d.setAttribute("data-l10n-id",qt._l10nResizer[g])}}_(this,Et,Bb).call(this,0),S(this,Cn,!0),c(this,Ye).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,i){c(this,Cn)&&_(this,Et,zb).call(this,c(this,fh),{movementX:e,movementY:i})}_stopResizingWithKeyboard(){_(this,Et,ku).call(this),this.div.focus()}select(){var e,i,n;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var l,o;(l=this.div)!=null&&l.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(i=this._editToolbar)==null||i.show(),(n=c(this,re))==null||n.toggleAltTextBadge(!1)}unselect(){var e,i,n,l,o;(e=c(this,Ye))==null||e.classList.add("hidden"),(i=this.div)==null||i.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(l=this._editToolbar)==null||l.hide(),(o=c(this,re))==null||o.toggleAltTextBadge(!0)}updateParams(e,i){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return c(this,gh)}set isEditing(e){S(this,gh,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,i){S(this,Ul,!0);const n=e/i,{style:l}=this.div;l.aspectRatio=n,l.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,i=!1){if(i){c(this,ns)||S(this,ns,new Map);const{action:n}=e;let l=c(this,ns).get(n);l&&clearTimeout(l),l=setTimeout(()=>{this._reportTelemetry(e),c(this,ns).delete(n),c(this,ns).size===0&&S(this,ns,null)},qt._telemetryTimeout),c(this,ns).set(n,l);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),S(this,Po,!1)}disable(){this.div&&(this.div.tabIndex=-1),S(this,Po,!0)}renderAnnotationElement(e){let i=e.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),e.container.prepend(i);else if(i.nodeName==="CANVAS"){const n=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),n.before(i)}return i}resetAnnotationElement(e){const{firstChild:i}=e.container;(i==null?void 0:i.nodeName)==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}};Fl=new WeakMap,Ss=new WeakMap,re=new WeakMap,Po=new WeakMap,Ul=new WeakMap,Ye=new WeakMap,Bl=new WeakMap,Ha=new WeakMap,fh=new WeakMap,Pl=new WeakMap,za=new WeakMap,gh=new WeakMap,Il=new WeakMap,Cn=new WeakMap,Ys=new WeakMap,Io=new WeakMap,qo=new WeakMap,ns=new WeakMap,ph=new WeakMap,Tg=new WeakMap,Et=new WeakSet,Lb=function([e,i],n,l){[n,l]=this.screenToPageTranslation(n,l),this.x+=n/e,this.y+=l/i,this.fixAndSetPosition()},mh=new WeakSet,Nb=function(e,i,n){switch(n){case 90:return[i,-e];case 180:return[-e,-i];case 270:return[-i,e];default:return[e,i]}},kb=function(e){switch(e){case 90:{const[i,n]=this.pageDimensions;return[0,-i/n,n/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,n]=this.pageDimensions;return[0,i/n,-n/i,0]}default:return[1,0,0,1]}},q_=function(){if(c(this,Ye))return;S(this,Ye,document.createElement("div")),c(this,Ye).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const n of e){const l=document.createElement("div");c(this,Ye).append(l),l.classList.add("resizer",n),l.setAttribute("data-resizer-name",n),l.addEventListener("pointerdown",_(this,Et,G_).bind(this,n),{signal:i}),l.addEventListener("contextmenu",hs,{signal:i}),l.tabIndex=-1}this.div.prepend(c(this,Ye))},G_=function(e,i){var x;i.preventDefault();const{isMac:n}=ui.platform;if(i.button!==0||i.ctrlKey&&n)return;(x=c(this,re))==null||x.toggle(!1);const l=this._isDraggable;this._isDraggable=!1;const o=new AbortController,u=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",_(this,Et,zb).bind(this,e),{passive:!0,capture:!0,signal:u}),window.addEventListener("contextmenu",hs,{signal:u});const d=this.x,f=this.y,g=this.width,m=this.height,y=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const E=()=>{var C;o.abort(),this.parent.togglePointerEvents(!0),(C=c(this,re))==null||C.toggle(!0),this._isDraggable=l,this.parent.div.style.cursor=y,this.div.style.cursor=v,_(this,Et,Hb).call(this,d,f,g,m)};window.addEventListener("pointerup",E,{signal:u}),window.addEventListener("blur",E,{signal:u})},Hb=function(e,i,n,l){const o=this.x,u=this.y,d=this.width,f=this.height;o===e&&u===i&&d===n&&f===l||this.addCommands({cmd:()=>{this.width=d,this.height=f,this.x=o,this.y=u;const[g,m]=this.parentDimensions;this.setDims(g*d,m*f),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=l,this.x=e,this.y=i;const[g,m]=this.parentDimensions;this.setDims(g*n,m*l),this.fixAndSetPosition()},mustExec:!0})},zb=function(e,i){const[n,l]=this.parentDimensions,o=this.x,u=this.y,d=this.width,f=this.height,g=qt.MIN_SIZE/n,m=qt.MIN_SIZE/l,y=X=>Math.round(X*1e4)/1e4,v=_(this,Et,kb).call(this,this.rotation),E=(X,W)=>[v[0]*X+v[2]*W,v[1]*X+v[3]*W],x=_(this,Et,kb).call(this,360-this.rotation),C=(X,W)=>[x[0]*X+x[2]*W,x[1]*X+x[3]*W];let O,M,z=!1,F=!1;switch(e){case"topLeft":z=!0,O=(X,W)=>[0,0],M=(X,W)=>[X,W];break;case"topMiddle":O=(X,W)=>[X/2,0],M=(X,W)=>[X/2,W];break;case"topRight":z=!0,O=(X,W)=>[X,0],M=(X,W)=>[0,W];break;case"middleRight":F=!0,O=(X,W)=>[X,W/2],M=(X,W)=>[0,W/2];break;case"bottomRight":z=!0,O=(X,W)=>[X,W],M=(X,W)=>[0,0];break;case"bottomMiddle":O=(X,W)=>[X/2,W],M=(X,W)=>[X/2,0];break;case"bottomLeft":z=!0,O=(X,W)=>[0,W],M=(X,W)=>[X,0];break;case"middleLeft":F=!0,O=(X,W)=>[0,W/2],M=(X,W)=>[X,W/2];break}const I=O(d,f),q=M(d,f);let G=E(...q);const Q=y(o+G[0]),J=y(u+G[1]);let nt=1,yt=1,[at,gt]=this.screenToPageTranslation(i.movementX,i.movementY);if([at,gt]=C(at/n,gt/l),z){const X=Math.hypot(d,f);nt=yt=Math.max(Math.min(Math.hypot(q[0]-I[0]-at,q[1]-I[1]-gt)/X,1/d,1/f),g/d,m/f)}else F?nt=Math.max(g,Math.min(1,Math.abs(q[0]-I[0]-at)))/d:yt=Math.max(m,Math.min(1,Math.abs(q[1]-I[1]-gt)))/f;const Tt=y(d*nt),Ot=y(f*yt);G=E(...M(Tt,Ot));const pt=Q-G[0],P=J-G[1];this.width=Tt,this.height=Ot,this.x=pt,this.y=P,this.setDims(n*Tt,l*Ot),this.fixAndSetPosition()},Fb=function(e){const{isMac:i}=ui.platform;e.ctrlKey&&!i||e.shiftKey||e.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)},j_=function(e){const{isSelected:i}=this;this._uiManager.setUpDragSession();const n=new AbortController,l=this._uiManager.combinedSignal(n);if(i){this.div.classList.add("moving"),S(this,Io,e.clientX),S(this,qo,e.clientY);const u=d=>{const{clientX:f,clientY:g}=d,[m,y]=this.screenToPageTranslation(f-c(this,Io),g-c(this,qo));S(this,Io,f),S(this,qo,g),this._uiManager.dragSelectedEditors(m,y)};window.addEventListener("pointermove",u,{passive:!0,capture:!0,signal:l})}const o=()=>{n.abort(),i&&this.div.classList.remove("moving"),S(this,Pl,!1),this._uiManager.endDragSession()||_(this,Et,Fb).call(this,e)};window.addEventListener("pointerup",o,{signal:l}),window.addEventListener("blur",o,{signal:l})},Ub=function(){if(c(this,Ha)||!this.div)return;S(this,Ha,new AbortController);const e=this._uiManager.combinedSignal(c(this,Ha));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},X_=function(e){qt._resizerKeyboardManager.exec(this,e)},Y_=function(e){var i;c(this,Cn)&&((i=e.relatedTarget)==null?void 0:i.parentNode)!==c(this,Ye)&&_(this,Et,ku).call(this)},V_=function(e){S(this,fh,c(this,Cn)?e:"")},Bb=function(e){if(c(this,Ss))for(const i of c(this,Ss))i.tabIndex=e},ku=function(){if(S(this,Cn,!1),_(this,Et,Bb).call(this,-1),c(this,Bl)){const{savedX:e,savedY:i,savedWidth:n,savedHeight:l}=c(this,Bl);_(this,Et,Hb).call(this,e,i,n,l),S(this,Bl,null)}},w(qt,mh),mt(qt,"_l10n",null),mt(qt,"_l10nResizer",null),mt(qt,"_borderLineWidth",-1),mt(qt,"_colorManager",new wb),mt(qt,"_zIndex",1),mt(qt,"_telemetryTimeout",1e3);let Vt=qt;class Ox extends Vt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const n_=3285377520,is=4294901760,Fs=65535;class K_{constructor(e){this.h1=e?e&4294967295:n_,this.h2=e?e&4294967295:n_}update(e){let i,n;if(typeof e=="string"){i=new Uint8Array(e.length*2),n=0;for(let C=0,O=e.length;C<O;C++){const M=e.charCodeAt(C);M<=255?i[n++]=M:(i[n++]=M>>>8,i[n++]=M&255)}}else if(ArrayBuffer.isView(e))i=e.slice(),n=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const l=n>>2,o=n-l*4,u=new Uint32Array(i.buffer,0,l);let d=0,f=0,g=this.h1,m=this.h2;const y=3432918353,v=461845907,E=y&Fs,x=v&Fs;for(let C=0;C<l;C++)C&1?(d=u[C],d=d*y&is|d*E&Fs,d=d<<15|d>>>17,d=d*v&is|d*x&Fs,g^=d,g=g<<13|g>>>19,g=g*5+3864292196):(f=u[C],f=f*y&is|f*E&Fs,f=f<<15|f>>>17,f=f*v&is|f*x&Fs,m^=f,m=m<<13|m>>>19,m=m*5+3864292196);switch(d=0,o){case 3:d^=i[l*4+2]<<16;case 2:d^=i[l*4+1]<<8;case 1:d^=i[l*4],d=d*y&is|d*E&Fs,d=d<<15|d>>>17,d=d*v&is|d*x&Fs,l&1?g^=d:m^=d}this.h1=g,this.h2=m}hexdigest(){let e=this.h1,i=this.h2;return e^=i>>>1,e=e*3981806797&is|e*36045&Fs,i=i*4283543511&is|((i<<16|e>>>16)*2950163797&is)>>>16,e^=i>>>1,e=e*444984403&is|e*60499&Fs,i=i*3301882366&is|((i<<16|e>>>16)*3120437893&is)>>>16,e^=i>>>1,(e>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const Pb=Object.freeze({map:null,hash:"",transfer:void 0});var ql,Gl,Be,wg,Q_;class I0{constructor(){w(this,wg);w(this,ql,!1);w(this,Gl,null);w(this,Be,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,i){const n=c(this,Be).get(e);return n===void 0?i:Object.assign(i,n)}getRawValue(e){return c(this,Be).get(e)}remove(e){if(c(this,Be).delete(e),c(this,Be).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const i of c(this,Be).values())if(i instanceof Vt)return;this.onAnnotationEditor(null)}}setValue(e,i){const n=c(this,Be).get(e);let l=!1;if(n!==void 0)for(const[o,u]of Object.entries(i))n[o]!==u&&(l=!0,n[o]=u);else l=!0,c(this,Be).set(e,i);l&&_(this,wg,Q_).call(this),i instanceof Vt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type)}has(e){return c(this,Be).has(e)}getAll(){return c(this,Be).size>0?H0(c(this,Be)):null}setAll(e){for(const[i,n]of Object.entries(e))this.setValue(i,n)}get size(){return c(this,Be).size}resetModified(){c(this,ql)&&(S(this,ql,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Z_(this)}get serializable(){if(c(this,Be).size===0)return Pb;const e=new Map,i=new K_,n=[],l=Object.create(null);let o=!1;for(const[u,d]of c(this,Be)){const f=d instanceof Vt?d.serialize(!1,l):d;f&&(e.set(u,f),i.update(`${u}:${JSON.stringify(f)}`),o||(o=!!f.bitmap))}if(o)for(const u of e.values())u.bitmap&&n.push(u.bitmap);return e.size>0?{map:e,hash:i.hexdigest(),transfer:n}:Pb}get editorStats(){let e=null;const i=new Map;for(const n of c(this,Be).values()){if(!(n instanceof Vt))continue;const l=n.telemetryFinalData;if(!l)continue;const{type:o}=l;i.has(o)||i.set(o,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const u=e[o]||(e[o]=new Map);for(const[d,f]of Object.entries(l)){if(d==="type")continue;let g=u.get(d);g||(g=new Map,u.set(d,g));const m=g.get(f)??0;g.set(f,m+1)}}for(const[n,l]of i)e[n]=l.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){S(this,Gl,null)}get modifiedIds(){if(c(this,Gl))return c(this,Gl);const e=[];for(const i of c(this,Be).values())!(i instanceof Vt)||!i.annotationElementId||!i.serialize()||e.push(i.annotationElementId);return S(this,Gl,{ids:new Set(e),hash:e.join(",")})}}ql=new WeakMap,Gl=new WeakMap,Be=new WeakMap,wg=new WeakSet,Q_=function(){c(this,ql)||(S(this,ql,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var bh;class Z_ extends I0{constructor(i){super();w(this,bh);const{map:n,hash:l,transfer:o}=i.serializable,u=structuredClone(n,o?{transfer:o}:null);S(this,bh,{map:u,hash:l,transfer:o})}get print(){ie("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,bh)}get modifiedIds(){return zt(this,"modifiedIds",{ids:new Set,hash:""})}}bh=new WeakMap;var Go;class Lx{constructor({ownerDocument:e=globalThis.document,styleElement:i=null}){w(this,Go,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(e,i.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,Go).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:i}){if(!(!e||c(this,Go).has(e.loadedName))){if(Re(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:l,style:o}=e,u=new FontFace(n,l,o);this.addNativeFontFace(u);try{await u.load(),c(this,Go).add(n),i==null||i(e)}catch{xt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}ie("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(l){throw xt(`Failed to load font '${n.family}': '${l}'.`),e.disableFontFace=!0,l}}return}const i=e.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const l=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,l)})}}get isFontLoadingAPISupported(){var i;const e=!!((i=this._document)!=null&&i.fonts);return zt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(ni||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),zt(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function i(){for(Re(!l.done,"completeRequest() cannot be called twice."),l.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,l={done:!1,complete:i,callback:e};return n.push(l),l}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return zt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,i){function n(I,q){return I.charCodeAt(q)<<24|I.charCodeAt(q+1)<<16|I.charCodeAt(q+2)<<8|I.charCodeAt(q+3)&255}function l(I,q,G,Q){const J=I.substring(0,q),nt=I.substring(q+G);return J+Q+nt}let o,u;const d=this._document.createElement("canvas");d.width=1,d.height=1;const f=d.getContext("2d");let g=0;function m(I,q){if(++g>30){xt("Load test font never loaded."),q();return}if(f.font="30px "+I,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){q();return}setTimeout(m.bind(null,I,q))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=l(v,976,y.length,y);const x=16,C=1482184792;let O=n(v,x);for(o=0,u=y.length-3;o<u;o+=4)O=O-C+n(y,o)|0;o<y.length&&(O=O-C+n(y+"XXX",o)|0),v=l(v,x,4,mx(O));const M=`url(data:font/opentype;base64,${btoa(v)});`,z=`@font-face {font-family:"${y}";src:${M}}`;this.insertRule(z);const F=this._document.createElement("div");F.style.visibility="hidden",F.style.width=F.style.height="10px",F.style.position="absolute",F.style.top=F.style.left="0px";for(const I of[e.loadedName,y]){const q=this._document.createElement("span");q.textContent="Hi",q.style.fontFamily=I,F.append(q)}this._document.body.append(F),m(y,()=>{F.remove(),i.complete()})}}Go=new WeakMap;class Nx{constructor(e,{disableFontFace:i=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const l in e)this[l]=e[l];this.disableFontFace=i===!0,this._inspectFont=n}createNativeFontFace(){var i;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(i=this._inspectFont)==null||i.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${_x(this.data)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let l=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(l+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${l}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),i}getPathGenerator(e,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];let n;try{n=e.get(this.loadedName+"_path_"+i)}catch(o){xt(`getPathGenerator - ignoring character: "${o}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[i]=function(o,u){};const l=[];for(let o=0,u=n.length;o<u;)switch(n[o++]){case yn.BEZIER_CURVE_TO:{const[d,f,g,m,y,v]=n.slice(o,o+6);l.push(E=>E.bezierCurveTo(d,f,g,m,y,v)),o+=6}break;case yn.MOVE_TO:{const[d,f]=n.slice(o,o+2);l.push(g=>g.moveTo(d,f)),o+=2}break;case yn.LINE_TO:{const[d,f]=n.slice(o,o+2);l.push(g=>g.lineTo(d,f)),o+=2}break;case yn.QUADRATIC_CURVE_TO:{const[d,f,g,m]=n.slice(o,o+4);l.push(y=>y.quadraticCurveTo(d,f,g,m)),o+=4}break;case yn.RESTORE:l.push(d=>d.restore());break;case yn.SAVE:l.push(d=>d.save());break;case yn.SCALE:Re(l.length===2,"Scale command is only valid at the third position.");break;case yn.TRANSFORM:{const[d,f,g,m,y,v]=n.slice(o,o+6);l.push(E=>E.transform(d,f,g,m,y,v)),o+=6}break;case yn.TRANSLATE:{const[d,f]=n.slice(o,o+2);l.push(g=>g.translate(d,f)),o+=2}break}return this.compiledGlyphs[i]=function(u,d){l[0](u),l[1](u),u.scale(d,-d);for(let f=2,g=l.length;f<g;f++)l[f](u)}}}var yh;class W_{constructor({enableHWA:e=!1}){w(this,yh,!1);S(this,yh,e)}create(e,i){if(e<=0||i<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,i);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(this,yh)})}}reset(e,i,n){if(!e.canvas)throw new Error("Canvas is not specified");if(i<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=i,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,i){ie("Abstract method `_createCanvas` called.")}}yh=new WeakMap;class kx extends W_{constructor({ownerDocument:e=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=e}_createCanvas(e,i){const n=this._document.createElement("canvas");return n.width=e,n.height=i,n}}class $_{constructor({baseUrl:e=null,isCompressed:i=!0}){this.baseUrl=e,this.isCompressed=i}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const i=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(i).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(e){ie("Abstract method `_fetch` called.")}}class J_ extends $_{async _fetch(e){const i=await Ig(e,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):Pg(i)}}class tE{addFilter(e){return"none"}addHCMFilter(e,i){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,i,n,l,o){return"none"}destroy(e=!1){}}var jl,Xl,Vs,Mn,ei,xg,Yl,it,Je,vo,Ao,Xf,So,eE,Ib,_o,Hu,zu,qb,Fu;class Hx extends tE{constructor({docId:i,ownerDocument:n=globalThis.document}){super();w(this,it);w(this,jl);w(this,Xl);w(this,Vs);w(this,Mn);w(this,ei);w(this,xg);w(this,Yl,0);S(this,Mn,i),S(this,ei,n)}addFilter(i){if(!i)return"none";let n=c(this,it,Je).get(i);if(n)return n;const[l,o,u]=_(this,it,Xf).call(this,i),d=i.length===1?l:`${l}${o}${u}`;if(n=c(this,it,Je).get(d),n)return c(this,it,Je).set(i,n),n;const f=`g_${c(this,Mn)}_transfer_map_${li(this,Yl)._++}`,g=_(this,it,So).call(this,f);c(this,it,Je).set(i,g),c(this,it,Je).set(d,g);const m=_(this,it,_o).call(this,f);return _(this,it,zu).call(this,l,o,u,m),g}addHCMFilter(i,n){var x;const l=`${i}-${n}`,o="base";let u=c(this,it,vo).get(o);if((u==null?void 0:u.key)===l||(u?((x=u.filter)==null||x.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},c(this,it,vo).set(o,u)),!i||!n))return u.url;const d=_(this,it,Fu).call(this,i);i=ot.makeHexColor(...d);const f=_(this,it,Fu).call(this,n);if(n=ot.makeHexColor(...f),c(this,it,Ao).style.color="",i==="#000000"&&n==="#ffffff"||i===n)return u.url;const g=new Array(256);for(let C=0;C<=255;C++){const O=C/255;g[C]=O<=.03928?O/12.92:((O+.055)/1.055)**2.4}const m=g.join(","),y=`g_${c(this,Mn)}_hcm_filter`,v=u.filter=_(this,it,_o).call(this,y);_(this,it,zu).call(this,m,m,m,v),_(this,it,Ib).call(this,v);const E=(C,O)=>{const M=d[C]/255,z=f[C]/255,F=new Array(O+1);for(let I=0;I<=O;I++)F[I]=M+I/O*(z-M);return F.join(",")};return _(this,it,zu).call(this,E(0,5),E(1,5),E(2,5),v),u.url=_(this,it,So).call(this,y),u.url}addAlphaFilter(i){let n=c(this,it,Je).get(i);if(n)return n;const[l]=_(this,it,Xf).call(this,[i]),o=`alpha_${l}`;if(n=c(this,it,Je).get(o),n)return c(this,it,Je).set(i,n),n;const u=`g_${c(this,Mn)}_alpha_map_${li(this,Yl)._++}`,d=_(this,it,So).call(this,u);c(this,it,Je).set(i,d),c(this,it,Je).set(o,d);const f=_(this,it,_o).call(this,u);return _(this,it,qb).call(this,l,f),d}addLuminosityFilter(i){let n=c(this,it,Je).get(i||"luminosity");if(n)return n;let l,o;if(i?([l]=_(this,it,Xf).call(this,[i]),o=`luminosity_${l}`):o="luminosity",n=c(this,it,Je).get(o),n)return c(this,it,Je).set(i,n),n;const u=`g_${c(this,Mn)}_luminosity_map_${li(this,Yl)._++}`,d=_(this,it,So).call(this,u);c(this,it,Je).set(i,d),c(this,it,Je).set(o,d);const f=_(this,it,_o).call(this,u);return _(this,it,eE).call(this,f),i&&_(this,it,qb).call(this,l,f),d}addHighlightHCMFilter(i,n,l,o,u){var z;const d=`${n}-${l}-${o}-${u}`;let f=c(this,it,vo).get(i);if((f==null?void 0:f.key)===d||(f?((z=f.filter)==null||z.remove(),f.key=d,f.url="none",f.filter=null):(f={key:d,url:"none",filter:null},c(this,it,vo).set(i,f)),!n||!l))return f.url;const[g,m]=[n,l].map(_(this,it,Fu).bind(this));let y=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),v=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[E,x]=[o,u].map(_(this,it,Fu).bind(this));v<y&&([y,v,E,x]=[v,y,x,E]),c(this,it,Ao).style.color="";const C=(F,I,q)=>{const G=new Array(256),Q=(v-y)/q,J=F/255,nt=(I-F)/(255*q);let yt=0;for(let at=0;at<=q;at++){const gt=Math.round(y+at*Q),Tt=J+at*nt;for(let Ot=yt;Ot<=gt;Ot++)G[Ot]=Tt;yt=gt+1}for(let at=yt;at<256;at++)G[at]=G[yt-1];return G.join(",")},O=`g_${c(this,Mn)}_hcm_${i}_filter`,M=f.filter=_(this,it,_o).call(this,O);return _(this,it,Ib).call(this,M),_(this,it,zu).call(this,C(E[0],x[0],5),C(E[1],x[1],5),C(E[2],x[2],5),M),f.url=_(this,it,So).call(this,O),f.url}destroy(i=!1){i&&c(this,it,vo).size!==0||(c(this,Vs)&&(c(this,Vs).parentNode.parentNode.remove(),S(this,Vs,null)),c(this,Xl)&&(c(this,Xl).clear(),S(this,Xl,null)),S(this,Yl,0))}}jl=new WeakMap,Xl=new WeakMap,Vs=new WeakMap,Mn=new WeakMap,ei=new WeakMap,xg=new WeakMap,Yl=new WeakMap,it=new WeakSet,Je=function(){return c(this,Xl)||S(this,Xl,new Map)},vo=function(){return c(this,xg)||S(this,xg,new Map)},Ao=function(){if(!c(this,Vs)){const i=c(this,ei).createElement("div"),{style:n}=i;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const l=c(this,ei).createElementNS(An,"svg");l.setAttribute("width",0),l.setAttribute("height",0),S(this,Vs,c(this,ei).createElementNS(An,"defs")),i.append(l),l.append(c(this,Vs)),c(this,ei).body.append(i)}return c(this,Vs)},Xf=function(i){if(i.length===1){const g=i[0],m=new Array(256);for(let v=0;v<256;v++)m[v]=g[v]/255;const y=m.join(",");return[y,y,y]}const[n,l,o]=i,u=new Array(256),d=new Array(256),f=new Array(256);for(let g=0;g<256;g++)u[g]=n[g]/255,d[g]=l[g]/255,f[g]=o[g]/255;return[u.join(","),d.join(","),f.join(",")]},So=function(i){if(c(this,jl)===void 0){S(this,jl,"");const n=c(this,ei).URL;n!==c(this,ei).baseURI&&(qg(n)?xt('#createUrl: ignore "data:"-URL for performance reasons.'):S(this,jl,n.split("#",1)[0]))}return`url(${c(this,jl)}#${i})`},eE=function(i){const n=c(this,ei).createElementNS(An,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),i.append(n)},Ib=function(i){const n=c(this,ei).createElementNS(An,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),i.append(n)},_o=function(i){const n=c(this,ei).createElementNS(An,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",i),c(this,it,Ao).append(n),n},Hu=function(i,n,l){const o=c(this,ei).createElementNS(An,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",l),i.append(o)},zu=function(i,n,l,o){const u=c(this,ei).createElementNS(An,"feComponentTransfer");o.append(u),_(this,it,Hu).call(this,u,"feFuncR",i),_(this,it,Hu).call(this,u,"feFuncG",n),_(this,it,Hu).call(this,u,"feFuncB",l)},qb=function(i,n){const l=c(this,ei).createElementNS(An,"feComponentTransfer");n.append(l),_(this,it,Hu).call(this,l,"feFuncA",i)},Fu=function(i){return c(this,it,Ao).style.color=i,P0(getComputedStyle(c(this,it,Ao)).getPropertyValue("color"))};class iE{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${e}`;return this._fetch(i).catch(n=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(e){ie("Abstract method `_fetch` called.")}}class sE extends iE{async _fetch(e){const i=await Ig(e,"arraybuffer");return new Uint8Array(i)}}if(ni){var Gb=Promise.withResolvers(),Ku=null;(async()=>{const e=await Lf(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Lf(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await Lf(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),l=await Lf(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let o,u;return new Map(Object.entries({fs:e,http:i,https:n,url:l,canvas:o,path2d:u}))})().then(e=>{Ku=e,Gb.resolve()},e=>{xt(`loadPackages: ${e}`),Ku=new Map,Gb.resolve()})}class tl{static get promise(){return Gb.promise}static get(e){return Ku==null?void 0:Ku.get(e)}}async function nE(b){const i=await tl.get("fs").promises.readFile(b);return new Uint8Array(i)}class zx extends tE{}class Fx extends W_{_createCanvas(e,i){return tl.get("canvas").createCanvas(e,i)}}class Ux extends $_{async _fetch(e){return nE(e)}}class Bx extends iE{async _fetch(e){return nE(e)}}const ci={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function jb(b,e){if(!e)return;const i=e[2]-e[0],n=e[3]-e[1],l=new Path2D;l.rect(e[0],e[1],i,n),b.clip(l)}class q0{getPattern(){ie("Abstract method `getPattern` called.")}}class Px extends q0{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let i;this._type==="axial"?i=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(i=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)i.addColorStop(n[0],n[1]);return i}getPattern(e,i,n,l){let o;if(l===ci.STROKE||l===ci.FILL){const u=i.current.getClippedPathBoundingBox(l,ce(e))||[0,0,0,0],d=Math.ceil(u[2]-u[0])||1,f=Math.ceil(u[3]-u[1])||1,g=i.cachedCanvases.getCanvas("pattern",d,f),m=g.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-u[0],-u[1]),n=ot.transform(n,[1,0,0,1,u[0],u[1]]),m.transform(...i.baseTransform),this.matrix&&m.transform(...this.matrix),jb(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),o=e.createPattern(g.canvas,"no-repeat");const y=new DOMMatrix(n);o.setTransform(y)}else jb(e,this._bbox),o=this._createGradient(e);return o}}function gb(b,e,i,n,l,o,u,d){const f=e.coords,g=e.colors,m=b.data,y=b.width*4;let v;f[i+1]>f[n+1]&&(v=i,i=n,n=v,v=o,o=u,u=v),f[n+1]>f[l+1]&&(v=n,n=l,l=v,v=u,u=d,d=v),f[i+1]>f[n+1]&&(v=i,i=n,n=v,v=o,o=u,u=v);const E=(f[i]+e.offsetX)*e.scaleX,x=(f[i+1]+e.offsetY)*e.scaleY,C=(f[n]+e.offsetX)*e.scaleX,O=(f[n+1]+e.offsetY)*e.scaleY,M=(f[l]+e.offsetX)*e.scaleX,z=(f[l+1]+e.offsetY)*e.scaleY;if(x>=z)return;const F=g[o],I=g[o+1],q=g[o+2],G=g[u],Q=g[u+1],J=g[u+2],nt=g[d],yt=g[d+1],at=g[d+2],gt=Math.round(x),Tt=Math.round(z);let Ot,pt,P,X,W,kt,D,V;for(let $=gt;$<=Tt;$++){if($<O){const Mt=$<x?0:(x-$)/(x-O);Ot=E-(E-C)*Mt,pt=F-(F-G)*Mt,P=I-(I-Q)*Mt,X=q-(q-J)*Mt}else{let Mt;$>z?Mt=1:O===z?Mt=0:Mt=(O-$)/(O-z),Ot=C-(C-M)*Mt,pt=G-(G-nt)*Mt,P=Q-(Q-yt)*Mt,X=J-(J-at)*Mt}let Z;$<x?Z=0:$>z?Z=1:Z=(x-$)/(x-z),W=E-(E-M)*Z,kt=F-(F-nt)*Z,D=I-(I-yt)*Z,V=q-(q-at)*Z;const rt=Math.round(Math.min(Ot,W)),Ct=Math.round(Math.max(Ot,W));let lt=y*$+rt*4;for(let Mt=rt;Mt<=Ct;Mt++)Z=(Ot-Mt)/(Ot-W),Z<0?Z=0:Z>1&&(Z=1),m[lt++]=pt-(pt-kt)*Z|0,m[lt++]=P-(P-D)*Z|0,m[lt++]=X-(X-V)*Z|0,m[lt++]=255}}function Ix(b,e,i){const n=e.coords,l=e.colors;let o,u;switch(e.type){case"lattice":const d=e.verticesPerRow,f=Math.floor(n.length/d)-1,g=d-1;for(o=0;o<f;o++){let m=o*d;for(let y=0;y<g;y++,m++)gb(b,i,n[m],n[m+1],n[m+d],l[m],l[m+1],l[m+d]),gb(b,i,n[m+d+1],n[m+1],n[m+d],l[m+d+1],l[m+1],l[m+d])}break;case"triangles":for(o=0,u=n.length;o<u;o+=3)gb(b,i,n[o],n[o+1],n[o+2],l[o],l[o+1],l[o+2]);break;default:throw new Error("illegal figure")}}class qx extends q0{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,i,n){const d=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),g=Math.ceil(this._bounds[2])-d,m=Math.ceil(this._bounds[3])-f,y=Math.min(Math.ceil(Math.abs(g*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*e[1]*1.1)),3e3),E=g/y,x=m/v,C={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-f,scaleX:1/E,scaleY:1/x},O=y+2*2,M=v+2*2,z=n.getCanvas("mesh",O,M),F=z.context,I=F.createImageData(y,v);if(i){const G=I.data;for(let Q=0,J=G.length;Q<J;Q+=4)G[Q]=i[0],G[Q+1]=i[1],G[Q+2]=i[2],G[Q+3]=255}for(const G of this._figures)Ix(I,G,C);return F.putImageData(I,2,2),{canvas:z.canvas,offsetX:d-2*E,offsetY:f-2*x,scaleX:E,scaleY:x}}getPattern(e,i,n,l){jb(e,this._bbox);let o;if(l===ci.SHADING)o=ot.singularValueDecompose2dScale(ce(e));else if(o=ot.singularValueDecompose2dScale(i.baseTransform),this.matrix){const d=ot.singularValueDecompose2dScale(this.matrix);o=[o[0]*d[0],o[1]*d[1]]}const u=this._createMeshCanvas(o,l===ci.SHADING?null:this._background,i.cachedCanvases);return l!==ci.SHADING&&(e.setTransform(...i.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(u.offsetX,u.offsetY),e.scale(u.scaleX,u.scaleY),e.createPattern(u.canvas,"no-repeat")}}class Gx extends q0{getPattern(){return"hotpink"}}function jx(b){switch(b[0]){case"RadialAxial":return new Px(b);case"Mesh":return new qx(b);case"Dummy":return new Gx}throw new Error(`Unknown IR type: ${b[0]}`)}const a_={COLORED:1,UNCOLORED:2},Cg=class Cg{constructor(e,i,n,l,o){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=i,this.ctx=n,this.canvasGraphicsFactory=l,this.baseTransform=o}createPatternCanvas(e){const{bbox:i,operatorList:n,paintType:l,tilingType:o,color:u,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),Ug("TilingType: "+o);const m=i[0],y=i[1],v=i[2],E=i[3],x=v-m,C=E-y,O=ot.singularValueDecompose2dScale(this.matrix),M=ot.singularValueDecompose2dScale(this.baseTransform),z=O[0]*M[0],F=O[1]*M[1];let I=x,q=C,G=!1,Q=!1;const J=Math.ceil(f*z),nt=Math.ceil(g*F),yt=Math.ceil(x*z),at=Math.ceil(C*F);J>=yt?I=f:G=!0,nt>=at?q=g:Q=!0;const gt=this.getSizeAndScale(I,this.ctx.canvas.width,z),Tt=this.getSizeAndScale(q,this.ctx.canvas.height,F),Ot=e.cachedCanvases.getCanvas("pattern",gt.size,Tt.size),pt=Ot.context,P=d.createCanvasGraphics(pt);if(P.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(P,l,u),pt.translate(-gt.scale*m,-Tt.scale*y),P.transform(gt.scale,0,0,Tt.scale,0,0),pt.save(),this.clipBbox(P,m,y,v,E),P.baseTransform=ce(P.ctx),P.executeOperatorList(n),P.endDrawing(),pt.restore(),G||Q){const X=Ot.canvas;G&&(I=f),Q&&(q=g);const W=this.getSizeAndScale(I,this.ctx.canvas.width,z),kt=this.getSizeAndScale(q,this.ctx.canvas.height,F),D=W.size,V=kt.size,$=e.cachedCanvases.getCanvas("pattern-workaround",D,V),Z=$.context,rt=G?Math.floor(x/f):0,Ct=Q?Math.floor(C/g):0;for(let lt=0;lt<=rt;lt++)for(let Mt=0;Mt<=Ct;Mt++)Z.drawImage(X,D*lt,V*Mt,D,V,0,0,D,V);return{canvas:$.canvas,scaleX:W.scale,scaleY:kt.scale,offsetX:m,offsetY:y}}return{canvas:Ot.canvas,scaleX:gt.scale,scaleY:Tt.scale,offsetX:m,offsetY:y}}getSizeAndScale(e,i,n){const l=Math.max(Cg.MAX_PATTERN_SIZE,i);let o=Math.ceil(e*n);return o>=l?o=l:n=o/e,{scale:n,size:o}}clipBbox(e,i,n,l,o){const u=l-i,d=o-n;e.ctx.rect(i,n,u,d),e.current.updateRectMinMax(ce(e.ctx),[i,n,l,o]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,i,n){const l=e.ctx,o=e.current;switch(i){case a_.COLORED:const u=this.ctx;l.fillStyle=u.fillStyle,l.strokeStyle=u.strokeStyle,o.fillColor=u.fillStyle,o.strokeColor=u.strokeStyle;break;case a_.UNCOLORED:const d=ot.makeHexColor(n[0],n[1],n[2]);l.fillStyle=d,l.strokeStyle=d,o.fillColor=d,o.strokeColor=d;break;default:throw new px(`Unsupported paint type: ${i}`)}}getPattern(e,i,n,l){let o=n;l!==ci.SHADING&&(o=ot.transform(o,i.baseTransform),this.matrix&&(o=ot.transform(o,this.matrix)));const u=this.createPatternCanvas(i);let d=new DOMMatrix(o);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const f=e.createPattern(u.canvas,"repeat");return f.setTransform(d),f}};mt(Cg,"MAX_PATTERN_SIZE",3e3);let Xb=Cg;function Xx({src:b,srcPos:e=0,dest:i,width:n,height:l,nonBlackColor:o=4294967295,inverseDecode:u=!1}){const d=ui.isLittleEndian?4278190080:255,[f,g]=u?[o,d]:[d,o],m=n>>3,y=n&7,v=b.length;i=new Uint32Array(i.buffer);let E=0;for(let x=0;x<l;x++){for(const O=e+m;e<O;e++){const M=e<v?b[e]:255;i[E++]=M&128?g:f,i[E++]=M&64?g:f,i[E++]=M&32?g:f,i[E++]=M&16?g:f,i[E++]=M&8?g:f,i[E++]=M&4?g:f,i[E++]=M&2?g:f,i[E++]=M&1?g:f}if(y===0)continue;const C=e<v?b[e++]:255;for(let O=0;O<y;O++)i[E++]=C&1<<7-O?g:f}return{srcPos:e,destPos:E}}const l_=16,r_=100,Yx=15,o_=10,c_=1e3,Ei=16;function Vx(b,e){if(b._removeMirroring)throw new Error("Context is already forwarding operations.");b.__originalSave=b.save,b.__originalRestore=b.restore,b.__originalRotate=b.rotate,b.__originalScale=b.scale,b.__originalTranslate=b.translate,b.__originalTransform=b.transform,b.__originalSetTransform=b.setTransform,b.__originalResetTransform=b.resetTransform,b.__originalClip=b.clip,b.__originalMoveTo=b.moveTo,b.__originalLineTo=b.lineTo,b.__originalBezierCurveTo=b.bezierCurveTo,b.__originalRect=b.rect,b.__originalClosePath=b.closePath,b.__originalBeginPath=b.beginPath,b._removeMirroring=()=>{b.save=b.__originalSave,b.restore=b.__originalRestore,b.rotate=b.__originalRotate,b.scale=b.__originalScale,b.translate=b.__originalTranslate,b.transform=b.__originalTransform,b.setTransform=b.__originalSetTransform,b.resetTransform=b.__originalResetTransform,b.clip=b.__originalClip,b.moveTo=b.__originalMoveTo,b.lineTo=b.__originalLineTo,b.bezierCurveTo=b.__originalBezierCurveTo,b.rect=b.__originalRect,b.closePath=b.__originalClosePath,b.beginPath=b.__originalBeginPath,delete b._removeMirroring},b.save=function(){e.save(),this.__originalSave()},b.restore=function(){e.restore(),this.__originalRestore()},b.translate=function(n,l){e.translate(n,l),this.__originalTranslate(n,l)},b.scale=function(n,l){e.scale(n,l),this.__originalScale(n,l)},b.transform=function(n,l,o,u,d,f){e.transform(n,l,o,u,d,f),this.__originalTransform(n,l,o,u,d,f)},b.setTransform=function(n,l,o,u,d,f){e.setTransform(n,l,o,u,d,f),this.__originalSetTransform(n,l,o,u,d,f)},b.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},b.rotate=function(n){e.rotate(n),this.__originalRotate(n)},b.clip=function(n){e.clip(n),this.__originalClip(n)},b.moveTo=function(i,n){e.moveTo(i,n),this.__originalMoveTo(i,n)},b.lineTo=function(i,n){e.lineTo(i,n),this.__originalLineTo(i,n)},b.bezierCurveTo=function(i,n,l,o,u,d){e.bezierCurveTo(i,n,l,o,u,d),this.__originalBezierCurveTo(i,n,l,o,u,d)},b.rect=function(i,n,l,o){e.rect(i,n,l,o),this.__originalRect(i,n,l,o)},b.closePath=function(){e.closePath(),this.__originalClosePath()},b.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Kx{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,i,n){let l;return this.cache[e]!==void 0?(l=this.cache[e],this.canvasFactory.reset(l,i,n)):(l=this.canvasFactory.create(i,n),this.cache[e]=l),l}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const i=this.cache[e];this.canvasFactory.destroy(i),delete this.cache[e]}}}function Nf(b,e,i,n,l,o,u,d,f,g){const[m,y,v,E,x,C]=ce(b);if(y===0&&v===0){const z=u*m+x,F=Math.round(z),I=d*E+C,q=Math.round(I),G=(u+f)*m+x,Q=Math.abs(Math.round(G)-F)||1,J=(d+g)*E+C,nt=Math.abs(Math.round(J)-q)||1;return b.setTransform(Math.sign(m),0,0,Math.sign(E),F,q),b.drawImage(e,i,n,l,o,0,0,Q,nt),b.setTransform(m,y,v,E,x,C),[Q,nt]}if(m===0&&E===0){const z=d*v+x,F=Math.round(z),I=u*y+C,q=Math.round(I),G=(d+g)*v+x,Q=Math.abs(Math.round(G)-F)||1,J=(u+f)*y+C,nt=Math.abs(Math.round(J)-q)||1;return b.setTransform(0,Math.sign(y),Math.sign(v),0,F,q),b.drawImage(e,i,n,l,o,0,0,nt,Q),b.setTransform(m,y,v,E,x,C),[nt,Q]}b.drawImage(e,i,n,l,o,u,d,f,g);const O=Math.hypot(m,y),M=Math.hypot(v,E);return[O*f,M*g]}function Qx(b){const{width:e,height:i}=b;if(e>c_||i>c_)return null;const n=1e3,l=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=e+1;let u=new Uint8Array(o*(i+1)),d,f,g;const m=e+7&-8;let y=new Uint8Array(m*i),v=0;for(const M of b.data){let z=128;for(;z>0;)y[v++]=M&z?0:255,z>>=1}let E=0;for(v=0,y[v]!==0&&(u[0]=1,++E),f=1;f<e;f++)y[v]!==y[v+1]&&(u[f]=y[v]?2:1,++E),v++;for(y[v]!==0&&(u[f]=2,++E),d=1;d<i;d++){v=d*m,g=d*o,y[v-m]!==y[v]&&(u[g]=y[v]?1:8,++E);let M=(y[v]?4:0)+(y[v-m]?8:0);for(f=1;f<e;f++)M=(M>>2)+(y[v+1]?4:0)+(y[v-m+1]?8:0),l[M]&&(u[g+f]=l[M],++E),v++;if(y[v-m]!==y[v]&&(u[g+f]=y[v]?2:4,++E),E>n)return null}for(v=m*(i-1),g=d*o,y[v]!==0&&(u[g]=8,++E),f=1;f<e;f++)y[v]!==y[v+1]&&(u[g+f]=y[v]?4:8,++E),v++;if(y[v]!==0&&(u[g+f]=4,++E),E>n)return null;const x=new Int32Array([0,o,-1,0,-o,0,0,0,1]),C=new Path2D;for(d=0;E&&d<=i;d++){let M=d*o;const z=M+e;for(;M<z&&!u[M];)M++;if(M===z)continue;C.moveTo(M%o,d);const F=M;let I=u[M];do{const q=x[I];do M+=q;while(!u[M]);const G=u[M];G!==5&&G!==10?(I=G,u[M]=0):(I=G&51*I>>4,u[M]&=I>>2|I<<2),C.lineTo(M%o,M/o|0),u[M]||--E}while(F!==M);--d}return y=null,u=null,function(M){M.save(),M.scale(1/e,-1/i),M.translate(0,-i),M.fill(C),M.beginPath(),M.restore()}}class u_{constructor(e,i){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=S_,this.textMatrixScale=1,this.fontMatrix=bb,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=$e.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,i])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,i){this.x=e,this.y=i}updatePathMinMax(e,i,n){[i,n]=ot.applyTransform([i,n],e),this.minX=Math.min(this.minX,i),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,i),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,i){const n=ot.applyTransform(i,e),l=ot.applyTransform(i.slice(2),e),o=ot.applyTransform([i[0],i[3]],e),u=ot.applyTransform([i[2],i[1]],e);this.minX=Math.min(this.minX,n[0],l[0],o[0],u[0]),this.minY=Math.min(this.minY,n[1],l[1],o[1],u[1]),this.maxX=Math.max(this.maxX,n[0],l[0],o[0],u[0]),this.maxY=Math.max(this.maxY,n[1],l[1],o[1],u[1])}updateScalingPathMinMax(e,i){ot.scaleMinMax(e,i),this.minX=Math.min(this.minX,i[0]),this.minY=Math.min(this.minY,i[1]),this.maxX=Math.max(this.maxX,i[2]),this.maxY=Math.max(this.maxY,i[3])}updateCurvePathMinMax(e,i,n,l,o,u,d,f,g,m){const y=ot.bezierBoundingBox(i,n,l,o,u,d,f,g,m);m||this.updateRectMinMax(e,y)}getPathBoundingBox(e=ci.FILL,i=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===ci.STROKE){i||ie("Stroke bounding box must include transform.");const l=ot.singularValueDecompose2dScale(i),o=l[0]*this.lineWidth/2,u=l[1]*this.lineWidth/2;n[0]-=o,n[1]-=u,n[2]+=o,n[3]+=u}return n}updateClipFromPath(){const e=ot.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=ci.FILL,i=null){return ot.intersect(this.clipBox,this.getPathBoundingBox(e,i))}}function h_(b,e){if(typeof ImageData<"u"&&e instanceof ImageData){b.putImageData(e,0,0);return}const i=e.height,n=e.width,l=i%Ei,o=(i-l)/Ei,u=l===0?o:o+1,d=b.createImageData(n,Ei);let f=0,g;const m=e.data,y=d.data;let v,E,x,C;if(e.kind===Uf.GRAYSCALE_1BPP){const O=m.byteLength,M=new Uint32Array(y.buffer,0,y.byteLength>>2),z=M.length,F=n+7>>3,I=4294967295,q=ui.isLittleEndian?4278190080:255;for(v=0;v<u;v++){for(x=v<o?Ei:l,g=0,E=0;E<x;E++){const G=O-f;let Q=0;const J=G>F?n:G*8-7,nt=J&-8;let yt=0,at=0;for(;Q<nt;Q+=8)at=m[f++],M[g++]=at&128?I:q,M[g++]=at&64?I:q,M[g++]=at&32?I:q,M[g++]=at&16?I:q,M[g++]=at&8?I:q,M[g++]=at&4?I:q,M[g++]=at&2?I:q,M[g++]=at&1?I:q;for(;Q<J;Q++)yt===0&&(at=m[f++],yt=128),M[g++]=at&yt?I:q,yt>>=1}for(;g<z;)M[g++]=0;b.putImageData(d,0,v*Ei)}}else if(e.kind===Uf.RGBA_32BPP){for(E=0,C=n*Ei*4,v=0;v<o;v++)y.set(m.subarray(f,f+C)),f+=C,b.putImageData(d,0,E),E+=Ei;v<u&&(C=n*l*4,y.set(m.subarray(f,f+C)),b.putImageData(d,0,E))}else if(e.kind===Uf.RGB_24BPP)for(x=Ei,C=n*x,v=0;v<u;v++){for(v>=o&&(x=l,C=n*x),g=0,E=C;E--;)y[g++]=m[f++],y[g++]=m[f++],y[g++]=m[f++],y[g++]=255;b.putImageData(d,0,v*Ei)}else throw new Error(`bad image kind: ${e.kind}`)}function d_(b,e){if(e.bitmap){b.drawImage(e.bitmap,0,0);return}const i=e.height,n=e.width,l=i%Ei,o=(i-l)/Ei,u=l===0?o:o+1,d=b.createImageData(n,Ei);let f=0;const g=e.data,m=d.data;for(let y=0;y<u;y++){const v=y<o?Ei:l;({srcPos:f}=Xx({src:g,srcPos:f,dest:m,width:n,height:v,nonBlackColor:0})),b.putImageData(d,0,y*Ei)}}function Ru(b,e){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of i)b[n]!==void 0&&(e[n]=b[n]);b.setLineDash!==void 0&&(e.setLineDash(b.getLineDash()),e.lineDashOffset=b.lineDashOffset)}function kf(b){if(b.strokeStyle=b.fillStyle="#000000",b.fillRule="nonzero",b.globalAlpha=1,b.lineWidth=1,b.lineCap="butt",b.lineJoin="miter",b.miterLimit=10,b.globalCompositeOperation="source-over",b.font="10px sans-serif",b.setLineDash!==void 0&&(b.setLineDash([]),b.lineDashOffset=0),!ni){const{filter:e}=b;e!=="none"&&e!==""&&(b.filter="none")}}function f_(b,e){if(e)return!0;const i=ot.singularValueDecompose2dScale(b);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Ja.PDF_TO_CSS_UNITS);return i[0]<=n&&i[1]<=n}const Zx=["butt","round","square"],Wx=["miter","round","bevel"],$x={},g_={};var il,Yb,Vb;const Q0=class Q0{constructor(e,i,n,l,o,{optionalContentConfig:u,markedContentStack:d=null},f,g){w(this,il);this.ctx=e,this.current=new u_(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=n,this.canvasFactory=l,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=u,this.cachedCanvases=new Kx(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=g,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,i=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):i}beginDrawing({transform:e,viewport:i,transparency:n=!1,background:l=null}){const o=this.ctx.canvas.width,u=this.ctx.canvas.height,d=this.ctx.fillStyle;if(this.ctx.fillStyle=l||"#ffffff",this.ctx.fillRect(0,0,o,u),this.ctx.fillStyle=d,n){const f=this.cachedCanvases.getCanvas("transparent",o,u);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...ce(this.compositeCtx))}this.ctx.save(),kf(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=ce(this.ctx)}executeOperatorList(e,i,n,l){const o=e.argsArray,u=e.fnArray;let d=i||0;const f=o.length;if(f===d)return d;const g=f-d>o_&&typeof n=="function",m=g?Date.now()+Yx:0;let y=0;const v=this.commonObjs,E=this.objs;let x;for(;;){if(l!==void 0&&d===l.nextBreakPoint)return l.breakIt(d,n),d;if(x=u[d],x!==ms.dependency)this[x].apply(this,o[d]);else for(const C of o[d]){const O=C.startsWith("g_")?v:E;if(!O.has(C))return O.get(C,n),d}if(d++,d===f)return d;if(g&&++y>o_){if(Date.now()>m)return n(),d;y=0}}}endDrawing(){_(this,il,Yb).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const i of e.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);e.clear()}this._cachedBitmapsMap.clear(),_(this,il,Vb).call(this)}_scaleImage(e,i){const n=e.width??e.displayWidth,l=e.height??e.displayHeight;let o=Math.max(Math.hypot(i[0],i[1]),1),u=Math.max(Math.hypot(i[2],i[3]),1),d=n,f=l,g="prescale1",m,y;for(;o>2&&d>1||u>2&&f>1;){let v=d,E=f;o>2&&d>1&&(v=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),o/=d/v),u>2&&f>1&&(E=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,u/=f/E),m=this.cachedCanvases.getCanvas(g,v,E),y=m.context,y.clearRect(0,0,v,E),y.drawImage(e,0,0,d,f,0,0,v,E),e=m.canvas,d=v,f=E,g=g==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:d,paintHeight:f}}_createMaskCanvas(e){const i=this.ctx,{width:n,height:l}=e,o=this.current.fillColor,u=this.current.patternFill,d=ce(i);let f,g,m,y;if((e.bitmap||e.data)&&e.count>1){const J=e.bitmap||e.data.buffer;g=JSON.stringify(u?d:[d.slice(0,4),o]),f=this._cachedBitmapsMap.get(J),f||(f=new Map,this._cachedBitmapsMap.set(J,f));const nt=f.get(g);if(nt&&!u){const yt=Math.round(Math.min(d[0],d[2])+d[4]),at=Math.round(Math.min(d[1],d[3])+d[5]);return{canvas:nt,offsetX:yt,offsetY:at}}m=nt}m||(y=this.cachedCanvases.getCanvas("maskCanvas",n,l),d_(y.context,e));let v=ot.transform(d,[1/n,0,0,-1/l,0,0]);v=ot.transform(v,[1,0,0,1,0,-l]);const[E,x,C,O]=ot.getAxialAlignedBoundingBox([0,0,n,l],v),M=Math.round(C-E)||1,z=Math.round(O-x)||1,F=this.cachedCanvases.getCanvas("fillCanvas",M,z),I=F.context,q=E,G=x;I.translate(-q,-G),I.transform(...v),m||(m=this._scaleImage(y.canvas,vn(I)),m=m.img,f&&u&&f.set(g,m)),I.imageSmoothingEnabled=f_(ce(I),e.interpolate),Nf(I,m,0,0,m.width,m.height,0,0,n,l),I.globalCompositeOperation="source-in";const Q=ot.transform(vn(I),[1,0,0,1,-q,-G]);return I.fillStyle=u?o.getPattern(i,this,Q,ci.FILL):o,I.fillRect(0,0,n,l),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,F.canvas)),{canvas:F.canvas,offsetX:Math.round(q),offsetY:Math.round(G)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=Zx[e]}setLineJoin(e){this.ctx.lineJoin=Wx[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,i){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=i)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[i,n]of e)switch(i){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,l=this.cachedCanvases.getCanvas(n,e,i);this.suspendedCtx=this.ctx,this.ctx=l.context;const o=this.ctx;o.setTransform(...ce(this.suspendedCtx)),Ru(this.suspendedCtx,o),Vx(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ru(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,i,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,i,n,l){const o=l[0],u=l[1],d=l[2]-o,f=l[3]-u;d===0||f===0||(this.genericComposeSMask(i.context,n,d,f,i.subtype,i.backdrop,i.transferMap,o,u,i.offsetX,i.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,i,n,l,o,u,d,f,g,m,y){let v=e.canvas,E=f-m,x=g-y;if(u){const O=ot.makeHexColor(...u);if(E<0||x<0||E+n>v.width||x+l>v.height){const M=this.cachedCanvases.getCanvas("maskExtension",n,l),z=M.context;z.drawImage(v,-E,-x),z.globalCompositeOperation="destination-atop",z.fillStyle=O,z.fillRect(0,0,n,l),z.globalCompositeOperation="source-over",v=M.canvas,E=x=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const M=new Path2D;M.rect(E,x,n,l),e.clip(M),e.globalCompositeOperation="destination-atop",e.fillStyle=O,e.fillRect(E,x,n,l),e.restore()}}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),o==="Alpha"&&d?i.filter=this.filterFactory.addAlphaFilter(d):o==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(d));const C=new Path2D;C.rect(f,g,n,l),i.clip(C),i.globalCompositeOperation="destination-in",i.drawImage(v,E,x,n,l,f,g,n,l),i.restore()}save(){this.inSMaskMode?(Ru(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Ru(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,i,n,l,o,u){this.ctx.transform(e,i,n,l,o,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,i,n){const l=this.ctx,o=this.current;let u=o.x,d=o.y,f,g;const m=ce(l),y=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,v=y?n.slice(0):null;for(let E=0,x=0,C=e.length;E<C;E++)switch(e[E]|0){case ms.rectangle:u=i[x++],d=i[x++];const O=i[x++],M=i[x++],z=u+O,F=d+M;l.moveTo(u,d),O===0||M===0?l.lineTo(z,F):(l.lineTo(z,d),l.lineTo(z,F),l.lineTo(u,F)),y||o.updateRectMinMax(m,[u,d,z,F]),l.closePath();break;case ms.moveTo:u=i[x++],d=i[x++],l.moveTo(u,d),y||o.updatePathMinMax(m,u,d);break;case ms.lineTo:u=i[x++],d=i[x++],l.lineTo(u,d),y||o.updatePathMinMax(m,u,d);break;case ms.curveTo:f=u,g=d,u=i[x+4],d=i[x+5],l.bezierCurveTo(i[x],i[x+1],i[x+2],i[x+3],u,d),o.updateCurvePathMinMax(m,f,g,i[x],i[x+1],i[x+2],i[x+3],u,d,v),x+=6;break;case ms.curveTo2:f=u,g=d,l.bezierCurveTo(u,d,i[x],i[x+1],i[x+2],i[x+3]),o.updateCurvePathMinMax(m,f,g,u,d,i[x],i[x+1],i[x+2],i[x+3],v),u=i[x+2],d=i[x+3],x+=4;break;case ms.curveTo3:f=u,g=d,u=i[x+2],d=i[x+3],l.bezierCurveTo(i[x],i[x+1],u,d,u,d),o.updateCurvePathMinMax(m,f,g,i[x],i[x+1],u,d,u,d,v),x+=4;break;case ms.closePath:l.closePath();break}y&&o.updateScalingPathMinMax(m,v),o.setCurrentPoint(u,d)}closePath(){this.ctx.closePath()}stroke(e=!0){const i=this.ctx,n=this.current.strokeColor;i.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(i.save(),i.strokeStyle=n.getPattern(i,this,vn(i),ci.STROKE),this.rescaleAndStroke(!1),i.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),i.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const i=this.ctx,n=this.current.fillColor,l=this.current.patternFill;let o=!1;l&&(i.save(),i.fillStyle=n.getPattern(i,this,vn(i),ci.FILL),o=!0);const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(i.fill("evenodd"),this.pendingEOFill=!1):i.fill()),o&&i.restore(),e&&this.consumePath(u)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=$x}eoClip(){this.pendingClip=g_}beginText(){this.current.textMatrix=S_,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,i=this.ctx;if(e===void 0){i.beginPath();return}i.save(),i.beginPath();for(const n of e)i.setTransform(...n.transform),i.translate(n.x,n.y),n.addToPath(i,n.fontSize);i.restore(),i.clip(),i.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,i){var m;const n=this.commonObjs.get(e),l=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(l.fontMatrix=n.fontMatrix||bb,(l.fontMatrix[0]===0||l.fontMatrix[3]===0)&&xt("Invalid font matrix for font "+e),i<0?(i=-i,l.fontDirection=-1):l.fontDirection=1,this.current.font=n,this.current.fontSize=i,n.isType3Font)return;const o=n.loadedName||"sans-serif",u=((m=n.systemFontInfo)==null?void 0:m.css)||`"${o}", ${n.fallbackName}`;let d="normal";n.black?d="900":n.bold&&(d="bold");const f=n.italic?"italic":"normal";let g=i;i<l_?g=l_:i>r_&&(g=r_),this.current.fontSizeScale=i/g,this.ctx.font=`${f} ${d} ${g}px ${u}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,i){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(e,i){this.setLeading(-i),this.moveText(e,i)}setTextMatrix(e,i,n,l,o,u){this.current.textMatrix=[e,i,n,l,o,u],this.current.textMatrixScale=Math.hypot(e,i),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,i,n,l){const o=this.ctx,u=this.current,d=u.font,f=u.textRenderingMode,g=u.fontSize/u.fontSizeScale,m=f&$e.FILL_STROKE_MASK,y=!!(f&$e.ADD_TO_PATH_FLAG),v=u.patternFill&&!d.missingFile;let E;(d.disableFontFace||y||v)&&(E=d.getPathGenerator(this.commonObjs,e)),d.disableFontFace||v?(o.save(),o.translate(i,n),o.beginPath(),E(o,g),l&&o.setTransform(...l),(m===$e.FILL||m===$e.FILL_STROKE)&&o.fill(),(m===$e.STROKE||m===$e.FILL_STROKE)&&o.stroke(),o.restore()):((m===$e.FILL||m===$e.FILL_STROKE)&&o.fillText(e,i,n),(m===$e.STROKE||m===$e.FILL_STROKE)&&o.strokeText(e,i,n)),y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ce(o),x:i,y:n,fontSize:g,addToPath:E})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const i=e.getImageData(0,0,10,10).data;let n=!1;for(let l=3;l<i.length;l+=4)if(i[l]>0&&i[l]<255){n=!0;break}return zt(this,"isFontSubpixelAAEnabled",n)}showText(e){const i=this.current,n=i.font;if(n.isType3Font)return this.showType3Text(e);const l=i.fontSize;if(l===0)return;const o=this.ctx,u=i.fontSizeScale,d=i.charSpacing,f=i.wordSpacing,g=i.fontDirection,m=i.textHScale*g,y=e.length,v=n.vertical,E=v?1:-1,x=n.defaultVMetrics,C=l*i.fontMatrix[0],O=i.textRenderingMode===$e.FILL&&!n.disableFontFace&&!i.patternFill;o.save(),o.transform(...i.textMatrix),o.translate(i.x,i.y+i.textRise),g>0?o.scale(m,-1):o.scale(m,1);let M;if(i.patternFill){o.save();const G=i.fillColor.getPattern(o,this,vn(o),ci.FILL);M=ce(o),o.restore(),o.fillStyle=G}let z=i.lineWidth;const F=i.textMatrixScale;if(F===0||z===0){const G=i.textRenderingMode&$e.FILL_STROKE_MASK;(G===$e.STROKE||G===$e.FILL_STROKE)&&(z=this.getSinglePixelWidth())}else z/=F;if(u!==1&&(o.scale(u,u),z/=u),o.lineWidth=z,n.isInvalidPDFjsFont){const G=[];let Q=0;for(const J of e)G.push(J.unicode),Q+=J.width;o.fillText(G.join(""),0,0),i.x+=Q*C*m,o.restore(),this.compose();return}let I=0,q;for(q=0;q<y;++q){const G=e[q];if(typeof G=="number"){I+=E*G*l/1e3;continue}let Q=!1;const J=(G.isSpace?f:0)+d,nt=G.fontChar,yt=G.accent;let at,gt,Tt=G.width;if(v){const pt=G.vmetric||x,P=-(G.vmetric?pt[1]:Tt*.5)*C,X=pt[2]*C;Tt=pt?-pt[0]:Tt,at=P/u,gt=(I+X)/u}else at=I/u,gt=0;if(n.remeasure&&Tt>0){const pt=o.measureText(nt).width*1e3/l*u;if(Tt<pt&&this.isFontSubpixelAAEnabled){const P=Tt/pt;Q=!0,o.save(),o.scale(P,1),at/=P}else Tt!==pt&&(at+=(Tt-pt)/2e3*l/u)}if(this.contentVisible&&(G.isInFont||n.missingFile)){if(O&&!yt)o.fillText(nt,at,gt);else if(this.paintChar(nt,at,gt,M),yt){const pt=at+l*yt.offset.x/u,P=gt-l*yt.offset.y/u;this.paintChar(yt.fontChar,pt,P,M)}}const Ot=v?Tt*C-J*g:Tt*C+J*g;I+=Ot,Q&&o.restore()}v?i.y-=I:i.x+=I*m,o.restore(),this.compose()}showType3Text(e){const i=this.ctx,n=this.current,l=n.font,o=n.fontSize,u=n.fontDirection,d=l.vertical?1:-1,f=n.charSpacing,g=n.wordSpacing,m=n.textHScale*u,y=n.fontMatrix||bb,v=e.length,E=n.textRenderingMode===$e.INVISIBLE;let x,C,O,M;if(!(E||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),i.transform(...n.textMatrix),i.translate(n.x,n.y),i.scale(m,u),x=0;x<v;++x){if(C=e[x],typeof C=="number"){M=d*C*o/1e3,this.ctx.translate(M,0),n.x+=M*m;continue}const z=(C.isSpace?g:0)+f,F=l.charProcOperatorList[C.operatorListId];if(!F){xt(`Type3 character "${C.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=C,this.save(),i.scale(o,o),i.transform(...y),this.executeOperatorList(F),this.restore()),O=ot.applyTransform([C.width,0],y)[0]*o+z,i.translate(O,0),n.x+=O*m}i.restore(),this.processingType3=null}}setCharWidth(e,i){}setCharWidthAndBounds(e,i,n,l,o,u){this.ctx.rect(n,l,o-n,u-l),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let i;if(e[0]==="TilingPattern"){const n=e[1],l=this.baseTransform||ce(this.ctx),o={createCanvasGraphics:u=>new Q0(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};i=new Xb(e,n,this.ctx,o,l)}else i=this._getPattern(e[1],e[2]);return i}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,i,n){this.ctx.strokeStyle=this.current.strokeColor=ot.makeHexColor(e,i,n)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,i,n){this.ctx.fillStyle=this.current.fillColor=ot.makeHexColor(e,i,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,i=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=jx(this.getObject(e)),this.cachedPatterns.set(e,n)),i&&(n.matrix=i),n}shadingFill(e){if(!this.contentVisible)return;const i=this.ctx;this.save();const n=this._getPattern(e);i.fillStyle=n.getPattern(i,this,vn(i),ci.SHADING);const l=vn(i);if(l){const{width:o,height:u}=i.canvas,[d,f,g,m]=ot.getAxialAlignedBoundingBox([0,0,o,u],l);this.ctx.fillRect(d,f,g-d,m-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ie("Should not call beginInlineImage")}beginImageData(){ie("Should not call beginImageData")}paintFormXObjectBegin(e,i){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=ce(this.ctx),i)){const n=i[2]-i[0],l=i[3]-i[1];this.ctx.rect(i[0],i[1],n,l),this.current.updateRectMinMax(ce(this.ctx),i),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||Ug("TODO: Support non-isolated groups."),e.knockout&&xt("Knockout groups not supported.");const n=ce(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let l=ot.getAxialAlignedBoundingBox(e.bbox,ce(i));const o=[0,0,i.canvas.width,i.canvas.height];l=ot.intersect(l,o)||[0,0,0,0];const u=Math.floor(l[0]),d=Math.floor(l[1]),f=Math.max(Math.ceil(l[2])-u,1),g=Math.max(Math.ceil(l[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,g]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(m,f,g),v=y.context;v.translate(-u,-d),v.transform(...n),e.smask?this.smaskStack.push({canvas:y.canvas,context:v,offsetX:u,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(i.setTransform(1,0,0,1,0,0),i.translate(u,d),i.save()),Ru(i,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const l=ce(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...l);const o=ot.getAxialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],l);this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,i,n,l,o){if(_(this,il,Yb).call(this),kf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const u=i[2]-i[0],d=i[3]-i[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=i[0],n[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=u,i[3]=d;const[f,g]=ot.singularValueDecompose2dScale(ce(this.ctx)),{viewportScale:m}=this,y=Math.ceil(u*this.outputScaleX*m),v=Math.ceil(d*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(y,v);const{canvas:E,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(e,E),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(f,0,0,-g,0,d*g),kf(this.ctx)}else kf(this.ctx),this.endPath(),this.ctx.rect(i[0],i[1],u,d),this.ctx.clip(),this.ctx.beginPath()}this.current=new u_(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...l)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),_(this,il,Vb).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const i=e.count;e=this.getObject(e.data,e),e.count=i;const n=this.ctx,l=this.processingType3;if(l&&(l.compiled===void 0&&(l.compiled=Qx(e)),l.compiled)){l.compiled(n);return}const o=this._createMaskCanvas(e),u=o.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(u,o.offsetX,o.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,i,n=0,l=0,o,u){if(!this.contentVisible)return;e=this.getObject(e.data,e);const d=this.ctx;d.save();const f=ce(d);d.transform(i,n,l,o,0,0);const g=this._createMaskCanvas(e);d.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]);for(let m=0,y=u.length;m<y;m+=2){const v=ot.transform(f,[i,n,l,o,u[m],u[m+1]]),[E,x]=ot.applyTransform([0,0],v);d.drawImage(g.canvas,E,x)}d.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const i=this.ctx,n=this.current.fillColor,l=this.current.patternFill;for(const o of e){const{data:u,width:d,height:f,transform:g}=o,m=this.cachedCanvases.getCanvas("maskCanvas",d,f),y=m.context;y.save();const v=this.getObject(u,o);d_(y,v),y.globalCompositeOperation="source-in",y.fillStyle=l?n.getPattern(y,this,vn(i),ci.FILL):n,y.fillRect(0,0,d,f),y.restore(),i.save(),i.transform(...g),i.scale(1,-1),Nf(i,m.canvas,0,0,d,f,0,-1,1,1),i.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){xt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(i)}paintImageXObjectRepeat(e,i,n,l){if(!this.contentVisible)return;const o=this.getObject(e);if(!o){xt("Dependent image isn't ready yet");return}const u=o.width,d=o.height,f=[];for(let g=0,m=l.length;g<m;g+=2)f.push({transform:[i,0,0,n,l[g],l[g+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(o,f)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:i,width:n,height:l}=e,o=this.cachedCanvases.getCanvas("inlineImage",n,l),u=o.context;return u.filter=this.current.transferMaps,u.drawImage(i,0,0),u.filter="none",o.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const i=e.width,n=e.height,l=this.ctx;if(this.save(),!ni){const{filter:d}=l;d!=="none"&&d!==""&&(l.filter="none")}l.scale(1/i,-1/n);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const f=this.cachedCanvases.getCanvas("inlineImage",i,n).context;h_(f,e),o=this.applyTransferMapsToCanvas(f)}const u=this._scaleImage(o,vn(l));l.imageSmoothingEnabled=f_(ce(l),e.interpolate),Nf(l,u.img,0,0,u.paintWidth,u.paintHeight,0,-n,i,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,i){if(!this.contentVisible)return;const n=this.ctx;let l;if(e.bitmap)l=e.bitmap;else{const o=e.width,u=e.height,f=this.cachedCanvases.getCanvas("inlineImage",o,u).context;h_(f,e),l=this.applyTransferMapsToCanvas(f)}for(const o of i)n.save(),n.transform(...o.transform),n.scale(1,-1),Nf(n,l,o.x,o.y,o.w,o.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,i){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,i){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(i||(this.pendingClip===g_?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ce(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const i=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),l=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,l)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:i,b:n,c:l,d:o}=this.ctx.getTransform();let u,d;if(n===0&&l===0){const f=Math.abs(i),g=Math.abs(o);if(f===g)if(e===0)u=d=1/f;else{const m=f*e;u=d=m<1?1/m:1}else if(e===0)u=1/f,d=1/g;else{const m=f*e,y=g*e;u=m<1?1/m:1,d=y<1?1/y:1}}else{const f=Math.abs(i*o-n*l),g=Math.hypot(i,n),m=Math.hypot(l,o);if(e===0)u=m/f,d=g/f;else{const y=e*f;u=m>y?m/y:1,d=g>y?g/y:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=d}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:i}=this,{lineWidth:n}=this.current,[l,o]=this.getScaleForStroking();if(i.lineWidth=n||1,l===1&&o===1){i.stroke();return}const u=i.getLineDash();if(e&&i.save(),i.scale(l,o),u.length>0){const d=Math.max(l,o);i.setLineDash(u.map(f=>f/d)),i.lineDashOffset/=d}i.stroke(),e&&i.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};il=new WeakSet,Yb=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Vb=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const i=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}};let Mo=Q0;for(const b in ms)Mo.prototype[b]!==void 0&&(Mo.prototype[ms[b]]=Mo.prototype[b]);var vh,Ah;class Vn{static get workerPort(){return c(this,vh)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");S(this,vh,e)}static get workerSrc(){return c(this,Ah)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");S(this,Ah,e)}}vh=new WeakMap,Ah=new WeakMap,w(Vn,vh,null),w(Vn,Ah,"");const Hf={DATA:1,ERROR:2},ve={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ki(b){switch(b instanceof Error||typeof b=="object"&&b!==null||ie('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),b.name){case"AbortException":return new Dr(b.message);case"MissingPDFException":return new Rr(b.message);case"PasswordException":return new yb(b.message,b.code);case"UnexpectedResponseException":return new Bg(b.message,b.status);case"UnknownErrorException":return new vb(b.message,b.details);default:return new vb(b.message,b.toString())}}var jo,us,aE,lE,rE,Yf;class Uu{constructor(e,i,n){w(this,us);w(this,jo,new AbortController);this.sourceName=e,this.targetName=i,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",_(this,us,aE).bind(this),{signal:c(this,jo).signal})}on(e,i){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=i}send(e,i,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:i},n)}sendWithPromise(e,i,n){const l=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[l]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:l,data:i},n)}catch(u){o.reject(u)}return o.promise}sendWithStream(e,i,n,l){const o=this.streamId++,u=this.sourceName,d=this.targetName,f=this.comObj;return new ReadableStream({start:g=>{const m=Promise.withResolvers();return this.streamControllers[o]={controller:g,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:u,targetName:d,action:e,streamId:o,data:i,desiredSize:g.desiredSize},l),m.promise},pull:g=>{const m=Promise.withResolvers();return this.streamControllers[o].pullCall=m,f.postMessage({sourceName:u,targetName:d,stream:ve.PULL,streamId:o,desiredSize:g.desiredSize}),m.promise},cancel:g=>{Re(g instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[o].cancelCall=m,this.streamControllers[o].isClosed=!0,f.postMessage({sourceName:u,targetName:d,stream:ve.CANCEL,streamId:o,reason:ki(g)}),m.promise}},n)}destroy(){var e;(e=c(this,jo))==null||e.abort(),S(this,jo,null)}}jo=new WeakMap,us=new WeakSet,aE=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){_(this,us,rE).call(this,e);return}if(e.callback){const n=e.callbackId,l=this.callbackCapabilities[n];if(!l)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Hf.DATA)l.resolve(e.data);else if(e.callback===Hf.ERROR)l.reject(ki(e.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[e.action];if(!i)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,l=e.sourceName,o=this.comObj;new Promise(function(u){u(i(e.data))}).then(function(u){o.postMessage({sourceName:n,targetName:l,callback:Hf.DATA,callbackId:e.callbackId,data:u})},function(u){o.postMessage({sourceName:n,targetName:l,callback:Hf.ERROR,callbackId:e.callbackId,reason:ki(u)})});return}if(e.streamId){_(this,us,lE).call(this,e);return}i(e.data)},lE=function(e){const i=e.streamId,n=this.sourceName,l=e.sourceName,o=this.comObj,u=this,d=this.actionHandler[e.action],f={enqueue(g,m=1,y){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=m,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:l,stream:ve.ENQUEUE,streamId:i,chunk:g},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:l,stream:ve.CLOSE,streamId:i}),delete u.streamSinks[i])},error(g){Re(g instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:l,stream:ve.ERROR,streamId:i,reason:ki(g)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[i]=f,new Promise(function(g){g(d(e.data,f))}).then(function(){o.postMessage({sourceName:n,targetName:l,stream:ve.START_COMPLETE,streamId:i,success:!0})},function(g){o.postMessage({sourceName:n,targetName:l,stream:ve.START_COMPLETE,streamId:i,reason:ki(g)})})},rE=function(e){const i=e.streamId,n=this.sourceName,l=e.sourceName,o=this.comObj,u=this.streamControllers[i],d=this.streamSinks[i];switch(e.stream){case ve.START_COMPLETE:e.success?u.startCall.resolve():u.startCall.reject(ki(e.reason));break;case ve.PULL_COMPLETE:e.success?u.pullCall.resolve():u.pullCall.reject(ki(e.reason));break;case ve.PULL:if(!d){o.postMessage({sourceName:n,targetName:l,stream:ve.PULL_COMPLETE,streamId:i,success:!0});break}d.desiredSize<=0&&e.desiredSize>0&&d.sinkCapability.resolve(),d.desiredSize=e.desiredSize,new Promise(function(f){var g;f((g=d.onPull)==null?void 0:g.call(d))}).then(function(){o.postMessage({sourceName:n,targetName:l,stream:ve.PULL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:n,targetName:l,stream:ve.PULL_COMPLETE,streamId:i,reason:ki(f)})});break;case ve.ENQUEUE:if(Re(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(e.chunk);break;case ve.CLOSE:if(Re(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),_(this,us,Yf).call(this,u,i);break;case ve.ERROR:Re(u,"error should have stream controller"),u.controller.error(ki(e.reason)),_(this,us,Yf).call(this,u,i);break;case ve.CANCEL_COMPLETE:e.success?u.cancelCall.resolve():u.cancelCall.reject(ki(e.reason)),_(this,us,Yf).call(this,u,i);break;case ve.CANCEL:if(!d)break;new Promise(function(f){var g;f((g=d.onCancel)==null?void 0:g.call(d,ki(e.reason)))}).then(function(){o.postMessage({sourceName:n,targetName:l,stream:ve.CANCEL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:n,targetName:l,stream:ve.CANCEL_COMPLETE,streamId:i,reason:ki(f)})}),d.sinkCapability.reject(ki(e.reason)),d.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}},Yf=async function(e,i){var n,l,o;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(l=e.pullCall)==null?void 0:l.promise,(o=e.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[i]};var Vl,Sh;class Jx{constructor({parsedData:e,rawData:i}){w(this,Vl);w(this,Sh);S(this,Vl,e),S(this,Sh,i)}getRaw(){return c(this,Sh)}get(e){return c(this,Vl).get(e)??null}getAll(){return H0(c(this,Vl))}has(e){return c(this,Vl).has(e)}}Vl=new WeakMap,Sh=new WeakMap;const Eo=Symbol("INTERNAL");var _h,Eh,Th,Xo;class tC{constructor(e,{name:i,intent:n,usage:l,rbGroups:o}){w(this,_h,!1);w(this,Eh,!1);w(this,Th,!1);w(this,Xo,!0);S(this,_h,!!(e&Gi.DISPLAY)),S(this,Eh,!!(e&Gi.PRINT)),this.name=i,this.intent=n,this.usage=l,this.rbGroups=o}get visible(){if(c(this,Th))return c(this,Xo);if(!c(this,Xo))return!1;const{print:e,view:i}=this.usage;return c(this,_h)?(i==null?void 0:i.viewState)!=="OFF":c(this,Eh)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,i,n=!1){e!==Eo&&ie("Internal method `_setVisible` called."),S(this,Th,n),S(this,Xo,i)}}_h=new WeakMap,Eh=new WeakMap,Th=new WeakMap,Xo=new WeakMap;var Fa,Yt,Yo,Vo,wh,Kb;class eC{constructor(e,i=Gi.DISPLAY){w(this,wh);w(this,Fa,null);w(this,Yt,new Map);w(this,Yo,null);w(this,Vo,null);if(this.renderingIntent=i,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,S(this,Vo,e.order);for(const n of e.groups)c(this,Yt).set(n.id,new tC(i,n));if(e.baseState==="OFF")for(const n of c(this,Yt).values())n._setVisible(Eo,!1);for(const n of e.on)c(this,Yt).get(n)._setVisible(Eo,!0);for(const n of e.off)c(this,Yt).get(n)._setVisible(Eo,!1);S(this,Yo,this.getHash())}}isVisible(e){if(c(this,Yt).size===0)return!0;if(!e)return Ug("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,Yt).has(e.id)?c(this,Yt).get(e.id).visible:(xt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return _(this,wh,Kb).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const i of e.ids){if(!c(this,Yt).has(i))return xt(`Optional content group not found: ${i}`),!0;if(c(this,Yt).get(i).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const i of e.ids){if(!c(this,Yt).has(i))return xt(`Optional content group not found: ${i}`),!0;if(!c(this,Yt).get(i).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const i of e.ids){if(!c(this,Yt).has(i))return xt(`Optional content group not found: ${i}`),!0;if(!c(this,Yt).get(i).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const i of e.ids){if(!c(this,Yt).has(i))return xt(`Optional content group not found: ${i}`),!0;if(c(this,Yt).get(i).visible)return!1}return!0}return xt(`Unknown optional content policy ${e.policy}.`),!0}return xt(`Unknown group type ${e.type}.`),!0}setVisibility(e,i=!0,n=!0){var o;const l=c(this,Yt).get(e);if(!l){xt(`Optional content group not found: ${e}`);return}if(n&&i&&l.rbGroups.length)for(const u of l.rbGroups)for(const d of u)d!==e&&((o=c(this,Yt).get(d))==null||o._setVisible(Eo,!1,!0));l._setVisible(Eo,!!i,!0),S(this,Fa,null)}setOCGState({state:e,preserveRB:i}){let n;for(const l of e){switch(l){case"ON":case"OFF":case"Toggle":n=l;continue}const o=c(this,Yt).get(l);if(o)switch(n){case"ON":this.setVisibility(l,!0,i);break;case"OFF":this.setVisibility(l,!1,i);break;case"Toggle":this.setVisibility(l,!o.visible,i);break}}S(this,Fa,null)}get hasInitialVisibility(){return c(this,Yo)===null||this.getHash()===c(this,Yo)}getOrder(){return c(this,Yt).size?c(this,Vo)?c(this,Vo).slice():[...c(this,Yt).keys()]:null}getGroups(){return c(this,Yt).size>0?H0(c(this,Yt)):null}getGroup(e){return c(this,Yt).get(e)||null}getHash(){if(c(this,Fa)!==null)return c(this,Fa);const e=new K_;for(const[i,n]of c(this,Yt))e.update(`${i}:${n.visible}`);return S(this,Fa,e.hexdigest())}}Fa=new WeakMap,Yt=new WeakMap,Yo=new WeakMap,Vo=new WeakMap,wh=new WeakSet,Kb=function(e){const i=e.length;if(i<2)return!0;const n=e[0];for(let l=1;l<i;l++){const o=e[l];let u;if(Array.isArray(o))u=_(this,wh,Kb).call(this,o);else if(c(this,Yt).has(o))u=c(this,Yt).get(o).visible;else return xt(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return n==="And"};class iC{constructor(e,{disableRange:i=!1,disableStream:n=!1}){Re(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:l,initialData:o,progressiveDone:u,contentDispositionFilename:d}=e;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=d,(o==null?void 0:o.length)>0){const f=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!i,this._contentLength=l,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((f,g)=>{this._onReceiveData({begin:f,chunk:g})}),e.addProgressListener((f,g)=>{this._onProgress({loaded:f,total:g})}),e.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:i}){const n=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const l=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(n),!0)});Re(l,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var i,n,l,o;e.total===void 0?(n=(i=this._rangeReaders[0])==null?void 0:i.onProgress)==null||n.call(i,{loaded:e.loaded}):(o=(l=this._fullRequestReader)==null?void 0:l.onProgress)==null||o.call(l,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const i=this._rangeReaders.indexOf(e);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){Re(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new sC(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,i){if(i<=this._progressiveDataLength)return null;const n=new nC(this,e,i);return this._pdfDataRangeTransport.requestDataRange(e,i),this._rangeReaders.push(n),n}cancelAllRequests(e){var i;(i=this._fullRequestReader)==null||i.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class sC{constructor(e,i,n=!1,l=null){this._stream=e,this._done=n||!1,this._filename=U0(l)?l:null,this._queuedChunks=i||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class nC{constructor(e,i,n){this._stream=e,this._begin=i,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function aC(b){let e=!0,i=n("filename\\*","i").exec(b);if(i){i=i[1];let m=d(i);return m=unescape(m),m=f(m),m=g(m),o(m)}if(i=u(b),i){const m=g(i);return o(m)}if(i=n("filename","i").exec(b),i){i=i[1];let m=d(i);return m=g(m),o(m)}function n(m,y){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function l(m,y){if(m){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const v=new TextDecoder(m,{fatal:!0}),E=Pg(y);y=v.decode(E),e=!1}catch{}}return y}function o(m){return e&&/[\x80-\xff]/.test(m)&&(m=l("utf-8",m),e&&(m=l("iso-8859-1",m))),m}function u(m){const y=[];let v;const E=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=E.exec(m))!==null;){let[,C,O,M]=v;if(C=parseInt(C,10),C in y){if(C===0)break;continue}y[C]=[O,M]}const x=[];for(let C=0;C<y.length&&C in y;++C){let[O,M]=y[C];M=d(M),O&&(M=unescape(M),C===0&&(M=f(M))),x.push(M)}return x.join("")}function d(m){if(m.startsWith('"')){const y=m.slice(1).split('\\"');for(let v=0;v<y.length;++v){const E=y[v].indexOf('"');E!==-1&&(y[v]=y[v].slice(0,E),y.length=v+1),y[v]=y[v].replaceAll(/\\(.)/g,"$1")}m=y.join('"')}return m}function f(m){const y=m.indexOf("'");if(y===-1)return m;const v=m.slice(0,y),x=m.slice(y+1).replace(/^[^']*'/,"");return l(v,x)}function g(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,v,E,x){if(E==="q"||E==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,O){return String.fromCharCode(parseInt(O,16))}),l(v,x);try{x=atob(x)}catch{}return l(v,x)})}return""}function G0(b,e){const i=new Headers;if(!b||!e||typeof e!="object")return i;for(const n in e){const l=e[n];l!==void 0&&i.append(n,l)}return i}function j0({responseHeaders:b,isHttp:e,rangeChunkSize:i,disableRange:n}){const l={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(b.get("Content-Length"),10);return!Number.isInteger(o)||(l.suggestedLength=o,o<=2*i)||n||!e||b.get("Accept-Ranges")!=="bytes"||(b.get("Content-Encoding")||"identity")!=="identity"||(l.allowRangeRequests=!0),l}function X0(b){const e=b.get("Content-Disposition");if(e){let i=aC(e);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if(U0(i))return i}return null}function Gg(b,e){return b===404||b===0&&e.startsWith("file:")?new Rr('Missing PDF "'+e+'".'):new Bg(`Unexpected server response (${b}) while retrieving PDF "${e}".`,b)}function oE(b){return b===200||b===206}function cE(b,e,i){return{method:"GET",headers:b,signal:i.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function uE(b){return b instanceof Uint8Array?b.buffer:b instanceof ArrayBuffer?b:(xt(`getArrayBuffer - unexpected data format: ${b}`),new Uint8Array(b).buffer)}class p_{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=G0(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Re(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new lC(this),this._fullRequestReader}getRangeReader(e,i){if(i<=this._progressiveDataLength)return null;const n=new rC(this,e,i);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var i;(i=this._fullRequestReader)==null||i.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class lC{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const i=e.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange;const n=new Headers(e.headers),l=i.url;fetch(l,cE(n,this._withCredentials,this._abortController)).then(o=>{if(!oE(o.status))throw Gg(o.status,l);this._reader=o.body.getReader(),this._headersCapability.resolve();const u=o.headers,{allowRangeRequests:d,suggestedLength:f}=j0({responseHeaders:u,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=f||this._contentLength,this._filename=X0(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Dr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:i}=await this._reader.read();return i?{value:e,done:i}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:uE(e),done:!1})}cancel(e){var i;(i=this._reader)==null||i.cancel(e),this._abortController.abort()}}class rC{constructor(e,i,n){this._stream=e,this._reader=null,this._loaded=0;const l=e.source;this._withCredentials=l.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!l.disableStream,this._abortController=new AbortController;const o=new Headers(e.headers);o.append("Range",`bytes=${i}-${n-1}`);const u=l.url;fetch(u,cE(o,this._withCredentials,this._abortController)).then(d=>{if(!oE(d.status))throw Gg(d.status,u);this._readCapability.resolve(),this._reader=d.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:i}=await this._reader.read();return i?{value:e,done:i}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:uE(e),done:!1})}cancel(e){var i;(i=this._reader)==null||i.cancel(e),this._abortController.abort()}}const pb=200,mb=206;function oC(b){const e=b.response;return typeof e!="string"?e:Pg(e).buffer}class cC{constructor({url:e,httpHeaders:i,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=G0(this.isHttp,i),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,i,n){const l={begin:e,end:i};for(const o in n)l[o]=n[o];return this.request(l)}requestFull(e){return this.request(e)}request(e){const i=new XMLHttpRequest,n=this.currXhrId++,l=this.pendingRequests[n]={xhr:i};i.open("GET",this.url),i.withCredentials=this.withCredentials;for(const[o,u]of this.headers)i.setRequestHeader(o,u);return this.isHttp&&"begin"in e&&"end"in e?(i.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),l.expectedStatus=mb):l.expectedStatus=pb,i.responseType="arraybuffer",e.onError&&(i.onerror=function(o){e.onError(i.status)}),i.onreadystatechange=this.onStateChange.bind(this,n),i.onprogress=this.onProgress.bind(this,n),l.onHeadersReceived=e.onHeadersReceived,l.onDone=e.onDone,l.onError=e.onError,l.onProgress=e.onProgress,i.send(null),n}onProgress(e,i){var l;const n=this.pendingRequests[e];n&&((l=n.onProgress)==null||l.call(n,i))}onStateChange(e,i){var f,g,m;const n=this.pendingRequests[e];if(!n)return;const l=n.xhr;if(l.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),l.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],l.status===0&&this.isHttp){(f=n.onError)==null||f.call(n,l.status);return}const o=l.status||pb;if(!(o===pb&&n.expectedStatus===mb)&&o!==n.expectedStatus){(g=n.onError)==null||g.call(n,l.status);return}const d=oC(l);if(o===mb){const y=l.getResponseHeader("Content-Range"),v=/bytes (\d+)-(\d+)\/(\d+)/.exec(y);n.onDone({begin:parseInt(v[1],10),chunk:d})}else d?n.onDone({begin:0,chunk:d}):(m=n.onError)==null||m.call(n,l.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const i=this.pendingRequests[e].xhr;delete this.pendingRequests[e],i.abort()}}class uC{constructor(e){this._source=e,this._manager=new cC(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const i=this._rangeRequestReaders.indexOf(e);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return Re(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new hC(this._manager,this._source),this._fullRequestReader}getRangeReader(e,i){const n=new dC(this._manager,e,i);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var i;(i=this._fullRequestReader)==null||i.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class hC{constructor(e,i){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=i.url,this._fullRequestId=e.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._contentLength=i.length,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,i=this._manager.getRequestXhr(e),n=new Headers(i.getAllResponseHeaders().trim().split(/[\r\n]+/).map(u=>{const[d,...f]=u.split(": ");return[d,f.join(": ")]})),{allowRangeRequests:l,suggestedLength:o}=j0({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=X0(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Gg(e,this._url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var i;(i=this.onProgress)==null||i.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class dC{constructor(e,i,n){this._manager=e;const l={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(i,n,l),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const i=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:i,done:!1}):this._queuedChunk=i,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Gg(e,this._url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var i;this.isStreamingSupported||(i=this.onProgress)==null||i.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const fC=/^[a-z][a-z0-9\-+.]+:/i;function gC(b){if(fC.test(b))return new URL(b);const e=tl.get("url");return new URL(e.pathToFileURL(b))}function hE(b,e,i){return b.protocol==="http:"?tl.get("http").request(b,{headers:e},i):tl.get("https").request(b,{headers:e},i)}class pC{constructor(e){this.source=e,this.url=gC(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=G0(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Re(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new yC(this):new mC(this),this._fullRequestReader}getRangeReader(e,i){if(i<=this._progressiveDataLength)return null;const n=this.isFsUrl?new vC(this,e,i):new bC(this,e,i);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var i;(i=this._fullRequestReader)==null||i.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class dE{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=e.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Dr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class fE{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class mC extends dE{constructor(e){super(e);const i=Object.fromEntries(e.headers),n=l=>{if(l.statusCode===404){const f=new Rr(`Missing PDF "${this._url}".`);this._storedError=f,this._headersCapability.reject(f);return}this._headersCapability.resolve(),this._setReadableStream(l);const o=new Headers(this._readableStream.headers),{allowRangeRequests:u,suggestedLength:d}=j0({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=X0(o)};this._request=hE(this._url,i,n),this._request.on("error",l=>{this._storedError=l,this._headersCapability.reject(l)}),this._request.end()}}class bC extends fE{constructor(e,i,n){super(e);const l=Object.fromEntries(e.headers);l.Range=`bytes=${i}-${n-1}`;const o=u=>{if(u.statusCode===404){const d=new Rr(`Missing PDF "${this._url}".`);this._storedError=d;return}this._setReadableStream(u)};this._request=hE(this._url,l,o),this._request.on("error",u=>{this._storedError=u}),this._request.end()}}class yC extends dE{constructor(e){super(e);const i=tl.get("fs");i.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new Rr(`Missing PDF "${this._url}".`)),this._storedError=n,this._headersCapability.reject(n)})}}class vC extends fE{constructor(e,i,n){super(e);const l=tl.get("fs");this._setReadableStream(l.createReadStream(this._url,{start:i,end:n-1}))}}const AC=1e5,yi=30,SC=.8;var A_,Ua,Si,xh,Ch,Kl,Rn,Mh,Rh,Ql,Ko,Qo,Ba,Zo,Dh,Wo,Zl,Oh,Lh,Wl,$l,Nh,Pa,$o,Wn,gE,pE,Qb,Xi,Vf,Zb,mE,bE;const we=class we{constructor({textContentSource:e,container:i,viewport:n}){w(this,Wn);w(this,Ua,Promise.withResolvers());w(this,Si,null);w(this,xh,!1);w(this,Ch,!!((A_=globalThis.FontInspector)!=null&&A_.enabled));w(this,Kl,null);w(this,Rn,null);w(this,Mh,0);w(this,Rh,0);w(this,Ql,null);w(this,Ko,null);w(this,Qo,0);w(this,Ba,0);w(this,Zo,Object.create(null));w(this,Dh,[]);w(this,Wo,null);w(this,Zl,[]);w(this,Oh,new WeakMap);w(this,Lh,null);var f;if(e instanceof ReadableStream)S(this,Wo,e);else if(typeof e=="object")S(this,Wo,new ReadableStream({start(g){g.enqueue(e),g.close()}}));else throw new Error('No "textContentSource" parameter specified.');S(this,Si,S(this,Ko,i)),S(this,Ba,n.scale*(globalThis.devicePixelRatio||1)),S(this,Qo,n.rotation),S(this,Rn,{div:null,properties:null,ctx:null});const{pageWidth:l,pageHeight:o,pageX:u,pageY:d}=n.rawDims;S(this,Lh,[1,0,0,-1,-u,d+o]),S(this,Rh,l),S(this,Mh,o),_(f=we,Xi,mE).call(f),Tr(i,n),c(this,Ua).promise.finally(()=>{c(we,$o).delete(this),S(this,Rn,null),S(this,Zo,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:i}=ui.platform;return zt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&i?"Calibri, ":""}sans-serif`],["monospace",`${e&&i?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,Ql).read().then(({value:i,done:n})=>{if(n){c(this,Ua).resolve();return}c(this,Kl)??S(this,Kl,i.lang),Object.assign(c(this,Zo),i.styles),_(this,Wn,gE).call(this,i.items),e()},c(this,Ua).reject)};return S(this,Ql,c(this,Wo).getReader()),c(we,$o).add(this),e(),c(this,Ua).promise}update({viewport:e,onBefore:i=null}){var o;const n=e.scale*(globalThis.devicePixelRatio||1),l=e.rotation;if(l!==c(this,Qo)&&(i==null||i(),S(this,Qo,l),Tr(c(this,Ko),{rotation:l})),n!==c(this,Ba)){i==null||i(),S(this,Ba,n);const u={div:null,properties:null,ctx:_(o=we,Xi,Vf).call(o,c(this,Kl))};for(const d of c(this,Zl))u.properties=c(this,Oh).get(d),u.div=d,_(this,Wn,Qb).call(this,u)}}cancel(){var i;const e=new Dr("TextLayer task cancelled.");(i=c(this,Ql))==null||i.cancel(e).catch(()=>{}),S(this,Ql,null),c(this,Ua).reject(e)}get textDivs(){return c(this,Zl)}get textContentItemsStr(){return c(this,Dh)}static cleanup(){if(!(c(this,$o).size>0)){c(this,Wl).clear();for(const{canvas:e}of c(this,$l).values())e.remove();c(this,$l).clear()}}};Ua=new WeakMap,Si=new WeakMap,xh=new WeakMap,Ch=new WeakMap,Kl=new WeakMap,Rn=new WeakMap,Mh=new WeakMap,Rh=new WeakMap,Ql=new WeakMap,Ko=new WeakMap,Qo=new WeakMap,Ba=new WeakMap,Zo=new WeakMap,Dh=new WeakMap,Wo=new WeakMap,Zl=new WeakMap,Oh=new WeakMap,Lh=new WeakMap,Wl=new WeakMap,$l=new WeakMap,Nh=new WeakMap,Pa=new WeakMap,$o=new WeakMap,Wn=new WeakSet,gE=function(e){var l,o;if(c(this,xh))return;(o=c(this,Rn)).ctx??(o.ctx=_(l=we,Xi,Vf).call(l,c(this,Kl)));const i=c(this,Zl),n=c(this,Dh);for(const u of e){if(i.length>AC){xt("Ignoring additional textDivs for performance reasons."),S(this,xh,!0);return}if(u.str===void 0){if(u.type==="beginMarkedContentProps"||u.type==="beginMarkedContent"){const d=c(this,Si);S(this,Si,document.createElement("span")),c(this,Si).classList.add("markedContent"),u.id!==null&&c(this,Si).setAttribute("id",`${u.id}`),d.append(c(this,Si))}else u.type==="endMarkedContent"&&S(this,Si,c(this,Si).parentNode);continue}n.push(u.str),_(this,Wn,pE).call(this,u)}},pE=function(e){var C;const i=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,Zl).push(i);const l=ot.transform(c(this,Lh),e.transform);let o=Math.atan2(l[1],l[0]);const u=c(this,Zo)[e.fontName];u.vertical&&(o+=Math.PI/2);let d=c(this,Ch)&&u.fontSubstitution||u.fontFamily;d=we.fontFamilyMap.get(d)||d;const f=Math.hypot(l[2],l[3]),g=f*_(C=we,Xi,bE).call(C,d,c(this,Kl));let m,y;o===0?(m=l[4],y=l[5]-g):(m=l[4]+g*Math.sin(o),y=l[5]-g*Math.cos(o));const v="calc(var(--scale-factor)*",E=i.style;c(this,Si)===c(this,Ko)?(E.left=`${(100*m/c(this,Rh)).toFixed(2)}%`,E.top=`${(100*y/c(this,Mh)).toFixed(2)}%`):(E.left=`${v}${m.toFixed(2)}px)`,E.top=`${v}${y.toFixed(2)}px)`),E.fontSize=`${v}${(c(we,Pa)*f).toFixed(2)}px)`,E.fontFamily=d,n.fontSize=f,i.setAttribute("role","presentation"),i.textContent=e.str,i.dir=e.dir,c(this,Ch)&&(i.dataset.fontName=u.fontSubstitutionLoadedName||e.fontName),o!==0&&(n.angle=o*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const O=Math.abs(e.transform[0]),M=Math.abs(e.transform[3]);O!==M&&Math.max(O,M)/Math.min(O,M)>1.5&&(x=!0)}if(x&&(n.canvasWidth=u.vertical?e.height:e.width),c(this,Oh).set(i,n),c(this,Rn).div=i,c(this,Rn).properties=n,_(this,Wn,Qb).call(this,c(this,Rn)),n.hasText&&c(this,Si).append(i),n.hasEOL){const O=document.createElement("br");O.setAttribute("role","presentation"),c(this,Si).append(O)}},Qb=function(e){var d;const{div:i,properties:n,ctx:l}=e,{style:o}=i;let u="";if(c(we,Pa)>1&&(u=`scale(${1/c(we,Pa)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:f}=o,{canvasWidth:g,fontSize:m}=n;_(d=we,Xi,Zb).call(d,l,m*c(this,Ba),f);const{width:y}=l.measureText(i.textContent);y>0&&(u=`scaleX(${g*c(this,Ba)/y}) ${u}`)}n.angle!==0&&(u=`rotate(${n.angle}deg) ${u}`),u.length>0&&(o.transform=u)},Xi=new WeakSet,Vf=function(e=null){let i=c(this,$l).get(e||(e=""));if(!i){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),i=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,$l).set(e,i),c(this,Nh).set(i,{size:0,family:""})}return i},Zb=function(e,i,n){const l=c(this,Nh).get(e);i===l.size&&n===l.family||(e.font=`${i}px ${n}`,l.size=i,l.family=n)},mE=function(){if(c(this,Pa)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),S(this,Pa,e.getBoundingClientRect().height),e.remove()},bE=function(e,i){const n=c(this,Wl).get(e);if(n)return n;const l=_(this,Xi,Vf).call(this,i);l.canvas.width=l.canvas.height=yi,_(this,Xi,Zb).call(this,l,yi,e);const o=l.measureText("");let u=o.fontBoundingBoxAscent,d=Math.abs(o.fontBoundingBoxDescent);if(u){const m=u/(u+d);return c(this,Wl).set(e,m),l.canvas.width=l.canvas.height=0,m}l.strokeStyle="red",l.clearRect(0,0,yi,yi),l.strokeText("g",0,0);let f=l.getImageData(0,0,yi,yi).data;d=0;for(let m=f.length-1-3;m>=0;m-=4)if(f[m]>0){d=Math.ceil(m/4/yi);break}l.clearRect(0,0,yi,yi),l.strokeText("A",0,yi),f=l.getImageData(0,0,yi,yi).data,u=0;for(let m=0,y=f.length;m<y;m+=4)if(f[m]>0){u=yi-Math.floor(m/4/yi);break}l.canvas.width=l.canvas.height=0;const g=u?u/(u+d):SC;return c(this,Wl).set(e,g),g},w(we,Xi),w(we,Wl,new Map),w(we,$l,new Map),w(we,Nh,new WeakMap),w(we,Pa,null),w(we,$o,new Set);let Zu=we;class Wu{static textContent(e){const i=[],n={items:i,styles:Object.create(null)};function l(o){var f;if(!o)return;let u=null;const d=o.name;if(d==="#text")u=o.value;else if(Wu.shouldBuildText(d))(f=o==null?void 0:o.attributes)!=null&&f.textContent?u=o.attributes.textContent:o.value&&(u=o.value);else return;if(u!==null&&i.push({str:u}),!!o.children)for(const g of o.children)l(g)}return l(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const _C=65536,EC=100,TC=5e3,wC=ni?Fx:kx,xC=ni?Ux:J_,CC=ni?zx:Hx,MC=ni?Bx:sE;function RC(b={}){typeof b=="string"||b instanceof URL?b={url:b}:(b instanceof ArrayBuffer||ArrayBuffer.isView(b))&&(b={data:b});const e=new Wb,{docId:i}=e,n=b.url?DC(b.url):null,l=b.data?OC(b.data):null,o=b.httpHeaders||null,u=b.withCredentials===!0,d=b.password??null,f=b.range instanceof yE?b.range:null,g=Number.isInteger(b.rangeChunkSize)&&b.rangeChunkSize>0?b.rangeChunkSize:_C;let m=b.worker instanceof Ro?b.worker:null;const y=b.verbosity,v=typeof b.docBaseUrl=="string"&&!qg(b.docBaseUrl)?b.docBaseUrl:null,E=typeof b.cMapUrl=="string"?b.cMapUrl:null,x=b.cMapPacked!==!1,C=b.CMapReaderFactory||xC,O=typeof b.standardFontDataUrl=="string"?b.standardFontDataUrl:null,M=b.StandardFontDataFactory||MC,z=b.stopAtErrors!==!0,F=Number.isInteger(b.maxImageSize)&&b.maxImageSize>-1?b.maxImageSize:-1,I=b.isEvalSupported!==!1,q=typeof b.isOffscreenCanvasSupported=="boolean"?b.isOffscreenCanvasSupported:!ni,G=typeof b.isChrome=="boolean"?b.isChrome:!ui.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),Q=Number.isInteger(b.canvasMaxAreaInBytes)?b.canvasMaxAreaInBytes:-1,J=typeof b.disableFontFace=="boolean"?b.disableFontFace:ni,nt=b.fontExtraProperties===!0,yt=b.enableXfa===!0,at=b.ownerDocument||globalThis.document,gt=b.disableRange===!0,Tt=b.disableStream===!0,Ot=b.disableAutoFetch===!0,pt=b.pdfBug===!0,P=b.CanvasFactory||wC,X=b.FilterFactory||CC,W=b.enableHWA===!0,kt=f?f.length:b.length??NaN,D=typeof b.useSystemFonts=="boolean"?b.useSystemFonts:!ni&&!J,V=typeof b.useWorkerFetch=="boolean"?b.useWorkerFetch:C===J_&&M===sE&&E&&O&&Ou(E,document.baseURI)&&Ou(O,document.baseURI);b.canvasFactory&&s_("`canvasFactory`-instance option, please use `CanvasFactory` instead."),b.filterFactory&&s_("`filterFactory`-instance option, please use `FilterFactory` instead.");const $=null;hx(y);const Z={canvasFactory:new P({ownerDocument:at,enableHWA:W}),filterFactory:new X({docId:i,ownerDocument:at}),cMapReaderFactory:V?null:new C({baseUrl:E,isCompressed:x}),standardFontDataFactory:V?null:new M({baseUrl:O})};if(!m){const lt={verbosity:y,port:Vn.workerPort};m=lt.port?Ro.fromPort(lt):new Ro(lt),e._worker=m}const rt={docId:i,apiVersion:"4.8.69",data:l,password:d,disableAutoFetch:Ot,rangeChunkSize:g,length:kt,docBaseUrl:v,enableXfa:yt,evaluatorOptions:{maxImageSize:F,disableFontFace:J,ignoreErrors:z,isEvalSupported:I,isOffscreenCanvasSupported:q,isChrome:G,canvasMaxAreaInBytes:Q,fontExtraProperties:nt,useSystemFonts:D,cMapUrl:V?E:null,standardFontDataUrl:V?O:null}},Ct={disableFontFace:J,fontExtraProperties:nt,ownerDocument:at,pdfBug:pt,styleElement:$,loadingParams:{disableAutoFetch:Ot,enableXfa:yt}};return m.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const lt=m.messageHandler.sendWithPromise("GetDocRequest",rt,l?[l.buffer]:null);let Mt;if(f)Mt=new iC(f,{disableRange:gt,disableStream:Tt});else if(!l){if(!n)throw new Error("getDocument - no `url` parameter provided.");let It;ni?It=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Ou(n)?p_:pC:It=Ou(n)?p_:uC,Mt=new It({url:n,length:kt,httpHeaders:o,withCredentials:u,rangeChunkSize:g,disableRange:gt,disableStream:Tt})}return lt.then(It=>{if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Yi=new Uu(i,It,m.port),Mc=new HC(Yi,e,Mt,Ct,Z);e._transport=Mc,Yi.send("Ready",null)})}).catch(e._capability.reject),e}function DC(b){if(b instanceof URL)return b.href;try{return new URL(b,window.location).href}catch{if(ni&&typeof b=="string")return b}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function OC(b){if(ni&&typeof Buffer<"u"&&b instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength)return b;if(typeof b=="string")return Pg(b);if(b instanceof ArrayBuffer||ArrayBuffer.isView(b)||typeof b=="object"&&!isNaN(b==null?void 0:b.length))return new Uint8Array(b);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function m_(b){return typeof b=="object"&&Number.isInteger(b==null?void 0:b.num)&&b.num>=0&&Number.isInteger(b==null?void 0:b.gen)&&b.gen>=0}var Mg;const Rg=class Rg{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${li(Rg,Mg)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,i,n;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((i=this._transport)==null?void 0:i.destroy())}catch(l){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,l}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Mg=new WeakMap,w(Rg,Mg,0);let Wb=Rg;class yE{constructor(e,i,n=!1,l=null){this.length=e,this.initialData=i,this.progressiveDone=n,this.contentDispositionFilename=l,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,i){for(const n of this._rangeListeners)n(e,i)}onDataProgress(e,i){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,i)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const i of this._progressiveReadListeners)i(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,i){ie("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class LC{constructor(e,i){this._pdfInfo=e,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return zt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ia,Dn,os,To,Kf;class NC{constructor(e,i,n,l=!1){w(this,os);w(this,Ia,null);w(this,Dn,!1);this._pageIndex=e,this._pageInfo=i,this._transport=n,this._stats=l?new i_:null,this._pdfBug=l,this.commonObjs=n.commonObjs,this.objs=new vE,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:i=this.rotate,offsetX:n=0,offsetY:l=0,dontFlip:o=!1}={}){return new fd({viewBox:this.view,scale:e,rotation:i,offsetX:n,offsetY:l,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return zt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:i,intent:n="display",annotationMode:l=wa.ENABLE,transform:o=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:m=null,isEditing:y=!1}){var I,q;(I=this._stats)==null||I.time("Overall");const v=this._transport.getRenderingIntent(n,l,m,y),{renderingIntent:E,cacheKey:x}=v;S(this,Dn,!1),_(this,os,Kf).call(this),d||(d=this._transport.getOptionalContentConfig(E));let C=this._intentStates.get(x);C||(C=Object.create(null),this._intentStates.set(x,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const O=!!(E&Gi.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(q=this._stats)==null||q.time("Page Request"),this._pumpOperatorList(v));const M=G=>{var Q;C.renderTasks.delete(z),(this._maybeCleanupAfterRender||O)&&S(this,Dn,!0),_(this,os,To).call(this,!O),G?(z.capability.reject(G),this._abortOperatorList({intentState:C,reason:G instanceof Error?G:new Error(G)})):z.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(Q=globalThis.Stats)!=null&&Q.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},z=new Jb({callback:M,params:{canvasContext:e,viewport:i,transform:o,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!O,pdfBug:this._pdfBug,pageColors:g});(C.renderTasks||(C.renderTasks=new Set)).add(z);const F=z.task;return Promise.all([C.displayReadyCapability.promise,d]).then(([G,Q])=>{var J;if(this.destroyed){M();return}if((J=this._stats)==null||J.time("Rendering"),!(Q.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");z.initializeGraphics({transparency:G,optionalContentConfig:Q}),z.operatorListChanged()}).catch(M),F}getOperatorList({intent:e="display",annotationMode:i=wa.ENABLE,printAnnotationStorage:n=null,isEditing:l=!1}={}){var g;function o(){d.operatorList.lastChunk&&(d.opListReadCapability.resolve(d.operatorList),d.renderTasks.delete(f))}const u=this._transport.getRenderingIntent(e,i,n,l,!0);let d=this._intentStates.get(u.cacheKey);d||(d=Object.create(null),this._intentStates.set(u.cacheKey,d));let f;return d.opListReadCapability||(f=Object.create(null),f.operatorListChanged=o,d.opListReadCapability=Promise.withResolvers(),(d.renderTasks||(d.renderTasks=new Set)).add(f),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(g=this._stats)==null||g.time("Page Request"),this._pumpOperatorList(u)),d.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:i===!0},{highWaterMark:100,size(l){return l.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Wu.textContent(n));const i=this.streamTextContent(e);return new Promise(function(n,l){function o(){u.read().then(function({value:f,done:g}){if(g){n(d);return}d.lang??(d.lang=f.lang),Object.assign(d.styles,f.styles),d.items.push(...f.items),o()},l)}const u=i.getReader(),d={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const n of i.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),S(this,Dn,!1),_(this,os,Kf).call(this),Promise.all(e)}cleanup(e=!1){S(this,Dn,!0);const i=_(this,os,To).call(this,!1);return e&&i&&this._stats&&(this._stats=new i_),i}_startRenderPage(e,i){var l,o;const n=this._intentStates.get(i);n&&((l=this._stats)==null||l.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(e))}_renderPageChunk(e,i){for(let n=0,l=e.length;n<l;n++)i.operatorList.fnArray.push(e.fnArray[n]),i.operatorList.argsArray.push(e.argsArray[n]);i.operatorList.lastChunk=e.lastChunk,i.operatorList.separateAnnots=e.separateAnnots;for(const n of i.renderTasks)n.operatorListChanged();e.lastChunk&&_(this,os,To).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:i,annotationStorageSerializable:n,modifiedIds:l}){const{map:o,transfer:u}=n,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:i,annotationStorage:o,modifiedIds:l},u).getReader(),g=this._intentStates.get(i);g.streamReader=f;const m=()=>{f.read().then(({value:y,done:v})=>{if(v){g.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,g),m())},y=>{if(g.streamReader=null,!this._transport.destroyed){if(g.operatorList){g.operatorList.lastChunk=!0;for(const v of g.renderTasks)v.operatorListChanged();_(this,os,To).call(this,!0)}if(g.displayReadyCapability)g.displayReadyCapability.reject(y);else if(g.opListReadCapability)g.opListReadCapability.reject(y);else throw y}})};m()}_abortOperatorList({intentState:e,reason:i,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(i instanceof F0){let l=EC;i.extraDelay>0&&i.extraDelay<1e3&&(l+=i.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:i,force:!0})},l);return}}if(e.streamReader.cancel(new Dr(i.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[l,o]of this._intentStates)if(o===e){this._intentStates.delete(l);break}this.cleanup()}}}get stats(){return this._stats}}Ia=new WeakMap,Dn=new WeakMap,os=new WeakSet,To=function(e=!1){if(_(this,os,Kf).call(this),!c(this,Dn)||this.destroyed)return!1;if(e)return S(this,Ia,setTimeout(()=>{S(this,Ia,null),_(this,os,To).call(this,!1)},TC)),!1;for(const{renderTasks:i,operatorList:n}of this._intentStates.values())if(i.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),S(this,Dn,!1),!0},Kf=function(){c(this,Ia)&&(clearTimeout(c(this,Ia)),S(this,Ia,null))};var On,Dg;class kC{constructor(){w(this,On,new Map);w(this,Dg,Promise.resolve())}postMessage(e,i){const n={data:structuredClone(e,i?{transfer:i}:null)};c(this,Dg).then(()=>{for(const[l]of c(this,On))l.call(this,n)})}addEventListener(e,i,n=null){let l=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:o}=n;if(o.aborted){xt("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(e,i);l=()=>o.removeEventListener("abort",u),o.addEventListener("abort",u)}c(this,On).set(i,l)}removeEventListener(e,i){const n=c(this,On).get(i);n==null||n(),c(this,On).delete(i)}terminate(){for(const[,e]of c(this,On))e==null||e();c(this,On).clear()}}On=new WeakMap,Dg=new WeakMap;var Og,Jl,tr,Jo,Qf,tc,Zf;const ne=class ne{constructor({name:e=null,port:i=null,verbosity:n=dx()}={}){w(this,Jo);var l;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,i){if((l=c(ne,tr))!=null&&l.has(i))throw new Error("Cannot use more than one PDFWorker per port.");(c(ne,tr)||S(ne,tr,new WeakMap)).set(i,this),this._initializeFromPort(i);return}this._initialize()}get promise(){return ni?Promise.all([tl.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Uu("main","worker",e),this._messageHandler.on("ready",function(){}),_(this,Jo,Qf).call(this)}_initialize(){if(c(ne,Jl)||c(ne,tc,Zf)){this._setupFakeWorker();return}let{workerSrc:e}=ne;try{ne._isSameOrigin(window.location.href,e)||(e=ne._createCDNWrapper(new URL(e,window.location).href));const i=new Worker(e,{type:"module"}),n=new Uu("main","worker",i),l=()=>{o.abort(),n.destroy(),i.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;i.addEventListener("error",()=>{this._webWorker||l()},{signal:o.signal}),n.on("test",d=>{if(o.abort(),this.destroyed||!d){l();return}this._messageHandler=n,this._port=i,this._webWorker=i,_(this,Jo,Qf).call(this)}),n.on("ready",d=>{if(o.abort(),this.destroyed){l();return}try{u()}catch{this._setupFakeWorker()}});const u=()=>{const d=new Uint8Array;n.send("test",d,[d.buffer])};u();return}catch{Ug("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){c(ne,Jl)||(xt("Setting up fake worker."),S(ne,Jl,!0)),ne._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const i=new kC;this._port=i;const n=`fake${li(ne,Og)._++}`,l=new Uu(n+"_worker",n,i);e.setup(l,i),this._messageHandler=new Uu(n,n+"_worker",i),_(this,Jo,Qf).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=c(ne,tr))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const i=(n=c(this,tr))==null?void 0:n.get(e.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new ne(e)}static get workerSrc(){if(Vn.workerSrc)return Vn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return zt(this,"_setupFakeWorkerGlobal",(async()=>c(this,tc,Zf)?c(this,tc,Zf):(await import(this.workerSrc)).WorkerMessageHandler)())}};Og=new WeakMap,Jl=new WeakMap,tr=new WeakMap,Jo=new WeakSet,Qf=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},tc=new WeakSet,Zf=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},w(ne,tc),w(ne,Og,0),w(ne,Jl,!1),w(ne,tr),ni&&(S(ne,Jl,!0),Vn.workerSrc||(Vn.workerSrc="./pdf.worker.mjs")),ne._isSameOrigin=(e,i)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const l=new URL(i,n);return n.origin===l.origin},ne._createCDNWrapper=e=>{const i=`await import("${e}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))};let Ro=ne;var Ln,Ks,ec,ic,Qs,er,Bu;class HC{constructor(e,i,n,l,o){w(this,er);w(this,Ln,new Map);w(this,Ks,new Map);w(this,ec,new Map);w(this,ic,new Map);w(this,Qs,null);this.messageHandler=e,this.loadingTask=i,this.commonObjs=new vE,this.fontLoader=new Lx({ownerDocument:l.ownerDocument,styleElement:l.styleElement}),this.loadingParams=l.loadingParams,this._params=l,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return zt(this,"annotationStorage",new I0)}getRenderingIntent(e,i=wa.ENABLE,n=null,l=!1,o=!1){let u=Gi.DISPLAY,d=Pb;switch(e){case"any":u=Gi.ANY;break;case"display":break;case"print":u=Gi.PRINT;break;default:xt(`getRenderingIntent - invalid intent: ${e}`)}const f=u&Gi.PRINT&&n instanceof Z_?n:this.annotationStorage;switch(i){case wa.DISABLE:u+=Gi.ANNOTATIONS_DISABLE;break;case wa.ENABLE:break;case wa.ENABLE_FORMS:u+=Gi.ANNOTATIONS_FORMS;break;case wa.ENABLE_STORAGE:u+=Gi.ANNOTATIONS_STORAGE,d=f.serializable;break;default:xt(`getRenderingIntent - invalid annotationMode: ${i}`)}l&&(u+=Gi.IS_EDITING),o&&(u+=Gi.OPLIST);const{ids:g,hash:m}=f.modifiedIds,y=[u,d.hash,m];return{renderingIntent:u,cacheKey:y.join("_"),annotationStorageSerializable:d,modifiedIds:g}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=c(this,Qs))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const l of c(this,Ks).values())e.push(l._destroy());c(this,Ks).clear(),c(this,ec).clear(),c(this,ic).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return e.push(i),Promise.all(e).then(()=>{var l;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Ln).clear(),this.filterFactory.destroy(),Zu.cleanup(),(l=this._networkStream)==null||l.cancelAllRequests(new Dr("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:i}=this;e.on("GetReader",(n,l)=>{Re(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},l.onPull=()=>{this._fullReader.read().then(function({value:o,done:u}){if(u){l.close();return}Re(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{l.error(o)})},l.onCancel=o=>{this._fullReader.cancel(o),l.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("ReaderHeadersReady",async n=>{var d;await this._fullReader.headersReady;const{isStreamingSupported:l,isRangeSupported:o,contentLength:u}=this._fullReader;return(!l||!o)&&(this._lastProgress&&((d=i.onProgress)==null||d.call(i,this._lastProgress)),this._fullReader.onProgress=f=>{var g;(g=i.onProgress)==null||g.call(i,{loaded:f.loaded,total:f.total})}),{isStreamingSupported:l,isRangeSupported:o,contentLength:u}}),e.on("GetRangeReader",(n,l)=>{Re(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){l.close();return}l.onPull=()=>{o.read().then(function({value:u,done:d}){if(d){l.close();return}Re(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{l.error(u)})},l.onCancel=u=>{o.cancel(u),l.ready.catch(d=>{if(!this.destroyed)throw d})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,i._capability.resolve(new LC(n,this))}),e.on("DocException",function(n){let l;switch(n.name){case"PasswordException":l=new yb(n.message,n.code);break;case"InvalidPDFException":l=new __(n.message);break;case"MissingPDFException":l=new Rr(n.message);break;case"UnexpectedResponseException":l=new Bg(n.message,n.status);break;case"UnknownErrorException":l=new vb(n.message,n.details);break;default:ie("DocException - expected a valid Error.")}i._capability.reject(l)}),e.on("PasswordRequest",n=>{if(S(this,Qs,Promise.withResolvers()),i.onPassword){const l=o=>{o instanceof Error?c(this,Qs).reject(o):c(this,Qs).resolve({password:o})};try{i.onPassword(l,n.code)}catch(o){c(this,Qs).reject(o)}}else c(this,Qs).reject(new yb(n.message,n.code));return c(this,Qs).promise}),e.on("DataLoaded",n=>{var l;(l=i.onProgress)==null||l.call(i,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;c(this,Ks).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,l,o])=>{var u;if(this.destroyed||this.commonObjs.has(n))return null;switch(l){case"Font":const{disableFontFace:d,fontExtraProperties:f,pdfBug:g}=this._params;if("error"in o){const E=o.error;xt(`Error during font loading: ${E}`),this.commonObjs.resolve(n,E);break}const m=g&&((u=globalThis.FontInspector)!=null&&u.enabled)?(E,x)=>globalThis.FontInspector.fontAdded(E,x):null,y=new Nx(o,{disableFontFace:d,inspectFont:m});this.fontLoader.bind(y).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!f&&y.data&&(y.data=null),this.commonObjs.resolve(n,y)});break;case"CopyLocalImage":const{imageRef:v}=o;Re(v,"The imageRef must be defined.");for(const E of c(this,Ks).values())for(const[,x]of E.objs)if((x==null?void 0:x.ref)===v)return x.dataLen?(this.commonObjs.resolve(n,structuredClone(x)),x.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${l}`)}return null}),e.on("obj",([n,l,o,u])=>{var f;if(this.destroyed)return;const d=c(this,Ks).get(l);if(!d.objs.has(n)){if(d._intentStates.size===0){(f=u==null?void 0:u.bitmap)==null||f.close();return}switch(o){case"Image":d.objs.resolve(n,u),(u==null?void 0:u.dataLen)>rx&&(d._maybeCleanupAfterRender=!0);break;case"Pattern":d.objs.resolve(n,u);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",n=>{var l;this.destroyed||(l=i.onProgress)==null||l.call(i,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),e.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&xt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const i=e-1,n=c(this,ec).get(i);if(n)return n;const l=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&c(this,ic).set(o.refStr,e);const u=new NC(i,o,this,this._params.pdfBug);return c(this,Ks).set(i,u),u});return c(this,ec).set(i,l),l}getPageIndex(e){return m_(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:i})}getFieldObjects(){return _(this,er,Bu).call(this,"GetFieldObjects")}hasJSActions(){return _(this,er,Bu).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return _(this,er,Bu).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return _(this,er,Bu).call(this,"GetOptionalContentConfig").then(i=>new eC(i,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",i=c(this,Ln).get(e);if(i)return i;const n=this.messageHandler.sendWithPromise(e,null).then(l=>{var o,u;return{info:l[0],metadata:l[1]?new Jx(l[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((u=this._fullReader)==null?void 0:u.contentLength)??null}});return c(this,Ln).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of c(this,Ks).values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,Ln).clear(),this.filterFactory.destroy(!0),Zu.cleanup()}}cachedPageNumber(e){if(!m_(e))return null;const i=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return c(this,ic).get(i)??null}}Ln=new WeakMap,Ks=new WeakMap,ec=new WeakMap,ic=new WeakMap,Qs=new WeakMap,er=new WeakSet,Bu=function(e,i=null){const n=c(this,Ln).get(e);if(n)return n;const l=this.messageHandler.sendWithPromise(e,i);return c(this,Ln).set(e,l),l};const zf=Symbol("INITIAL_DATA");var _s,kh,$b;class vE{constructor(){w(this,kh);w(this,_s,Object.create(null))}get(e,i=null){if(i){const l=_(this,kh,$b).call(this,e);return l.promise.then(()=>i(l.data)),null}const n=c(this,_s)[e];if(!n||n.data===zf)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const i=c(this,_s)[e];return!!i&&i.data!==zf}resolve(e,i=null){const n=_(this,kh,$b).call(this,e);n.data=i,n.resolve()}clear(){var e;for(const i in c(this,_s)){const{data:n}=c(this,_s)[i];(e=n==null?void 0:n.bitmap)==null||e.close()}S(this,_s,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,_s)){const{data:i}=c(this,_s)[e];i!==zf&&(yield[e,i])}}}_s=new WeakMap,kh=new WeakSet,$b=function(e){var i;return(i=c(this,_s))[e]||(i[e]={...Promise.withResolvers(),data:zf})};var qa;class zC{constructor(e){w(this,qa,null);S(this,qa,e),this.onContinue=null}get promise(){return c(this,qa).capability.promise}cancel(e=0){c(this,qa).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=c(this,qa).operatorList;if(!e)return!1;const{annotationCanvasMap:i}=c(this,qa);return e.form||e.canvas&&(i==null?void 0:i.size)>0}}qa=new WeakMap;var Ga,ir;const Cl=class Cl{constructor({callback:e,params:i,objs:n,commonObjs:l,annotationCanvasMap:o,operatorList:u,pageIndex:d,canvasFactory:f,filterFactory:g,useRequestAnimationFrame:m=!1,pdfBug:y=!1,pageColors:v=null}){w(this,Ga,null);this.callback=e,this.params=i,this.objs=n,this.commonObjs=l,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=d,this.canvasFactory=f,this.filterFactory=g,this._pdfBug=y,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new zC(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:i}){var d,f;if(this.cancelled)return;if(this._canvas){if(c(Cl,ir).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(Cl,ir).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)!=null&&d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:l,transform:o,background:u}=this.params;this.gfx=new Mo(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:l,transparency:e,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(e=null,i=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),c(this,Ga)&&(window.cancelAnimationFrame(c(this,Ga)),S(this,Ga,null)),c(Cl,ir).delete(this._canvas),this.callback(e||new F0(`Rendering cancelled, page ${this._pageIndex+1}`,i))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?S(this,Ga,window.requestAnimationFrame(()=>{S(this,Ga,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(Cl,ir).delete(this._canvas),this.callback())))}};Ga=new WeakMap,ir=new WeakMap,w(Cl,ir,new WeakSet);let Jb=Cl;const FC="4.8.69",UC="3634dab10";function b_(b){return Math.floor(Math.max(0,Math.min(1,b))*255).toString(16).padStart(2,"0")}function Du(b){return Math.max(0,Math.min(255,255*b))}class y_{static CMYK_G([e,i,n,l]){return["G",1-Math.min(1,.3*e+.59*n+.11*i+l)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Du(e),[e,e,e]}static G_HTML([e]){const i=b_(e);return`#${i}${i}${i}`}static RGB_G([e,i,n]){return["G",.3*e+.59*i+.11*n]}static RGB_rgb(e){return e.map(Du)}static RGB_HTML(e){return`#${e.map(b_).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,i,n,l]){return["RGB",1-Math.min(1,e+l),1-Math.min(1,n+l),1-Math.min(1,i+l)]}static CMYK_rgb([e,i,n,l]){return[Du(1-Math.min(1,e+l)),Du(1-Math.min(1,n+l)),Du(1-Math.min(1,i+l))]}static CMYK_HTML(e){const i=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([e,i,n]){const l=1-e,o=1-i,u=1-n,d=Math.min(l,o,u);return["CMYK",l,o,u,d]}}class BC{create(e,i,n=!1){if(e<=0||i<=0)throw new Error("Invalid SVG dimensions");const l=this._createSVG("svg:svg");return l.setAttribute("version","1.1"),n||(l.setAttribute("width",`${e}px`),l.setAttribute("height",`${i}px`)),l.setAttribute("preserveAspectRatio","none"),l.setAttribute("viewBox",`0 0 ${e} ${i}`),l}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ie("Abstract method `_createSVG` called.")}}class Y0 extends BC{_createSVG(e){return document.createElementNS(An,e)}}class AE{static setupStorage(e,i,n,l,o){const u=l.getValue(i,{value:null});switch(n.name){case"textarea":if(u.value!==null&&(e.textContent=u.value),o==="print")break;e.addEventListener("input",d=>{l.setValue(i,{value:d.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(u.value===n.attributes.xfaOn?e.setAttribute("checked",!0):u.value===n.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",d=>{l.setValue(i,{value:d.target.checked?d.target.getAttribute("xfaOn"):d.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&e.setAttribute("value",u.value),o==="print")break;e.addEventListener("input",d=>{l.setValue(i,{value:d.target.value})})}break;case"select":if(u.value!==null){e.setAttribute("value",u.value);for(const d of n.children)d.attributes.value===u.value?d.attributes.selected=!0:d.attributes.hasOwnProperty("selected")&&delete d.attributes.selected}e.addEventListener("input",d=>{const f=d.target.options,g=f.selectedIndex===-1?"":f[f.selectedIndex].value;l.setValue(i,{value:g})});break}}static setAttributes({html:e,element:i,storage:n=null,intent:l,linkService:o}){const{attributes:u}=i,d=e instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${l}`);for(const[f,g]of Object.entries(u))if(g!=null)switch(f){case"class":g.length&&e.setAttribute(f,g.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",g);break;case"style":Object.assign(e.style,g);break;case"textContent":e.textContent=g;break;default:(!d||f!=="href"&&f!=="newWindow")&&e.setAttribute(f,g)}d&&o.addLinkAttributes(e,u.href,u.newWindow),n&&u.dataId&&this.setupStorage(e,u.dataId,i,n)}static render(e){var y,v;const i=e.annotationStorage,n=e.linkService,l=e.xfaHtml,o=e.intent||"display",u=document.createElement(l.name);l.attributes&&this.setAttributes({html:u,element:l,intent:o,linkService:n});const d=o!=="richText",f=e.div;if(f.append(u),e.viewport){const E=`matrix(${e.viewport.transform.join(",")})`;f.style.transform=E}d&&f.setAttribute("class","xfaLayer xfaFont");const g=[];if(l.children.length===0){if(l.value){const E=document.createTextNode(l.value);u.append(E),d&&Wu.shouldBuildText(l.name)&&g.push(E)}return{textDivs:g}}const m=[[l,-1,u]];for(;m.length>0;){const[E,x,C]=m.at(-1);if(x+1===E.children.length){m.pop();continue}const O=E.children[++m.at(-1)[1]];if(O===null)continue;const{name:M}=O;if(M==="#text"){const F=document.createTextNode(O.value);g.push(F),C.append(F);continue}const z=(y=O==null?void 0:O.attributes)!=null&&y.xmlns?document.createElementNS(O.attributes.xmlns,M):document.createElement(M);if(C.append(z),O.attributes&&this.setAttributes({html:z,element:O,storage:i,intent:o,linkService:n}),((v=O.children)==null?void 0:v.length)>0)m.push([O,-1,z]);else if(O.value){const F=document.createTextNode(O.value);d&&Wu.shouldBuildText(M)&&g.push(F),z.append(F)}}for(const E of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))E.setAttribute("readOnly",!0);return{textDivs:g}}static update(e){const i=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=i,e.div.hidden=!1}}const pd=1e3,PC=9,xr=new WeakSet;function Kn(b){return{width:b[2]-b[0],height:b[3]-b[1]}}class IC{static create(e){switch(e.data.annotationType){case Te.LINK:return new SE(e);case Te.TEXT:return new qC(e);case Te.WIDGET:switch(e.data.fieldType){case"Tx":return new GC(e);case"Btn":return e.data.radioButton?new TE(e):e.data.checkBox?new XC(e):new YC(e);case"Ch":return new VC(e);case"Sig":return new jC(e)}return new Or(e);case Te.POPUP:return new e0(e);case Te.FREETEXT:return new RE(e);case Te.LINE:return new QC(e);case Te.SQUARE:return new ZC(e);case Te.CIRCLE:return new WC(e);case Te.POLYLINE:return new DE(e);case Te.CARET:return new JC(e);case Te.INK:return new V0(e);case Te.POLYGON:return new $C(e);case Te.HIGHLIGHT:return new OE(e);case Te.UNDERLINE:return new tM(e);case Te.SQUIGGLY:return new eM(e);case Te.STRIKEOUT:return new iM(e);case Te.STAMP:return new LE(e);case Te.FILEATTACHMENT:return new sM(e);default:return new me(e)}}}var sr,sc,nc,Hh,t0;const Z0=class Z0{constructor(e,{isRenderable:i=!1,ignoreBorder:n=!1,createQuadrilaterals:l=!1}={}){w(this,Hh);w(this,sr,null);w(this,sc,!1);w(this,nc,null);this.isRenderable=i,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,i&&(this.container=this._createContainer(n)),l&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:i,richText:n}){return!!(e!=null&&e.str||i!=null&&i.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Z0._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;c(this,sr)||S(this,sr,{rect:this.data.rect.slice(0)});const{rect:i}=e;i&&_(this,Hh,t0).call(this,i),(n=c(this,nc))==null||n.popup.updateEdited(e)}resetEdited(){var e;c(this,sr)&&(_(this,Hh,t0).call(this,c(this,sr).rect),(e=c(this,nc))==null||e.popup.resetEdited(),S(this,sr,null))}_createContainer(e){const{data:i,parent:{page:n,viewport:l}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",i.id),this instanceof Or||(o.tabIndex=pd);const{style:u}=o;if(u.zIndex=this.parent.zIndex++,i.alternativeText&&(o.title=i.alternativeText),i.noRotate&&o.classList.add("norotate"),!i.rect||this instanceof e0){const{rotation:C}=i;return!i.hasOwnCanvas&&C!==0&&this.setRotation(C,o),o}const{width:d,height:f}=Kn(i.rect);if(!e&&i.borderStyle.width>0){u.borderWidth=`${i.borderStyle.width}px`;const C=i.borderStyle.horizontalCornerRadius,O=i.borderStyle.verticalCornerRadius;if(C>0||O>0){const z=`calc(${C}px * var(--scale-factor)) / calc(${O}px * var(--scale-factor))`;u.borderRadius=z}else if(this instanceof TE){const z=`calc(${d}px * var(--scale-factor)) / calc(${f}px * var(--scale-factor))`;u.borderRadius=z}switch(i.borderStyle.style){case Mu.SOLID:u.borderStyle="solid";break;case Mu.DASHED:u.borderStyle="dashed";break;case Mu.BEVELED:xt("Unimplemented border style: beveled");break;case Mu.INSET:xt("Unimplemented border style: inset");break;case Mu.UNDERLINE:u.borderBottomStyle="solid";break}const M=i.borderColor||null;M?(S(this,sc,!0),u.borderColor=ot.makeHexColor(M[0]|0,M[1]|0,M[2]|0)):u.borderWidth=0}const g=ot.normalizeRect([i.rect[0],n.view[3]-i.rect[1]+n.view[1],i.rect[2],n.view[3]-i.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:y,pageX:v,pageY:E}=l.rawDims;u.left=`${100*(g[0]-v)/m}%`,u.top=`${100*(g[1]-E)/y}%`;const{rotation:x}=i;return i.hasOwnCanvas||x===0?(u.width=`${100*d/m}%`,u.height=`${100*f/y}%`):this.setRotation(x,o),o}setRotation(e,i=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:l}=this.parent.viewport.rawDims,{width:o,height:u}=Kn(this.data.rect);let d,f;e%180===0?(d=100*o/n,f=100*u/l):(d=100*u/n,f=100*o/l),i.style.width=`${d}%`,i.style.height=`${f}%`,i.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(i,n,l)=>{const o=l.detail[i],u=o[0],d=o.slice(1);l.target.style[n]=y_[`${u}_HTML`](d),this.annotationStorage.setValue(this.data.id,{[n]:y_[`${u}_rgb`](d)})};return zt(this,"_commonActions",{display:i=>{const{display:n}=i.detail,l=n%2===1;this.container.style.visibility=l?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:l,noPrint:n===1||n===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:n}=i.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{e("bgColor","backgroundColor",i)},fillColor:i=>{e("fillColor","backgroundColor",i)},fgColor:i=>{e("fgColor","color",i)},textColor:i=>{e("textColor","color",i)},borderColor:i=>{e("borderColor","borderColor",i)},strokeColor:i=>{e("strokeColor","borderColor",i)},rotation:i=>{const n=i.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,i){const n=this._commonActions;for(const l of Object.keys(i.detail)){const o=e[l]||n[l];o==null||o(i)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const n=this._commonActions;for(const[l,o]of Object.entries(i)){const u=n[l];if(u){const d={detail:{[l]:o},target:e};u(d),delete i[l]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[i,n,l,o]=this.data.rect.map(C=>Math.fround(C));if(e.length===8){const[C,O,M,z]=e.subarray(2,6);if(l===C&&o===O&&i===M&&n===z)return}const{style:u}=this.container;let d;if(c(this,sc)){const{borderColor:C,borderWidth:O}=u;u.borderWidth=0,d=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${O}">`],this.container.classList.add("hasBorder")}const f=l-i,g=o-n,{svgFactory:m}=this,y=m.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const v=m.createElement("defs");y.append(v);const E=m.createElement("clipPath"),x=`clippath_${this.data.id}`;E.setAttribute("id",x),E.setAttribute("clipPathUnits","objectBoundingBox"),v.append(E);for(let C=2,O=e.length;C<O;C+=8){const M=e[C],z=e[C+1],F=e[C+2],I=e[C+3],q=m.createElement("rect"),G=(F-i)/f,Q=(o-z)/g,J=(M-F)/f,nt=(z-I)/g;q.setAttribute("x",G),q.setAttribute("y",Q),q.setAttribute("width",J),q.setAttribute("height",nt),E.append(q),d==null||d.push(`<rect vector-effect="non-scaling-stroke" x="${G}" y="${Q}" width="${J}" height="${nt}"/>`)}c(this,sc)&&(d.push("</g></svg>')"),u.backgroundImage=d.join("")),this.container.append(y),this.container.style.clipPath=`url(#${x})`}_createPopup(){const{data:e}=this,i=S(this,nc,new e0({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(i.render())}render(){ie("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,i=null){const n=[];if(this._fieldObjects){const l=this._fieldObjects[e];if(l)for(const{page:o,id:u,exportValues:d}of l){if(o===-1||u===i)continue;const f=typeof d=="string"?d:null,g=document.querySelector(`[data-element-id="${u}"]`);if(g&&!xr.has(g)){xt(`_getElementsByName - element not allowed: ${u}`);continue}n.push({id:u,exportValue:f,domElement:g})}return n}for(const l of document.getElementsByName(e)){const{exportValue:o}=l,u=l.getAttribute("data-element-id");u!==i&&xr.has(l)&&n.push({id:u,exportValue:o,domElement:l})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const i of e)i.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:i})})}};sr=new WeakMap,sc=new WeakMap,nc=new WeakMap,Hh=new WeakSet,t0=function(e){const{container:{style:i},data:{rect:n,rotation:l},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:u,pageX:d,pageY:f}}}}=this;n==null||n.splice(0,4,...e);const{width:g,height:m}=Kn(e);i.left=`${100*(e[0]-d)/o}%`,i.top=`${100*(u-e[3]+f)/u}%`,l===0?(i.width=`${100*g/o}%`,i.height=`${100*m/u}%`):this.setRotation(l)};let me=Z0;var ji,_l,_E,EE;class SE extends me{constructor(i,n=null){super(i,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});w(this,ji);this.isTooltipOnly=i.data.isTooltipOnly}render(){const{data:i,linkService:n}=this,l=document.createElement("a");l.setAttribute("data-element-id",i.id);let o=!1;return i.url?(n.addLinkAttributes(l,i.url,i.newWindow),o=!0):i.action?(this._bindNamedAction(l,i.action),o=!0):i.attachment?(_(this,ji,_E).call(this,l,i.attachment,i.attachmentDest),o=!0):i.setOCGState?(_(this,ji,EE).call(this,l,i.setOCGState),o=!0):i.dest?(this._bindLink(l,i.dest),o=!0):(i.actions&&(i.actions.Action||i.actions["Mouse Up"]||i.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(l,i),o=!0),i.resetForm?(this._bindResetFormAction(l,i.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(l,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(l),this.container}_bindLink(i,n){i.href=this.linkService.getDestinationHash(n),i.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&_(this,ji,_l).call(this)}_bindNamedAction(i,n){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeNamedAction(n),!1),_(this,ji,_l).call(this)}_bindJSAction(i,n){i.href=this.linkService.getAnchorUrl("");const l=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const u=l.get(o);u&&(i[u]=()=>{var d;return(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}i.onclick||(i.onclick=()=>!1),_(this,ji,_l).call(this)}_bindResetFormAction(i,n){const l=i.onclick;if(l||(i.href=this.linkService.getAnchorUrl("")),_(this,ji,_l).call(this),!this._fieldObjects){xt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),l||(i.onclick=()=>!1);return}i.onclick=()=>{var y;l==null||l();const{fields:o,refs:u,include:d}=n,f=[];if(o.length!==0||u.length!==0){const v=new Set(u);for(const E of o){const x=this._fieldObjects[E]||[];for(const{id:C}of x)v.add(C)}for(const E of Object.values(this._fieldObjects))for(const x of E)v.has(x.id)===d&&f.push(x)}else for(const v of Object.values(this._fieldObjects))f.push(...v);const g=this.annotationStorage,m=[];for(const v of f){const{id:E}=v;switch(m.push(E),v.type){case"text":{const C=v.defaultValue||"";g.setValue(E,{value:C});break}case"checkbox":case"radiobutton":{const C=v.defaultValue===v.exportValues;g.setValue(E,{value:C});break}case"combobox":case"listbox":{const C=v.defaultValue||"";g.setValue(E,{value:C});break}default:continue}const x=document.querySelector(`[data-element-id="${E}"]`);if(x){if(!xr.has(x)){xt(`_bindResetFormAction - element not allowed: ${E}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}ji=new WeakSet,_l=function(){this.container.setAttribute("data-internal-link","")},_E=function(i,n,l=null){i.href=this.linkService.getAnchorUrl(""),n.description&&(i.title=n.description),i.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,l),!1},_(this,ji,_l).call(this)},EE=function(i,n){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeSetOCGState(n),!1),_(this,ji,_l).call(this)};class qC extends me{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Or extends me{render(){return this.container}showElementAndHideCanvas(e){var i;this.data.hasOwnCanvas&&(((i=e.previousSibling)==null?void 0:i.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return ui.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,i,n,l,o){n.includes("mouse")?e.addEventListener(n,u=>{var d;(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:l,value:o(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):e.addEventListener(n,u=>{var d;if(n==="blur"){if(!i.focused||!u.relatedTarget)return;i.focused=!1}else if(n==="focus"){if(i.focused)return;i.focused=!0}o&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:l,value:o(u)}}))})}_setEventListeners(e,i,n,l){var o,u,d;for(const[f,g]of n)(g==="Action"||(o=this.data.actions)!=null&&o[g])&&((g==="Focus"||g==="Blur")&&(i||(i={focused:!1})),this._setEventListener(e,i,f,g,l),g==="Focus"&&!((u=this.data.actions)!=null&&u.Blur)?this._setEventListener(e,i,"blur","Blur",null):g==="Blur"&&!((d=this.data.actions)!=null&&d.Focus)&&this._setEventListener(e,i,"focus","Focus",null))}_setBackgroundColor(e){const i=this.data.backgroundColor||null;e.style.backgroundColor=i===null?"transparent":ot.makeHexColor(i[0],i[1],i[2])}_setTextStyle(e){const i=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,l=this.data.defaultAppearanceData.fontSize||PC,o=e.style;let u;const d=2,f=g=>Math.round(10*g)/10;if(this.data.multiLine){const g=Math.abs(this.data.rect[3]-this.data.rect[1]-d),m=Math.round(g/(hb*l))||1,y=g/m;u=Math.min(l,f(y/hb))}else{const g=Math.abs(this.data.rect[3]-this.data.rect[1]-d);u=Math.min(l,f(g/hb))}o.fontSize=`calc(${u}px * var(--scale-factor))`,o.color=ot.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=i[this.data.textAlignment])}_setRequired(e,i){i?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",i)}}class GC extends Or{constructor(e){const i=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:i})}setPropertyOnSiblings(e,i,n,l){const o=this.annotationStorage;for(const u of this._getElementsByName(e.name,e.id))u.domElement&&(u.domElement[i]=n),o.setValue(u.id,{[l]:n})}render(){var l,o;const e=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const u=e.getValue(i,{value:this.data.fieldValue});let d=u.value||"";const f=e.getValue(i,{charLimit:this.data.maxLen}).charLimit;f&&d.length>f&&(d=d.slice(0,f));let g=u.formattedValue||((l=this.data.textContent)==null?void 0:l.join(`
`))||null;g&&this.data.comb&&(g=g.replaceAll(/\s+/g,""));const m={userValue:d,formattedValue:g,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=g??d,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",g??d),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),xr.add(n),n.setAttribute("data-element-id",i),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=pd,this._setRequired(n,this.data.required),f&&(n.maxLength=f),n.addEventListener("input",v=>{e.setValue(i,{value:v.target.value}),this.setPropertyOnSiblings(n,"value",v.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",v=>{const E=this.data.defaultFieldValue??"";n.value=m.userValue=E,m.formattedValue=null});let y=v=>{const{formattedValue:E}=m;E!=null&&(v.target.value=E),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",E=>{var C;if(m.focused)return;const{target:x}=E;m.userValue&&(x.value=m.userValue),m.lastCommittedValue=x.value,m.commitKey=1,(C=this.data.actions)!=null&&C.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",E=>{this.showElementAndHideCanvas(E.target);const x={value(C){m.userValue=C.detail.value??"",e.setValue(i,{value:m.userValue.toString()}),C.target.value=m.userValue},formattedValue(C){const{formattedValue:O}=C.detail;m.formattedValue=O,O!=null&&C.target!==document.activeElement&&(C.target.value=O),e.setValue(i,{formattedValue:O})},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{var F;const{charLimit:O}=C.detail,{target:M}=C;if(O===0){M.removeAttribute("maxLength");return}M.setAttribute("maxLength",O);let z=m.userValue;!z||z.length<=O||(z=z.slice(0,O),M.value=m.userValue=z,e.setValue(i,{value:z}),(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:z,willCommit:!0,commitKey:1,selStart:M.selectionStart,selEnd:M.selectionEnd}}))}};this._dispatchEventFromSandbox(x,E)}),n.addEventListener("keydown",E=>{var O;m.commitKey=1;let x=-1;if(E.key==="Escape"?x=0:E.key==="Enter"&&!this.data.multiLine?x=2:E.key==="Tab"&&(m.commitKey=3),x===-1)return;const{value:C}=E.target;m.lastCommittedValue!==C&&(m.lastCommittedValue=C,m.userValue=C,(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:C,willCommit:!0,commitKey:x,selStart:E.target.selectionStart,selEnd:E.target.selectionEnd}}))});const v=y;y=null,n.addEventListener("blur",E=>{var C,O;if(!m.focused||!E.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(m.focused=!1);const{value:x}=E.target;m.userValue=x,m.lastCommittedValue!==x&&((O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:x,willCommit:!0,commitKey:m.commitKey,selStart:E.target.selectionStart,selEnd:E.target.selectionEnd}})),v(E)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",E=>{var q;m.lastCommittedValue=null;const{data:x,target:C}=E,{value:O,selectionStart:M,selectionEnd:z}=C;let F=M,I=z;switch(E.inputType){case"deleteWordBackward":{const G=O.substring(0,M).match(/\w*[^\w]*$/);G&&(F-=G[0].length);break}case"deleteWordForward":{const G=O.substring(M).match(/^[^\w]*\w*/);G&&(I+=G[0].length);break}case"deleteContentBackward":M===z&&(F-=1);break;case"deleteContentForward":M===z&&(I+=1);break}E.preventDefault(),(q=this.linkService.eventBus)==null||q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:O,change:x||"",willCommit:!1,selStart:F,selEnd:I}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],E=>E.target.value)}if(y&&n.addEventListener("blur",y),this.data.comb){const E=(this.data.rect[2]-this.data.rect[0])/f;n.classList.add("comb"),n.style.letterSpacing=`calc(${E}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class jC extends Or{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class XC extends Or{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,i=this.data,n=i.id;let l=e.getValue(n,{value:i.exportValue===i.fieldValue}).value;typeof l=="string"&&(l=l!=="Off",e.setValue(n,{value:l})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return xr.add(o),o.setAttribute("data-element-id",n),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=i.fieldName,l&&o.setAttribute("checked",!0),o.setAttribute("exportValue",i.exportValue),o.tabIndex=pd,o.addEventListener("change",u=>{const{name:d,checked:f}=u.target;for(const g of this._getElementsByName(d,n)){const m=f&&g.exportValue===i.exportValue;g.domElement&&(g.domElement.checked=m),e.setValue(g.id,{value:m})}e.setValue(n,{value:f})}),o.addEventListener("resetform",u=>{const d=i.defaultFieldValue||"Off";u.target.checked=d===i.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",u=>{const d={value(f){f.target.checked=f.detail.value!=="Off",e.setValue(n,{value:f.target.checked})}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class TE extends Or{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,i=this.data,n=i.id;let l=e.getValue(n,{value:i.fieldValue===i.buttonValue}).value;if(typeof l=="string"&&(l=l!==i.buttonValue,e.setValue(n,{value:l})),l)for(const u of this._getElementsByName(i.fieldName,n))e.setValue(u.id,{value:!1});const o=document.createElement("input");if(xr.add(o),o.setAttribute("data-element-id",n),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=i.fieldName,l&&o.setAttribute("checked",!0),o.tabIndex=pd,o.addEventListener("change",u=>{const{name:d,checked:f}=u.target;for(const g of this._getElementsByName(d,n))e.setValue(g.id,{value:!1});e.setValue(n,{value:f})}),o.addEventListener("resetform",u=>{const d=i.defaultFieldValue;u.target.checked=d!=null&&d===i.buttonValue}),this.enableScripting&&this.hasJSActions){const u=i.buttonValue;o.addEventListener("updatefromsandbox",d=>{const f={value:g=>{const m=u===g.detail.value;for(const y of this._getElementsByName(g.target.name)){const v=m&&y.id===n;y.domElement&&(y.domElement.checked=v),e.setValue(y.id,{value:v})}}};this._dispatchEventFromSandbox(f,d)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class YC extends SE{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const i=e.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class VC extends Or{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,i=this.data.id,n=e.getValue(i,{value:this.data.fieldValue}),l=document.createElement("select");xr.add(l),l.setAttribute("data-element-id",i),l.disabled=this.data.readOnly,this._setRequired(l,this.data.required),l.name=this.data.fieldName,l.tabIndex=pd;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(l.size=this.data.options.length,this.data.multiSelect&&(l.multiple=!0)),l.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue;for(const v of l.options)v.selected=v.value===y});for(const m of this.data.options){const y=document.createElement("option");y.textContent=m.displayValue,y.value=m.exportValue,n.value.includes(m.exportValue)&&(y.setAttribute("selected",!0),o=!1),l.append(y)}let u=null;if(o){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),l.prepend(m),u=()=>{m.remove(),l.removeEventListener("input",u),u=null},l.addEventListener("input",u)}const d=m=>{const y=m?"value":"textContent",{options:v,multiple:E}=l;return E?Array.prototype.filter.call(v,x=>x.selected).map(x=>x[y]):v.selectedIndex===-1?null:v[v.selectedIndex][y]};let f=d(!1);const g=m=>{const y=m.target.options;return Array.prototype.map.call(y,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(l.addEventListener("updatefromsandbox",m=>{const y={value(v){u==null||u();const E=v.detail.value,x=new Set(Array.isArray(E)?E:[E]);for(const C of l.options)C.selected=x.has(C.value);e.setValue(i,{value:d(!0)}),f=d(!1)},multipleSelection(v){l.multiple=!0},remove(v){const E=l.options,x=v.detail.remove;E[x].selected=!1,l.remove(x),E.length>0&&Array.prototype.findIndex.call(E,O=>O.selected)===-1&&(E[0].selected=!0),e.setValue(i,{value:d(!0),items:g(v)}),f=d(!1)},clear(v){for(;l.length!==0;)l.remove(0);e.setValue(i,{value:null,items:[]}),f=d(!1)},insert(v){const{index:E,displayValue:x,exportValue:C}=v.detail.insert,O=l.children[E],M=document.createElement("option");M.textContent=x,M.value=C,O?O.before(M):l.append(M),e.setValue(i,{value:d(!0),items:g(v)}),f=d(!1)},items(v){const{items:E}=v.detail;for(;l.length!==0;)l.remove(0);for(const x of E){const{displayValue:C,exportValue:O}=x,M=document.createElement("option");M.textContent=C,M.value=O,l.append(M)}l.options.length>0&&(l.options[0].selected=!0),e.setValue(i,{value:d(!0),items:g(v)}),f=d(!1)},indices(v){const E=new Set(v.detail.indices);for(const x of v.target.options)x.selected=E.has(x.index);e.setValue(i,{value:d(!0)}),f=d(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(y,m)}),l.addEventListener("input",m=>{var E;const y=d(!0),v=d(!1);e.setValue(i,{value:y}),m.preventDefault(),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:f,change:v,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(l,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):l.addEventListener("input",function(m){e.setValue(i,{value:d(!0)})}),this.data.combo&&this._setTextStyle(l),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class e0 extends me{constructor(e){const{data:i,elements:n}=e;super(e,{isRenderable:me._hasPopupData(i)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new KC({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),i=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",i.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(n=>`${z0}${n}`).join(",")),this.container}}var ac,Lg,Ng,lc,nr,de,Nn,rc,zh,Fh,oc,kn,Es,Hn,Uh,zn,Bh,ar,lr,$t,Wf,i0,wE,xE,CE,ME,$f,Jf,s0;class KC{constructor({container:e,color:i,elements:n,titleObj:l,modificationDate:o,contentsObj:u,richText:d,parent:f,rect:g,parentRect:m,open:y}){w(this,$t);w(this,ac,_(this,$t,CE).bind(this));w(this,Lg,_(this,$t,s0).bind(this));w(this,Ng,_(this,$t,Jf).bind(this));w(this,lc,_(this,$t,$f).bind(this));w(this,nr,null);w(this,de,null);w(this,Nn,null);w(this,rc,null);w(this,zh,null);w(this,Fh,null);w(this,oc,null);w(this,kn,!1);w(this,Es,null);w(this,Hn,null);w(this,Uh,null);w(this,zn,null);w(this,Bh,null);w(this,ar,null);w(this,lr,!1);var v;S(this,de,e),S(this,Bh,l),S(this,Nn,u),S(this,zn,d),S(this,Fh,f),S(this,nr,i),S(this,Uh,g),S(this,oc,m),S(this,zh,n),S(this,rc,B0.toDateObject(o)),this.trigger=n.flatMap(E=>E.getElementsToTriggerPopup());for(const E of this.trigger)E.addEventListener("click",c(this,lc)),E.addEventListener("mouseenter",c(this,Ng)),E.addEventListener("mouseleave",c(this,Lg)),E.classList.add("popupTriggerArea");for(const E of n)(v=E.container)==null||v.addEventListener("keydown",c(this,ac));c(this,de).hidden=!0,y&&_(this,$t,$f).call(this)}render(){if(c(this,Es))return;const e=S(this,Es,document.createElement("div"));if(e.className="popup",c(this,nr)){const o=e.style.outlineColor=ot.makeHexColor(...c(this,nr));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:e.style.backgroundColor=ot.makeHexColor(...c(this,nr).map(d=>Math.floor(.7*(255-d)+d)))}const i=document.createElement("span");i.className="header";const n=document.createElement("h1");if(i.append(n),{dir:n.dir,str:n.textContent}=c(this,Bh),e.append(i),c(this,rc)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,rc).valueOf()})),i.append(o)}const l=c(this,$t,Wf);if(l)AE.render({xfaHtml:l,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(c(this,Nn));e.append(o)}c(this,de).append(e)}_formatContents({str:e,dir:i}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=i;const l=e.split(/(?:\r\n?|\n)/);for(let o=0,u=l.length;o<u;++o){const d=l[o];n.append(document.createTextNode(d)),o<u-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:i}){var n;c(this,ar)||S(this,ar,{contentsObj:c(this,Nn),richText:c(this,zn)}),e&&S(this,Hn,null),i&&(S(this,zn,_(this,$t,xE).call(this,i)),S(this,Nn,null)),(n=c(this,Es))==null||n.remove(),S(this,Es,null)}resetEdited(){var e;c(this,ar)&&({contentsObj:li(this,Nn)._,richText:li(this,zn)._}=c(this,ar),S(this,ar,null),(e=c(this,Es))==null||e.remove(),S(this,Es,null),S(this,Hn,null))}forceHide(){S(this,lr,this.isVisible),c(this,lr)&&(c(this,de).hidden=!0)}maybeShow(){c(this,lr)&&(c(this,Es)||_(this,$t,Jf).call(this),S(this,lr,!1),c(this,de).hidden=!1)}get isVisible(){return c(this,de).hidden===!1}}ac=new WeakMap,Lg=new WeakMap,Ng=new WeakMap,lc=new WeakMap,nr=new WeakMap,de=new WeakMap,Nn=new WeakMap,rc=new WeakMap,zh=new WeakMap,Fh=new WeakMap,oc=new WeakMap,kn=new WeakMap,Es=new WeakMap,Hn=new WeakMap,Uh=new WeakMap,zn=new WeakMap,Bh=new WeakMap,ar=new WeakMap,lr=new WeakMap,$t=new WeakSet,Wf=function(){const e=c(this,zn),i=c(this,Nn);return e!=null&&e.str&&(!(i!=null&&i.str)||i.str===e.str)&&c(this,zn).html||null},i0=function(){var e,i,n;return((n=(i=(e=c(this,$t,Wf))==null?void 0:e.attributes)==null?void 0:i.style)==null?void 0:n.fontSize)||0},wE=function(){var e,i,n;return((n=(i=(e=c(this,$t,Wf))==null?void 0:e.attributes)==null?void 0:i.style)==null?void 0:n.color)||null},xE=function(e){const i=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},l={style:{color:c(this,$t,wE),fontSize:c(this,$t,i0)?`calc(${c(this,$t,i0)}px * var(--scale-factor))`:""}};for(const o of e.split(`
`))i.push({name:"span",value:o,attributes:l});return n},CE=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,kn))&&_(this,$t,$f).call(this)},ME=function(){if(c(this,Hn)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:n,pageX:l,pageY:o}}}=c(this,Fh);let u=!!c(this,oc),d=u?c(this,oc):c(this,Uh);for(const x of c(this,zh))if(!d||ot.intersect(x.data.rect,d)!==null){d=x.data.rect,u=!0;break}const f=ot.normalizeRect([d[0],e[3]-d[1]+e[1],d[2],e[3]-d[3]+e[1]]),m=u?d[2]-d[0]+5:0,y=f[0]+m,v=f[1];S(this,Hn,[100*(y-l)/i,100*(v-o)/n]);const{style:E}=c(this,de);E.left=`${c(this,Hn)[0]}%`,E.top=`${c(this,Hn)[1]}%`},$f=function(){S(this,kn,!c(this,kn)),c(this,kn)?(_(this,$t,Jf).call(this),c(this,de).addEventListener("click",c(this,lc)),c(this,de).addEventListener("keydown",c(this,ac))):(_(this,$t,s0).call(this),c(this,de).removeEventListener("click",c(this,lc)),c(this,de).removeEventListener("keydown",c(this,ac)))},Jf=function(){c(this,Es)||this.render(),this.isVisible?c(this,kn)&&c(this,de).classList.add("focused"):(_(this,$t,ME).call(this),c(this,de).hidden=!1,c(this,de).style.zIndex=parseInt(c(this,de).style.zIndex)+1e3)},s0=function(){c(this,de).classList.remove("focused"),!(c(this,kn)||!this.isVisible)&&(c(this,de).hidden=!0,c(this,de).style.zIndex=parseInt(c(this,de).style.zIndex)-1e3)};class RE extends me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=_t.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const i of this.textContent){const n=document.createElement("span");n.textContent=i,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ph;class QC extends me{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});w(this,Ph,null)}render(){this.container.classList.add("lineAnnotation");const i=this.data,{width:n,height:l}=Kn(i.rect),o=this.svgFactory.create(n,l,!0),u=S(this,Ph,this.svgFactory.createElement("svg:line"));return u.setAttribute("x1",i.rect[2]-i.lineCoordinates[0]),u.setAttribute("y1",i.rect[3]-i.lineCoordinates[1]),u.setAttribute("x2",i.rect[2]-i.lineCoordinates[2]),u.setAttribute("y2",i.rect[3]-i.lineCoordinates[3]),u.setAttribute("stroke-width",i.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!i.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Ph)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ph=new WeakMap;var Ih;class ZC extends me{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});w(this,Ih,null)}render(){this.container.classList.add("squareAnnotation");const i=this.data,{width:n,height:l}=Kn(i.rect),o=this.svgFactory.create(n,l,!0),u=i.borderStyle.width,d=S(this,Ih,this.svgFactory.createElement("svg:rect"));return d.setAttribute("x",u/2),d.setAttribute("y",u/2),d.setAttribute("width",n-u),d.setAttribute("height",l-u),d.setAttribute("stroke-width",u||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),o.append(d),this.container.append(o),!i.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Ih)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ih=new WeakMap;var qh;class WC extends me{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});w(this,qh,null)}render(){this.container.classList.add("circleAnnotation");const i=this.data,{width:n,height:l}=Kn(i.rect),o=this.svgFactory.create(n,l,!0),u=i.borderStyle.width,d=S(this,qh,this.svgFactory.createElement("svg:ellipse"));return d.setAttribute("cx",n/2),d.setAttribute("cy",l/2),d.setAttribute("rx",n/2-u/2),d.setAttribute("ry",l/2-u/2),d.setAttribute("stroke-width",u||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),o.append(d),this.container.append(o),!i.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,qh)}addHighlightArea(){this.container.classList.add("highlightArea")}}qh=new WeakMap;var Gh;class DE extends me{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});w(this,Gh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:i,vertices:n,borderStyle:l,popupRef:o}}=this;if(!n)return this.container;const{width:u,height:d}=Kn(i),f=this.svgFactory.create(u,d,!0);let g=[];for(let y=0,v=n.length;y<v;y+=2){const E=n[y]-i[0],x=i[3]-n[y+1];g.push(`${E},${x}`)}g=g.join(" ");const m=S(this,Gh,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",g),m.setAttribute("stroke-width",l.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),f.append(m),this.container.append(f),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Gh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gh=new WeakMap;class $C extends DE{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class JC extends me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var jh;class V0 extends me{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});w(this,jh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?_t.HIGHLIGHT:_t.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:i,inkLists:n,borderStyle:l,popupRef:o}}=this,{width:u,height:d}=Kn(i),f=this.svgFactory.create(u,d,!0);for(const g of n){let m=[];for(let v=0,E=g.length;v<E;v+=2){const x=g[v]-i[0],C=i[3]-g[v+1];m.push(`${x},${C}`)}m=m.join(" ");const y=this.svgFactory.createElement(this.svgElementName);c(this,jh).push(y),y.setAttribute("points",m),y.setAttribute("stroke-width",l.width||1),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),f.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return c(this,jh)}addHighlightArea(){this.container.classList.add("highlightArea")}}jh=new WeakMap;class OE extends me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=_t.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class tM extends me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class eM extends me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class iM extends me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class LE extends me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=_t.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Xh,Yh,n0;class sM extends me{constructor(i){var l;super(i,{isRenderable:!0});w(this,Yh);w(this,Xh,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(l=this.linkService.eventBus)==null||l.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:i,data:n}=this;let l;n.hasAppearance||n.fillAlpha===0?l=document.createElement("div"):(l=document.createElement("img"),l.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(l.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),l.addEventListener("dblclick",_(this,Yh,n0).bind(this)),S(this,Xh,l);const{isMac:o}=ui.platform;return i.addEventListener("keydown",u=>{u.key==="Enter"&&(o?u.metaKey:u.ctrlKey)&&_(this,Yh,n0).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():l.classList.add("popupTriggerArea"),i.append(l),i}getElementsToTriggerPopup(){return c(this,Xh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xh=new WeakMap,Yh=new WeakSet,n0=function(){var i;(i=this.downloadManager)==null||i.openOrDownloadData(this.content,this.filename)};var Vh,rr,or,Kh,Cr,NE,a0;class nM{constructor({div:e,accessibilityManager:i,annotationCanvasMap:n,annotationEditorUIManager:l,page:o,viewport:u,structTreeLayer:d}){w(this,Cr);w(this,Vh,null);w(this,rr,null);w(this,or,new Map);w(this,Kh,null);this.div=e,S(this,Vh,i),S(this,rr,n),S(this,Kh,d||null),this.page=o,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=l}hasEditableAnnotations(){return c(this,or).size>0}async render(e){var u;const{annotations:i}=e,n=this.div;Tr(n,this.viewport);const l=new Map,o={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Y0,annotationStorage:e.annotationStorage||new I0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const d of i){if(d.noHTML)continue;const f=d.annotationType===Te.POPUP;if(f){const y=l.get(d.id);if(!y)continue;o.elements=y}else{const{width:y,height:v}=Kn(d.rect);if(y<=0||v<=0)continue}o.data=d;const g=IC.create(o);if(!g.isRenderable)continue;if(!f&&d.popupRef){const y=l.get(d.popupRef);y?y.push(g):l.set(d.popupRef,[g])}const m=g.render();d.hidden&&(m.style.visibility="hidden"),await _(this,Cr,NE).call(this,m,d.id),g._isEditable&&(c(this,or).set(g.data.id,g),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(g))}_(this,Cr,a0).call(this)}update({viewport:e}){const i=this.div;this.viewport=e,Tr(i,{rotation:e.rotation}),_(this,Cr,a0).call(this),i.hidden=!1}getEditableAnnotations(){return Array.from(c(this,or).values())}getEditableAnnotation(e){return c(this,or).get(e)}}Vh=new WeakMap,rr=new WeakMap,or=new WeakMap,Kh=new WeakMap,Cr=new WeakSet,NE=async function(e,i){var u,d;const n=e.firstChild||e,l=n.id=`${z0}${i}`,o=await((u=c(this,Kh))==null?void 0:u.getAriaAttributes(l));if(o)for(const[f,g]of o)n.setAttribute(f,g);this.div.append(e),(d=c(this,Vh))==null||d.moveElementInDOM(this.div,e,n,!1)},a0=function(){if(!c(this,rr))return;const e=this.div;for(const[i,n]of c(this,rr)){const l=e.querySelector(`[data-annotation-id="${i}"]`);if(!l)continue;n.className="annotationContent";const{firstChild:o}=l;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):l.append(n)}c(this,rr).clear()};const Ff=/\r\n?|\n/g;var Ts,Fi,Qh,cr,Ui,Se,kE,HE,zE,tg,Zn,eg,ig,FE,r0,UE;const ee=class ee extends Vt{constructor(i){super({...i,name:"freeTextEditor"});w(this,Se);w(this,Ts);w(this,Fi,"");w(this,Qh,`${this.id}-editor`);w(this,cr,null);w(this,Ui);S(this,Ts,i.color||ee._defaultColor||Vt._defaultLineColor),S(this,Ui,i.fontSize||ee._defaultFontSize)}static get _keyboardManager(){const i=ee.prototype,n=u=>u.isEmpty(),l=wr.TRANSLATE_SMALL,o=wr.TRANSLATE_BIG;return zt(this,"_keyboardManager",new gd([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],i.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],i.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],i._translateEmpty,{args:[-l,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],i._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],i._translateEmpty,{args:[l,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],i._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],i._translateEmpty,{args:[0,-l],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],i._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],i._translateEmpty,{args:[0,l],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],i._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(i,n){Vt.initialize(i,n);const l=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(l.getPropertyValue("--freetext-padding"))}static updateDefaultParams(i,n){switch(i){case bt.FREETEXT_SIZE:ee._defaultFontSize=n;break;case bt.FREETEXT_COLOR:ee._defaultColor=n;break}}updateParams(i,n){switch(i){case bt.FREETEXT_SIZE:_(this,Se,kE).call(this,n);break;case bt.FREETEXT_COLOR:_(this,Se,HE).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[bt.FREETEXT_SIZE,ee._defaultFontSize],[bt.FREETEXT_COLOR,ee._defaultColor||Vt._defaultLineColor]]}get propertiesToUpdate(){return[[bt.FREETEXT_SIZE,c(this,Ui)],[bt.FREETEXT_COLOR,c(this,Ts)]]}_translateEmpty(i,n){this._uiManager.translateSelectedEditors(i,n,!0)}getInitialTranslation(){const i=this.parentScale;return[-ee._internalPadding*i,-(ee._internalPadding+c(this,Ui))*i]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(_t.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),S(this,cr,new AbortController);const i=this._uiManager.combinedSignal(c(this,cr));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:i}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:i}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:i}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:i}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:i})}disableEditMode(){var i;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,Qh)),this._isDraggable=!0,(i=c(this,cr))==null||i.abort(),S(this,cr,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(i){this._focusEventsAllowed&&(super.focusin(i),i.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var i;this.width||(this.enableEditMode(),this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const i=c(this,Fi),n=S(this,Fi,_(this,Se,zE).call(this).trimEnd());if(i===n)return;const l=o=>{if(S(this,Fi,o),!o){this.remove();return}_(this,Se,ig).call(this),this._uiManager.rebuild(this),_(this,Se,tg).call(this)};this.addCommands({cmd:()=>{l(n)},undo:()=>{l(i)},mustExec:!1}),_(this,Se,tg).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(i){this.enterInEditMode()}keydown(i){i.target===this.div&&i.key==="Enter"&&(this.enterInEditMode(),i.preventDefault())}editorDivKeydown(i){ee._keyboardManager.exec(this,i)}editorDivFocus(i){this.isEditing=!0}editorDivBlur(i){this.isEditing=!1}editorDivInput(i){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let i,n;this.width&&(i=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,Qh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:l}=this.editorDiv;if(l.fontSize=`calc(${c(this,Ui)}px * var(--scale-factor))`,l.color=c(this,Ts),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),gg(this,this.div,["dblclick","keydown"]),this.width){const[o,u]=this.parentDimensions;if(this.annotationElementId){const{position:d}=this._initialData;let[f,g]=this.getInitialTranslation();[f,g]=this.pageTranslationToScreen(f,g);const[m,y]=this.pageDimensions,[v,E]=this.pageTranslation;let x,C;switch(this.rotation){case 0:x=i+(d[0]-v)/m,C=n+this.height-(d[1]-E)/y;break;case 90:x=i+(d[0]-v)/m,C=n-(d[1]-E)/y,[f,g]=[g,-f];break;case 180:x=i-this.width+(d[0]-v)/m,C=n-(d[1]-E)/y,[f,g]=[-f,-g];break;case 270:x=i+(d[0]-v-this.height*y)/m,C=n+(d[1]-E-this.width*m)/y,[f,g]=[-g,f];break}this.setAt(x*o,C*u,f,g)}else this.setAt(i*o,n*u,this.width*o,this.height*u);_(this,Se,ig).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(i){var x,C,O;const n=i.clipboardData||window.clipboardData,{types:l}=n;if(l.length===1&&l[0]==="text/plain")return;i.preventDefault();const o=_(x=ee,Zn,r0).call(x,n.getData("text")||"").replaceAll(Ff,`
`);if(!o)return;const u=window.getSelection();if(!u.rangeCount)return;this.editorDiv.normalize(),u.deleteFromDocument();const d=u.getRangeAt(0);if(!o.includes(`
`)){d.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),u.collapseToStart();return}const{startContainer:f,startOffset:g}=d,m=[],y=[];if(f.nodeType===Node.TEXT_NODE){const M=f.parentElement;if(y.push(f.nodeValue.slice(g).replaceAll(Ff,"")),M!==this.editorDiv){let z=m;for(const F of this.editorDiv.childNodes){if(F===M){z=y;continue}z.push(_(C=ee,Zn,eg).call(C,F))}}m.push(f.nodeValue.slice(0,g).replaceAll(Ff,""))}else if(f===this.editorDiv){let M=m,z=0;for(const F of this.editorDiv.childNodes)z++===g&&(M=y),M.push(_(O=ee,Zn,eg).call(O,F))}S(this,Fi,`${m.join(`
`)}${o}${y.join(`
`)}`),_(this,Se,ig).call(this);const v=new Range;let E=m.reduce((M,z)=>M+z.length,0);for(const{firstChild:M}of this.editorDiv.childNodes)if(M.nodeType===Node.TEXT_NODE){const z=M.nodeValue.length;if(E<=z){v.setStart(M,E),v.setEnd(M,E);break}E-=z}u.removeAllRanges(),u.addRange(v)}get contentDiv(){return this.editorDiv}static async deserialize(i,n,l){var d;let o=null;if(i instanceof RE){const{data:{defaultAppearanceData:{fontSize:f,fontColor:g},rect:m,rotation:y,id:v,popupRef:E},textContent:x,textPosition:C,parent:{page:{pageNumber:O}}}=i;if(!x||x.length===0)return null;o=i={annotationType:_t.FREETEXT,color:Array.from(g),fontSize:f,value:x.join(`
`),position:C,pageIndex:O-1,rect:m.slice(0),rotation:y,id:v,deleted:!1,popupRef:E}}const u=await super.deserialize(i,n,l);return S(u,Ui,i.fontSize),S(u,Ts,ot.makeHexColor(...i.color)),S(u,Fi,_(d=ee,Zn,r0).call(d,i.value)),u.annotationElementId=i.id||null,u._initialData=o,u}serialize(i=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=ee._internalPadding*this.parentScale,l=this.getRect(n,n),o=Vt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,Ts)),u={annotationType:_t.FREETEXT,color:o,fontSize:c(this,Ui),value:_(this,Se,FE).call(this),pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return i?u:this.annotationElementId&&!_(this,Se,UE).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(i){const n=super.renderAnnotationElement(i);if(this.deleted)return n;const{style:l}=n;l.fontSize=`calc(${c(this,Ui)}px * var(--scale-factor))`,l.color=c(this,Ts),n.replaceChildren();for(const u of c(this,Fi).split(`
`)){const d=document.createElement("div");d.append(u?document.createTextNode(u):document.createElement("br")),n.append(d)}const o=ee._internalPadding*this.parentScale;return i.updateEdited({rect:this.getRect(o,o),popupContent:c(this,Fi)}),n}resetAnnotationElement(i){super.resetAnnotationElement(i),i.resetEdited()}};Ts=new WeakMap,Fi=new WeakMap,Qh=new WeakMap,cr=new WeakMap,Ui=new WeakMap,Se=new WeakSet,kE=function(i){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-c(this,Ui))*this.parentScale),S(this,Ui,o),_(this,Se,tg).call(this)},l=c(this,Ui);this.addCommands({cmd:n.bind(this,i),undo:n.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:bt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},HE=function(i){const n=o=>{S(this,Ts,this.editorDiv.style.color=o)},l=c(this,Ts);this.addCommands({cmd:n.bind(this,i),undo:n.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:bt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},zE=function(){var l;const i=[];this.editorDiv.normalize();let n=null;for(const o of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(i.push(_(l=ee,Zn,eg).call(l,o)),n=o);return i.join(`
`)},tg=function(){const[i,n]=this.parentDimensions;let l;if(this.isAttachedToDOM)l=this.div.getBoundingClientRect();else{const{currentLayer:o,div:u}=this,d=u.style.display,f=u.classList.contains("hidden");u.classList.remove("hidden"),u.style.display="hidden",o.div.append(this.div),l=u.getBoundingClientRect(),u.remove(),u.style.display=d,u.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=l.width/i,this.height=l.height/n):(this.width=l.height/i,this.height=l.width/n),this.fixAndSetPosition()},Zn=new WeakSet,eg=function(i){return(i.nodeType===Node.TEXT_NODE?i.nodeValue:i.innerText).replaceAll(Ff,"")},ig=function(){if(this.editorDiv.replaceChildren(),!!c(this,Fi))for(const i of c(this,Fi).split(`
`)){const n=document.createElement("div");n.append(i?document.createTextNode(i):document.createElement("br")),this.editorDiv.append(n)}},FE=function(){return c(this,Fi).replaceAll(""," ")},r0=function(i){return i.replaceAll(" ","")},UE=function(i){const{value:n,fontSize:l,color:o,pageIndex:u}=this._initialData;return this._hasBeenMoved||i.value!==n||i.fontSize!==l||i.color.some((d,f)=>d!==o[f])||i.pageIndex!==u},w(ee,Zn),mt(ee,"_freeTextDefaultContent",""),mt(ee,"_internalPadding",0),mt(ee,"_defaultColor",null),mt(ee,"_defaultFontSize",10),mt(ee,"_type","freetext"),mt(ee,"_editorType",_t.FREETEXT);let l0=ee;class BE{toSVGPath(){ie("Abstract method `toSVGPath` must be implemented.")}get box(){ie("Abstract getter `box` must be implemented.")}serialize(e,i){ie("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){ie("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){ie("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var Bi,ws,cc,uc,Zs,Dt,ur,hr,Zh,Wh,hc,dc,ja,$h,kg,Hg,De,Pu,PE,IE,qE,GE,jE,XE;const _n=class _n{constructor({x:e,y:i},n,l,o,u,d=0){w(this,De);w(this,Bi);w(this,ws,[]);w(this,cc);w(this,uc);w(this,Zs,[]);w(this,Dt,new Float64Array(18));w(this,ur);w(this,hr);w(this,Zh);w(this,Wh);w(this,hc);w(this,dc);w(this,ja,[]);S(this,Bi,n),S(this,dc,o*l),S(this,uc,u),c(this,Dt).set([NaN,NaN,NaN,NaN,e,i],6),S(this,cc,d),S(this,Wh,c(_n,$h)*l),S(this,Zh,c(_n,Hg)*l),S(this,hc,l),c(this,ja).push(e,i)}isEmpty(){return isNaN(c(this,Dt)[8])}add({x:e,y:i}){var nt;S(this,ur,e),S(this,hr,i);const[n,l,o,u]=c(this,Bi);let[d,f,g,m]=c(this,Dt).subarray(8,12);const y=e-g,v=i-m,E=Math.hypot(y,v);if(E<c(this,Zh))return!1;const x=E-c(this,Wh),C=x/E,O=C*y,M=C*v;let z=d,F=f;d=g,f=m,g+=O,m+=M,(nt=c(this,ja))==null||nt.push(e,i);const I=-M/x,q=O/x,G=I*c(this,dc),Q=q*c(this,dc);return c(this,Dt).set(c(this,Dt).subarray(2,8),0),c(this,Dt).set([g+G,m+Q],4),c(this,Dt).set(c(this,Dt).subarray(14,18),12),c(this,Dt).set([g-G,m-Q],16),isNaN(c(this,Dt)[6])?(c(this,Zs).length===0&&(c(this,Dt).set([d+G,f+Q],2),c(this,Zs).push(NaN,NaN,NaN,NaN,(d+G-n)/o,(f+Q-l)/u),c(this,Dt).set([d-G,f-Q],14),c(this,ws).push(NaN,NaN,NaN,NaN,(d-G-n)/o,(f-Q-l)/u)),c(this,Dt).set([z,F,d,f,g,m],6),!this.isEmpty()):(c(this,Dt).set([z,F,d,f,g,m],6),Math.abs(Math.atan2(F-f,z-d)-Math.atan2(M,O))<Math.PI/2?([d,f,g,m]=c(this,Dt).subarray(2,6),c(this,Zs).push(NaN,NaN,NaN,NaN,((d+g)/2-n)/o,((f+m)/2-l)/u),[d,f,z,F]=c(this,Dt).subarray(14,18),c(this,ws).push(NaN,NaN,NaN,NaN,((z+d)/2-n)/o,((F+f)/2-l)/u),!0):([z,F,d,f,g,m]=c(this,Dt).subarray(0,6),c(this,Zs).push(((z+5*d)/6-n)/o,((F+5*f)/6-l)/u,((5*d+g)/6-n)/o,((5*f+m)/6-l)/u,((d+g)/2-n)/o,((f+m)/2-l)/u),[g,m,d,f,z,F]=c(this,Dt).subarray(12,18),c(this,ws).push(((z+5*d)/6-n)/o,((F+5*f)/6-l)/u,((5*d+g)/6-n)/o,((5*f+m)/6-l)/u,((d+g)/2-n)/o,((f+m)/2-l)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,Zs),i=c(this,ws);if(isNaN(c(this,Dt)[6])&&!this.isEmpty())return _(this,De,PE).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let l=6;l<e.length;l+=6)isNaN(e[l])?n.push(`L${e[l+4]} ${e[l+5]}`):n.push(`C${e[l]} ${e[l+1]} ${e[l+2]} ${e[l+3]} ${e[l+4]} ${e[l+5]}`);_(this,De,qE).call(this,n);for(let l=i.length-6;l>=6;l-=6)isNaN(i[l])?n.push(`L${i[l+4]} ${i[l+5]}`):n.push(`C${i[l]} ${i[l+1]} ${i[l+2]} ${i[l+3]} ${i[l+4]} ${i[l+5]}`);return _(this,De,IE).call(this,n),n.join(" ")}newFreeDrawOutline(e,i,n,l,o,u){return new YE(e,i,n,l,o,u)}getOutlines(){var y;const e=c(this,Zs),i=c(this,ws),n=c(this,Dt),[l,o,u,d]=c(this,Bi),f=new Float64Array((((y=c(this,ja))==null?void 0:y.length)??0)+2);for(let v=0,E=f.length-2;v<E;v+=2)f[v]=(c(this,ja)[v]-l)/u,f[v+1]=(c(this,ja)[v+1]-o)/d;if(f[f.length-2]=(c(this,ur)-l)/u,f[f.length-1]=(c(this,hr)-o)/d,isNaN(n[6])&&!this.isEmpty())return _(this,De,GE).call(this,f);const g=new Float64Array(c(this,Zs).length+24+c(this,ws).length);let m=e.length;for(let v=0;v<m;v+=2){if(isNaN(e[v])){g[v]=g[v+1]=NaN;continue}g[v]=e[v],g[v+1]=e[v+1]}m=_(this,De,XE).call(this,g,m);for(let v=i.length-6;v>=6;v-=6)for(let E=0;E<6;E+=2){if(isNaN(i[v+E])){g[m]=g[m+1]=NaN,m+=2;continue}g[m]=i[v+E],g[m+1]=i[v+E+1],m+=2}return _(this,De,jE).call(this,g,m),this.newFreeDrawOutline(g,f,c(this,Bi),c(this,hc),c(this,cc),c(this,uc))}};Bi=new WeakMap,ws=new WeakMap,cc=new WeakMap,uc=new WeakMap,Zs=new WeakMap,Dt=new WeakMap,ur=new WeakMap,hr=new WeakMap,Zh=new WeakMap,Wh=new WeakMap,hc=new WeakMap,dc=new WeakMap,ja=new WeakMap,$h=new WeakMap,kg=new WeakMap,Hg=new WeakMap,De=new WeakSet,Pu=function(){const e=c(this,Dt).subarray(4,6),i=c(this,Dt).subarray(16,18),[n,l,o,u]=c(this,Bi);return[(c(this,ur)+(e[0]-i[0])/2-n)/o,(c(this,hr)+(e[1]-i[1])/2-l)/u,(c(this,ur)+(i[0]-e[0])/2-n)/o,(c(this,hr)+(i[1]-e[1])/2-l)/u]},PE=function(){const[e,i,n,l]=c(this,Bi),[o,u,d,f]=_(this,De,Pu).call(this);return`M${(c(this,Dt)[2]-e)/n} ${(c(this,Dt)[3]-i)/l} L${(c(this,Dt)[4]-e)/n} ${(c(this,Dt)[5]-i)/l} L${o} ${u} L${d} ${f} L${(c(this,Dt)[16]-e)/n} ${(c(this,Dt)[17]-i)/l} L${(c(this,Dt)[14]-e)/n} ${(c(this,Dt)[15]-i)/l} Z`},IE=function(e){const i=c(this,ws);e.push(`L${i[4]} ${i[5]} Z`)},qE=function(e){const[i,n,l,o]=c(this,Bi),u=c(this,Dt).subarray(4,6),d=c(this,Dt).subarray(16,18),[f,g,m,y]=_(this,De,Pu).call(this);e.push(`L${(u[0]-i)/l} ${(u[1]-n)/o} L${f} ${g} L${m} ${y} L${(d[0]-i)/l} ${(d[1]-n)/o}`)},GE=function(e){const i=c(this,Dt),[n,l,o,u]=c(this,Bi),[d,f,g,m]=_(this,De,Pu).call(this),y=new Float64Array(36);return y.set([NaN,NaN,NaN,NaN,(i[2]-n)/o,(i[3]-l)/u,NaN,NaN,NaN,NaN,(i[4]-n)/o,(i[5]-l)/u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(i[16]-n)/o,(i[17]-l)/u,NaN,NaN,NaN,NaN,(i[14]-n)/o,(i[15]-l)/u],0),this.newFreeDrawOutline(y,e,c(this,Bi),c(this,hc),c(this,cc),c(this,uc))},jE=function(e,i){const n=c(this,ws);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],i),i+=6},XE=function(e,i){const n=c(this,Dt).subarray(4,6),l=c(this,Dt).subarray(16,18),[o,u,d,f]=c(this,Bi),[g,m,y,v]=_(this,De,Pu).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-o)/d,(n[1]-u)/f,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,y,v,NaN,NaN,NaN,NaN,(l[0]-o)/d,(l[1]-u)/f],i),i+=24},w(_n,$h,8),w(_n,kg,2),w(_n,Hg,c(_n,$h)+c(_n,kg));let mg=_n;var fc,dr,Fn,Jh,Pi,td,pe,Ti,Iu,qu,VE;class YE extends BE{constructor(i,n,l,o,u,d){super();w(this,Ti);w(this,fc);w(this,dr,null);w(this,Fn);w(this,Jh);w(this,Pi);w(this,td);w(this,pe);S(this,pe,i),S(this,Pi,n),S(this,fc,l),S(this,td,o),S(this,Fn,u),S(this,Jh,d),_(this,Ti,VE).call(this,d);const{x:f,y:g,width:m,height:y}=c(this,dr);for(let v=0,E=i.length;v<E;v+=2)i[v]=(i[v]-f)/m,i[v+1]=(i[v+1]-g)/y;for(let v=0,E=n.length;v<E;v+=2)n[v]=(n[v]-f)/m,n[v+1]=(n[v+1]-g)/y}toSVGPath(){const i=[`M${c(this,pe)[4]} ${c(this,pe)[5]}`];for(let n=6,l=c(this,pe).length;n<l;n+=6){if(isNaN(c(this,pe)[n])){i.push(`L${c(this,pe)[n+4]} ${c(this,pe)[n+5]}`);continue}i.push(`C${c(this,pe)[n]} ${c(this,pe)[n+1]} ${c(this,pe)[n+2]} ${c(this,pe)[n+3]} ${c(this,pe)[n+4]} ${c(this,pe)[n+5]}`)}return i.push("Z"),i.join(" ")}serialize([i,n,l,o],u){const d=l-i,f=o-n;let g,m;switch(u){case 0:g=_(this,Ti,Iu).call(this,c(this,pe),i,o,d,-f),m=_(this,Ti,Iu).call(this,c(this,Pi),i,o,d,-f);break;case 90:g=_(this,Ti,qu).call(this,c(this,pe),i,n,d,f),m=_(this,Ti,qu).call(this,c(this,Pi),i,n,d,f);break;case 180:g=_(this,Ti,Iu).call(this,c(this,pe),l,n,-d,f),m=_(this,Ti,Iu).call(this,c(this,Pi),l,n,-d,f);break;case 270:g=_(this,Ti,qu).call(this,c(this,pe),l,o,-d,-f),m=_(this,Ti,qu).call(this,c(this,Pi),l,o,-d,-f);break}return{outline:Array.from(g),points:[Array.from(m)]}}get box(){return c(this,dr)}newOutliner(i,n,l,o,u,d=0){return new mg(i,n,l,o,u,d)}getNewOutline(i,n){const{x:l,y:o,width:u,height:d}=c(this,dr),[f,g,m,y]=c(this,fc),v=u*m,E=d*y,x=l*m+f,C=o*y+g,O=this.newOutliner({x:c(this,Pi)[0]*v+x,y:c(this,Pi)[1]*E+C},c(this,fc),c(this,td),i,c(this,Jh),n??c(this,Fn));for(let M=2;M<c(this,Pi).length;M+=2)O.add({x:c(this,Pi)[M]*v+x,y:c(this,Pi)[M+1]*E+C});return O.getOutlines()}get mustRemoveSelfIntersections(){return!0}}fc=new WeakMap,dr=new WeakMap,Fn=new WeakMap,Jh=new WeakMap,Pi=new WeakMap,td=new WeakMap,pe=new WeakMap,Ti=new WeakSet,Iu=function(i,n,l,o,u){const d=new Float64Array(i.length);for(let f=0,g=i.length;f<g;f+=2)d[f]=n+i[f]*o,d[f+1]=l+i[f+1]*u;return d},qu=function(i,n,l,o,u){const d=new Float64Array(i.length);for(let f=0,g=i.length;f<g;f+=2)d[f]=n+i[f+1]*o,d[f+1]=l+i[f]*u;return d},VE=function(i){const n=c(this,pe);let l=n[4],o=n[5],u=l,d=o,f=l,g=o,m=l,y=o;const v=i?Math.max:Math.min;for(let M=6,z=n.length;M<z;M+=6){if(isNaN(n[M]))u=Math.min(u,n[M+4]),d=Math.min(d,n[M+5]),f=Math.max(f,n[M+4]),g=Math.max(g,n[M+5]),y<n[M+5]?(m=n[M+4],y=n[M+5]):y===n[M+5]&&(m=v(m,n[M+4]));else{const F=ot.bezierBoundingBox(l,o,...n.slice(M,M+6));u=Math.min(u,F[0]),d=Math.min(d,F[1]),f=Math.max(f,F[2]),g=Math.max(g,F[3]),y<F[3]?(m=F[2],y=F[3]):y===F[3]&&(m=v(m,F[2]))}l=n[M+4],o=n[M+5]}const E=u-c(this,Fn),x=d-c(this,Fn),C=f-u+2*c(this,Fn),O=g-d+2*c(this,Fn);S(this,dr,{x:E,y:x,width:C,height:O,lastPoint:[m,y]})};var ed,Xa,xs,di,KE,sg,QE,ZE,o0;class v_{constructor(e,i=0,n=0,l=!0){w(this,di);w(this,ed);w(this,Xa,[]);w(this,xs,[]);let o=1/0,u=-1/0,d=1/0,f=-1/0;const g=10**-4;for(const{x:O,y:M,width:z,height:F}of e){const I=Math.floor((O-i)/g)*g,q=Math.ceil((O+z+i)/g)*g,G=Math.floor((M-i)/g)*g,Q=Math.ceil((M+F+i)/g)*g,J=[I,G,Q,!0],nt=[q,G,Q,!1];c(this,Xa).push(J,nt),o=Math.min(o,I),u=Math.max(u,q),d=Math.min(d,G),f=Math.max(f,Q)}const m=u-o+2*n,y=f-d+2*n,v=o-n,E=d-n,x=c(this,Xa).at(l?-1:-2),C=[x[0],x[2]];for(const O of c(this,Xa)){const[M,z,F]=O;O[0]=(M-v)/m,O[1]=(z-E)/y,O[2]=(F-E)/y}S(this,ed,{x:v,y:E,width:m,height:y,lastPoint:C})}getOutlines(){c(this,Xa).sort((i,n)=>i[0]-n[0]||i[1]-n[1]||i[2]-n[2]);const e=[];for(const i of c(this,Xa))i[3]?(e.push(..._(this,di,o0).call(this,i)),_(this,di,QE).call(this,i)):(_(this,di,ZE).call(this,i),e.push(..._(this,di,o0).call(this,i)));return _(this,di,KE).call(this,e)}}ed=new WeakMap,Xa=new WeakMap,xs=new WeakMap,di=new WeakSet,KE=function(e){const i=[],n=new Set;for(const u of e){const[d,f,g]=u;i.push([d,f,u],[d,g,u])}i.sort((u,d)=>u[1]-d[1]||u[0]-d[0]);for(let u=0,d=i.length;u<d;u+=2){const f=i[u][2],g=i[u+1][2];f.push(g),g.push(f),n.add(f),n.add(g)}const l=[];let o;for(;n.size>0;){const u=n.values().next().value;let[d,f,g,m,y]=u;n.delete(u);let v=d,E=f;for(o=[d,g],l.push(o);;){let x;if(n.has(m))x=m;else if(n.has(y))x=y;else break;n.delete(x),[d,f,g,m,y]=x,v!==d&&(o.push(v,E,d,E===f?f:g),v=d),E=E===f?g:f}o.push(v,E)}return new aM(l,c(this,ed))},sg=function(e){const i=c(this,xs);let n=0,l=i.length-1;for(;n<=l;){const o=n+l>>1,u=i[o][0];if(u===e)return o;u<e?n=o+1:l=o-1}return l+1},QE=function([,e,i]){const n=_(this,di,sg).call(this,e);c(this,xs).splice(n,0,[e,i])},ZE=function([,e,i]){const n=_(this,di,sg).call(this,e);for(let l=n;l<c(this,xs).length;l++){const[o,u]=c(this,xs)[l];if(o!==e)break;if(o===e&&u===i){c(this,xs).splice(l,1);return}}for(let l=n-1;l>=0;l--){const[o,u]=c(this,xs)[l];if(o!==e)break;if(o===e&&u===i){c(this,xs).splice(l,1);return}}},o0=function(e){const[i,n,l]=e,o=[[i,n,l]],u=_(this,di,sg).call(this,l);for(let d=0;d<u;d++){const[f,g]=c(this,xs)[d];for(let m=0,y=o.length;m<y;m++){const[,v,E]=o[m];if(!(g<=v||E<=f)){if(v>=f){if(E>g)o[m][1]=g;else{if(y===1)return[];o.splice(m,1),m--,y--}continue}o[m][2]=f,E>g&&o.push([i,g,E])}}}return o};var id,gc;class aM extends BE{constructor(i,n){super();w(this,id);w(this,gc);S(this,gc,i),S(this,id,n)}toSVGPath(){const i=[];for(const n of c(this,gc)){let[l,o]=n;i.push(`M${l} ${o}`);for(let u=2;u<n.length;u+=2){const d=n[u],f=n[u+1];d===l?(i.push(`V${f}`),o=f):f===o&&(i.push(`H${d}`),l=d)}i.push("Z")}return i.join(" ")}serialize([i,n,l,o],u){const d=[],f=l-i,g=o-n;for(const m of c(this,gc)){const y=new Array(m.length);for(let v=0;v<m.length;v+=2)y[v]=i+m[v]*f,y[v+1]=o-m[v+1]*g;d.push(y)}return d}get box(){return c(this,id)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}id=new WeakMap,gc=new WeakMap;class c0 extends mg{newFreeDrawOutline(e,i,n,l,o,u){return new lM(e,i,n,l,o,u)}get classNamesForDrawing(){return["highlight","free"]}}class lM extends YE{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,i,n,l,o,u=0){return new c0(e,i,n,l,o,u)}}var Cs,fr,pc,Ce,sd,mc,nd,ad,Ya,Ms,bc,ld,Wt,u0,h0,d0,El,WE,Ta;const vi=class vi{constructor({editor:e=null,uiManager:i=null}){w(this,Wt);w(this,Cs,null);w(this,fr,null);w(this,pc);w(this,Ce,null);w(this,sd,!1);w(this,mc,!1);w(this,nd,null);w(this,ad);w(this,Ya,null);w(this,Ms,null);w(this,bc);var n;e?(S(this,mc,!1),S(this,bc,bt.HIGHLIGHT_COLOR),S(this,nd,e)):(S(this,mc,!0),S(this,bc,bt.HIGHLIGHT_DEFAULT_COLOR)),S(this,Ms,(e==null?void 0:e._uiManager)||i),S(this,ad,c(this,Ms)._eventBus),S(this,pc,(e==null?void 0:e.color)||((n=c(this,Ms))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),c(vi,ld)||S(vi,ld,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return zt(this,"_keyboardManager",new gd([[["Escape","mac+Escape"],vi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],vi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],vi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],vi.prototype._moveToPrevious],[["Home","mac+Home"],vi.prototype._moveToBeginning],[["End","mac+End"],vi.prototype._moveToEnd]]))}renderButton(){const e=S(this,Cs,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const i=c(this,Ms)._signal;e.addEventListener("click",_(this,Wt,El).bind(this),{signal:i}),e.addEventListener("keydown",_(this,Wt,d0).bind(this),{signal:i});const n=S(this,fr,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=c(this,pc),e.append(n),e}renderMainDropdown(){const e=S(this,Ce,_(this,Wt,u0).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===c(this,Cs)){_(this,Wt,El).call(this,e);return}const i=e.target.getAttribute("data-color");i&&_(this,Wt,h0).call(this,i,e)}_moveToNext(e){var i,n;if(!c(this,Wt,Ta)){_(this,Wt,El).call(this,e);return}if(e.target===c(this,Cs)){(i=c(this,Ce).firstChild)==null||i.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var i,n;if(e.target===((i=c(this,Ce))==null?void 0:i.firstChild)||e.target===c(this,Cs)){c(this,Wt,Ta)&&this._hideDropdownFromKeyboard();return}c(this,Wt,Ta)||_(this,Wt,El).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var i;if(!c(this,Wt,Ta)){_(this,Wt,El).call(this,e);return}(i=c(this,Ce).firstChild)==null||i.focus()}_moveToEnd(e){var i;if(!c(this,Wt,Ta)){_(this,Wt,El).call(this,e);return}(i=c(this,Ce).lastChild)==null||i.focus()}hideDropdown(){var e,i;(e=c(this,Ce))==null||e.classList.add("hidden"),(i=c(this,Ya))==null||i.abort(),S(this,Ya,null)}_hideDropdownFromKeyboard(){var e;if(!c(this,mc)){if(!c(this,Wt,Ta)){(e=c(this,nd))==null||e.unselect();return}this.hideDropdown(),c(this,Cs).focus({preventScroll:!0,focusVisible:c(this,sd)})}}updateColor(e){if(c(this,fr)&&(c(this,fr).style.backgroundColor=e),!c(this,Ce))return;const i=c(this,Ms).highlightColors.values();for(const n of c(this,Ce).children)n.setAttribute("aria-selected",i.next().value===e)}destroy(){var e,i;(e=c(this,Cs))==null||e.remove(),S(this,Cs,null),S(this,fr,null),(i=c(this,Ce))==null||i.remove(),S(this,Ce,null)}};Cs=new WeakMap,fr=new WeakMap,pc=new WeakMap,Ce=new WeakMap,sd=new WeakMap,mc=new WeakMap,nd=new WeakMap,ad=new WeakMap,Ya=new WeakMap,Ms=new WeakMap,bc=new WeakMap,ld=new WeakMap,Wt=new WeakSet,u0=function(){const e=document.createElement("div"),i=c(this,Ms)._signal;e.addEventListener("contextmenu",hs,{signal:i}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,l]of c(this,Ms).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",l),o.title=n,o.setAttribute("data-l10n-id",c(vi,ld)[n]);const u=document.createElement("span");o.append(u),u.className="swatch",u.style.backgroundColor=l,o.setAttribute("aria-selected",l===c(this,pc)),o.addEventListener("click",_(this,Wt,h0).bind(this,l),{signal:i}),e.append(o)}return e.addEventListener("keydown",_(this,Wt,d0).bind(this),{signal:i}),e},h0=function(e,i){i.stopPropagation(),c(this,ad).dispatch("switchannotationeditorparams",{source:this,type:c(this,bc),value:e})},d0=function(e){vi._keyboardManager.exec(this,e)},El=function(e){if(c(this,Wt,Ta)){this.hideDropdown();return}if(S(this,sd,e.detail===0),c(this,Ya)||(S(this,Ya,new AbortController),window.addEventListener("pointerdown",_(this,Wt,WE).bind(this),{signal:c(this,Ms).combinedSignal(c(this,Ya))})),c(this,Ce)){c(this,Ce).classList.remove("hidden");return}const i=S(this,Ce,_(this,Wt,u0).call(this));c(this,Cs).append(i)},WE=function(e){var i;(i=c(this,Ce))!=null&&i.contains(e.target)||this.hideDropdown()},Ta=function(){return c(this,Ce)&&!c(this,Ce).classList.contains("hidden")},w(vi,ld,null);let bg=vi;var yc,rd,Un,gr,vc,as,od,cd,pr,Rs,ii,_i,Ac,Bn,Me,Sc,ls,ud,At,f0,ng,$E,JE,t1,g0,Tl,cs,wo,e1,ag,Gu,i1,s1,n1,a1,l1;const Pt=class Pt extends Vt{constructor(i){super({...i,name:"highlightEditor"});w(this,At);w(this,yc,null);w(this,rd,0);w(this,Un);w(this,gr,null);w(this,vc,null);w(this,as,null);w(this,od,null);w(this,cd,0);w(this,pr,null);w(this,Rs,null);w(this,ii,null);w(this,_i,!1);w(this,Ac,null);w(this,Bn);w(this,Me,null);w(this,Sc,"");w(this,ls);w(this,ud,"");this.color=i.color||Pt._defaultColor,S(this,ls,i.thickness||Pt._defaultThickness),S(this,Bn,i.opacity||Pt._defaultOpacity),S(this,Un,i.boxes||null),S(this,ud,i.methodOfCreation||""),S(this,Sc,i.text||""),this._isDraggable=!1,i.highlightId>-1?(S(this,_i,!0),_(this,At,ng).call(this,i),_(this,At,Tl).call(this)):c(this,Un)&&(S(this,yc,i.anchorNode),S(this,rd,i.anchorOffset),S(this,od,i.focusNode),S(this,cd,i.focusOffset),_(this,At,f0).call(this),_(this,At,Tl).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const i=Pt.prototype;return zt(this,"_keyboardManager",new gd([[["ArrowLeft","mac+ArrowLeft"],i._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],i._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],i._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],i._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,_i)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,ls),methodOfCreation:c(this,ud)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(i){return{numberOfColors:i.get("color").size}}static initialize(i,n){var l;Vt.initialize(i,n),Pt._defaultColor||(Pt._defaultColor=((l=n.highlightColors)==null?void 0:l.values().next().value)||"#fff066")}static updateDefaultParams(i,n){switch(i){case bt.HIGHLIGHT_DEFAULT_COLOR:Pt._defaultColor=n;break;case bt.HIGHLIGHT_THICKNESS:Pt._defaultThickness=n;break}}translateInPage(i,n){}get toolbarPosition(){return c(this,Ac)}updateParams(i,n){switch(i){case bt.HIGHLIGHT_COLOR:_(this,At,$E).call(this,n);break;case bt.HIGHLIGHT_THICKNESS:_(this,At,JE).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[bt.HIGHLIGHT_DEFAULT_COLOR,Pt._defaultColor],[bt.HIGHLIGHT_THICKNESS,Pt._defaultThickness]]}get propertiesToUpdate(){return[[bt.HIGHLIGHT_COLOR,this.color||Pt._defaultColor],[bt.HIGHLIGHT_THICKNESS,c(this,ls)||Pt._defaultThickness],[bt.HIGHLIGHT_FREE,c(this,_i)]]}async addEditToolbar(){const i=await super.addEditToolbar();return i?(this._uiManager.highlightColors&&(S(this,vc,new bg({editor:this})),i.addColorPicker(c(this,vc))),i):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(_(this,At,Gu).call(this))}getBaseTranslation(){return[0,0]}getRect(i,n){return super.getRect(i,n,_(this,At,Gu).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){_(this,At,g0).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(_(this,At,Tl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(i){var l;let n=!1;this.parent&&!i?_(this,At,g0).call(this):i&&(_(this,At,Tl).call(this,i),n=!this.parent&&((l=this.div)==null?void 0:l.classList.contains("selectedEditor"))),super.setParent(i),this.show(this._isVisible),n&&this.select()}rotate(i){var o,u,d;const{drawLayer:n}=this.parent;let l;c(this,_i)?(i=(i-this.rotation+360)%360,l=_(o=Pt,cs,wo).call(o,c(this,Rs).box,i)):l=_(u=Pt,cs,wo).call(u,this,i),n.rotate(c(this,ii),i),n.rotate(c(this,Me),i),n.updateBox(c(this,ii),l),n.updateBox(c(this,Me),_(d=Pt,cs,wo).call(d,c(this,as).box,i))}render(){if(this.div)return this.div;const i=super.render();c(this,Sc)&&(i.setAttribute("aria-label",c(this,Sc)),i.setAttribute("role","mark")),c(this,_i)?i.classList.add("free"):this.div.addEventListener("keydown",_(this,At,e1).bind(this),{signal:this._uiManager._signal});const n=S(this,pr,document.createElement("div"));i.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=c(this,gr);const[l,o]=this.parentDimensions;return this.setDims(this.width*l,this.height*o),gg(this,c(this,pr),["pointerover","pointerleave"]),this.enableEditing(),i}pointerover(){this.isSelected||this.parent.drawLayer.addClass(c(this,Me),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(c(this,Me),"hovered")}_moveCaret(i){switch(this.parent.unselect(this),i){case 0:case 2:_(this,At,ag).call(this,!0);break;case 1:case 3:_(this,At,ag).call(this,!1);break}}select(){var i,n;super.select(),c(this,Me)&&((i=this.parent)==null||i.drawLayer.removeClass(c(this,Me),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(c(this,Me),"selected"))}unselect(){var i;super.unselect(),c(this,Me)&&((i=this.parent)==null||i.drawLayer.removeClass(c(this,Me),"selected"),c(this,_i)||_(this,At,ag).call(this,!1))}get _mustFixPosition(){return!c(this,_i)}show(i=this._isVisible){super.show(i),this.parent&&(this.parent.drawLayer.show(c(this,ii),i),this.parent.drawLayer.show(c(this,Me),i))}static startHighlighting(i,n,{target:l,x:o,y:u}){const{x:d,y:f,width:g,height:m}=l.getBoundingClientRect(),y=new AbortController,v=i.combinedSignal(y),E=C=>{C.preventDefault(),C.stopPropagation()},x=C=>{y.abort(),_(this,cs,a1).call(this,i,C)};window.addEventListener("blur",x,{signal:v}),window.addEventListener("pointerup",x,{signal:v}),window.addEventListener("pointerdown",E,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",hs,{signal:v}),l.addEventListener("pointermove",_(this,cs,n1).bind(this,i),{signal:v}),this._freeHighlight=new c0({x:o,y:u},[d,f,g,m],i.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=i.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(i,n,l){var C,O,M,z;let o=null;if(i instanceof OE){const{data:{quadPoints:F,rect:I,rotation:q,id:G,color:Q,opacity:J,popupRef:nt},parent:{page:{pageNumber:yt}}}=i;o=i={annotationType:_t.HIGHLIGHT,color:Array.from(Q),opacity:J,quadPoints:F,boxes:null,pageIndex:yt-1,rect:I.slice(0),rotation:q,id:G,deleted:!1,popupRef:nt}}else if(i instanceof V0){const{data:{inkLists:F,rect:I,rotation:q,id:G,color:Q,borderStyle:{rawWidth:J},popupRef:nt},parent:{page:{pageNumber:yt}}}=i;o=i={annotationType:_t.HIGHLIGHT,color:Array.from(Q),thickness:J,inkLists:F,boxes:null,pageIndex:yt-1,rect:I.slice(0),rotation:q,id:G,deleted:!1,popupRef:nt}}const{color:u,quadPoints:d,inkLists:f,opacity:g}=i,m=await super.deserialize(i,n,l);m.color=ot.makeHexColor(...u),S(m,Bn,g||1),f&&S(m,ls,i.thickness),m.annotationElementId=i.id||null,m._initialData=o;const[y,v]=m.pageDimensions,[E,x]=m.pageTranslation;if(d){const F=S(m,Un,[]);for(let I=0;I<d.length;I+=8)F.push({x:(d[I]-E)/y,y:1-(d[I+1]-x)/v,width:(d[I+2]-d[I])/y,height:(d[I+1]-d[I+5])/v});_(C=m,At,f0).call(C),_(O=m,At,Tl).call(O),m.rotate(m.rotation)}else if(f){S(m,_i,!0);const F=f[0],I={x:F[0]-E,y:v-(F[1]-x)},q=new c0(I,[0,0,y,v],1,c(m,ls)/2,!0,.001);for(let J=0,nt=F.length;J<nt;J+=2)I.x=F[J]-E,I.y=v-(F[J+1]-x),q.add(I);const{id:G,clipPathId:Q}=n.drawLayer.draw(q,m.color,m._defaultOpacity,!0);_(M=m,At,ng).call(M,{highlightOutlines:q.getOutlines(),highlightId:G,clipPathId:Q}),_(z=m,At,Tl).call(z)}return m}serialize(i=!1){if(this.isEmpty()||i)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),l=Vt._colorManager.convert(this.color),o={annotationType:_t.HIGHLIGHT,color:l,opacity:c(this,Bn),thickness:c(this,ls),quadPoints:_(this,At,i1).call(this),outlines:_(this,At,s1).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:_(this,At,Gu).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!_(this,At,l1).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(i){return i.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};yc=new WeakMap,rd=new WeakMap,Un=new WeakMap,gr=new WeakMap,vc=new WeakMap,as=new WeakMap,od=new WeakMap,cd=new WeakMap,pr=new WeakMap,Rs=new WeakMap,ii=new WeakMap,_i=new WeakMap,Ac=new WeakMap,Bn=new WeakMap,Me=new WeakMap,Sc=new WeakMap,ls=new WeakMap,ud=new WeakMap,At=new WeakSet,f0=function(){const i=new v_(c(this,Un),.001);S(this,Rs,i.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=c(this,Rs).box;const n=new v_(c(this,Un),.0025,.001,this._uiManager.direction==="ltr");S(this,as,n.getOutlines());const{lastPoint:l}=c(this,as).box;S(this,Ac,[(l[0]-this.x)/this.width,(l[1]-this.y)/this.height])},ng=function({highlightOutlines:i,highlightId:n,clipPathId:l}){var y,v;if(S(this,Rs,i),S(this,as,i.getNewOutline(c(this,ls)/2+1.5,.0025)),n>=0)S(this,ii,n),S(this,gr,l),this.parent.drawLayer.finalizeLine(n,i),S(this,Me,this.parent.drawLayer.drawOutline(c(this,as)));else if(this.parent){const E=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(c(this,ii),i),this.parent.drawLayer.updateBox(c(this,ii),_(y=Pt,cs,wo).call(y,c(this,Rs).box,(E-this.rotation+360)%360)),this.parent.drawLayer.updateLine(c(this,Me),c(this,as)),this.parent.drawLayer.updateBox(c(this,Me),_(v=Pt,cs,wo).call(v,c(this,as).box,E))}const{x:u,y:d,width:f,height:g}=i.box;switch(this.rotation){case 0:this.x=u,this.y=d,this.width=f,this.height=g;break;case 90:{const[E,x]=this.parentDimensions;this.x=d,this.y=1-u,this.width=f*x/E,this.height=g*E/x;break}case 180:this.x=1-u,this.y=1-d,this.width=f,this.height=g;break;case 270:{const[E,x]=this.parentDimensions;this.x=1-d,this.y=u,this.width=f*x/E,this.height=g*E/x;break}}const{lastPoint:m}=c(this,as).box;S(this,Ac,[(m[0]-u)/f,(m[1]-d)/g])},$E=function(i){const n=(u,d)=>{var f,g,m;this.color=u,(f=this.parent)==null||f.drawLayer.changeColor(c(this,ii),u),(g=c(this,vc))==null||g.updateColor(u),S(this,Bn,d),(m=this.parent)==null||m.drawLayer.changeOpacity(c(this,ii),d)},l=this.color,o=c(this,Bn);this.addCommands({cmd:n.bind(this,i,Pt._defaultOpacity),undo:n.bind(this,l,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:bt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(i)},!0)},JE=function(i){const n=c(this,ls),l=o=>{S(this,ls,o),_(this,At,t1).call(this,o)};this.addCommands({cmd:l.bind(this,i),undo:l.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:bt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:i},!0)},t1=function(i){if(!c(this,_i))return;_(this,At,ng).call(this,{highlightOutlines:c(this,Rs).getNewOutline(i/2)}),this.fixAndSetPosition();const[n,l]=this.parentDimensions;this.setDims(this.width*n,this.height*l)},g0=function(){c(this,ii)===null||!this.parent||(this.parent.drawLayer.remove(c(this,ii)),S(this,ii,null),this.parent.drawLayer.remove(c(this,Me)),S(this,Me,null))},Tl=function(i=this.parent){c(this,ii)===null&&({id:li(this,ii)._,clipPathId:li(this,gr)._}=i.drawLayer.draw(c(this,Rs),this.color,c(this,Bn)),S(this,Me,i.drawLayer.drawOutline(c(this,as))),c(this,pr)&&(c(this,pr).style.clipPath=c(this,gr)))},cs=new WeakSet,wo=function({x:i,y:n,width:l,height:o},u){switch(u){case 90:return{x:1-n-o,y:i,width:o,height:l};case 180:return{x:1-i-l,y:1-n-o,width:l,height:o};case 270:return{x:n,y:1-i-l,width:o,height:l}}return{x:i,y:n,width:l,height:o}},e1=function(i){Pt._keyboardManager.exec(this,i)},ag=function(i){if(!c(this,yc))return;const n=window.getSelection();i?n.setPosition(c(this,yc),c(this,rd)):n.setPosition(c(this,od),c(this,cd))},Gu=function(){return c(this,_i)?this.rotation:0},i1=function(){if(c(this,_i))return null;const[i,n]=this.pageDimensions,[l,o]=this.pageTranslation,u=c(this,Un),d=new Float32Array(u.length*8);let f=0;for(const{x:g,y:m,width:y,height:v}of u){const E=g*i+l,x=(1-m-v)*n+o;d[f]=d[f+4]=E,d[f+1]=d[f+3]=x,d[f+2]=d[f+6]=E+y*i,d[f+5]=d[f+7]=x+v*n,f+=8}return d},s1=function(i){return c(this,Rs).serialize(i,_(this,At,Gu).call(this))},n1=function(i,n){this._freeHighlight.add(n)&&i.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},a1=function(i,n){this._freeHighlight.isEmpty()?i.drawLayer.remove(this._freeHighlightId):i.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},l1=function(i){const{color:n}=this._initialData;return i.color.some((l,o)=>l!==n[o])},w(Pt,cs),mt(Pt,"_defaultColor",null),mt(Pt,"_defaultOpacity",1),mt(Pt,"_defaultThickness",12),mt(Pt,"_type","highlight"),mt(Pt,"_editorType",_t.HIGHLIGHT),mt(Pt,"_freeHighlightId",-1),mt(Pt,"_freeHighlight",null),mt(Pt,"_freeHighlightClipId","");let yg=Pt;var mr,br,Ws,Pn,rs,yr,vr,Ar,In,_c,Sr,_r,Va,tt,r1,o1,c1,u1,m0,h1,b0,d1,f1,g1,p1,m1,wl,y0,v0,A0,lg,rg,xo,S0,og,$n,b1,_0,y1,v1,E0,cg,ju;const le=class le extends Vt{constructor(i){super({...i,name:"inkEditor"});w(this,tt);w(this,mr,0);w(this,br,0);w(this,Ws,null);w(this,Pn,new Path2D);w(this,rs,!1);w(this,yr,null);w(this,vr,!1);w(this,Ar,!1);w(this,In,null);w(this,_c,null);w(this,Sr,0);w(this,_r,0);w(this,Va,null);this.color=i.color||null,this.thickness=i.thickness||null,this.opacity=i.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(i,n){Vt.initialize(i,n)}static updateDefaultParams(i,n){switch(i){case bt.INK_THICKNESS:le._defaultThickness=n;break;case bt.INK_COLOR:le._defaultColor=n;break;case bt.INK_OPACITY:le._defaultOpacity=n/100;break}}updateParams(i,n){switch(i){case bt.INK_THICKNESS:_(this,tt,r1).call(this,n);break;case bt.INK_COLOR:_(this,tt,o1).call(this,n);break;case bt.INK_OPACITY:_(this,tt,c1).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[bt.INK_THICKNESS,le._defaultThickness],[bt.INK_COLOR,le._defaultColor||Vt._defaultLineColor],[bt.INK_OPACITY,Math.round(le._defaultOpacity*100)]]}get propertiesToUpdate(){return[[bt.INK_THICKNESS,this.thickness||le._defaultThickness],[bt.INK_COLOR,this.color||le._defaultColor||Vt._defaultLineColor],[bt.INK_OPACITY,Math.round(100*(this.opacity??le._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(_(this,tt,lg).call(this),_(this,tt,rg).call(this)),this.isAttachedToDOM||(this.parent.add(this),_(this,tt,xo).call(this)),_(this,tt,ju).call(this)))}remove(){var i;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,c(this,Ws)&&(clearTimeout(c(this,Ws)),S(this,Ws,null)),(i=c(this,In))==null||i.disconnect(),S(this,In,null),super.remove())}setParent(i){!this.parent&&i?this._uiManager.removeShouldRescale(this):this.parent&&i===null&&this._uiManager.addShouldRescale(this),super.setParent(i)}onScaleChanging(){const[i,n]=this.parentDimensions,l=this.width*i,o=this.height*n;this.setDimensions(l,o)}enableEditMode(){c(this,rs)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,_(this,tt,y0).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),_(this,tt,v0).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){c(this,rs)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),S(this,rs,!0),this.div.classList.add("disabled"),_(this,tt,ju).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(i){this._focusEventsAllowed&&(super.focusin(i),this.enableEditMode())}canvasPointerdown(i){i.button!==0||!this.isInEditMode()||c(this,rs)||(this.setInForeground(),i.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),_(this,tt,h1).call(this,i.offsetX,i.offsetY))}canvasPointermove(i){i.preventDefault(),_(this,tt,b0).call(this,i.offsetX,i.offsetY)}canvasPointerup(i){i.preventDefault(),_(this,tt,A0).call(this,i)}canvasPointerleave(i){_(this,tt,A0).call(this,i)}get isResizable(){return!this.isEmpty()&&c(this,rs)}render(){if(this.div)return this.div;let i,n;this.width&&(i=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[l,o,u,d]=_(this,tt,u1).call(this);if(this.setAt(l,o,0,0),this.setDims(u,d),_(this,tt,lg).call(this),this.width){const[f,g]=this.parentDimensions;this.setAspectRatio(this.width*f,this.height*g),this.setAt(i*f,n*g,this.width*f,this.height*g),S(this,Ar,!0),_(this,tt,xo).call(this),this.setDims(this.width*f,this.height*g),_(this,tt,wl).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _(this,tt,rg).call(this),this.div}setDimensions(i,n){const l=Math.round(i),o=Math.round(n);if(c(this,Sr)===l&&c(this,_r)===o)return;S(this,Sr,l),S(this,_r,o),this.canvas.style.visibility="hidden";const[u,d]=this.parentDimensions;this.width=i/u,this.height=n/d,this.fixAndSetPosition(),c(this,rs)&&_(this,tt,S0).call(this,i,n),_(this,tt,xo).call(this),_(this,tt,wl).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(i,n,l){var O,M,z;if(i instanceof V0)return null;const o=await super.deserialize(i,n,l);o.thickness=i.thickness,o.color=ot.makeHexColor(...i.color),o.opacity=i.opacity;const[u,d]=o.pageDimensions,f=o.width*u,g=o.height*d,m=o.parentScale,y=i.thickness/2;S(o,rs,!0),S(o,Sr,Math.round(f)),S(o,_r,Math.round(g));const{paths:v,rect:E,rotation:x}=i;for(let{bezier:F}of v){F=_(O=le,$n,y1).call(O,F,E,x);const I=[];o.paths.push(I);let q=m*(F[0]-y),G=m*(F[1]-y);for(let J=2,nt=F.length;J<nt;J+=6){const yt=m*(F[J]-y),at=m*(F[J+1]-y),gt=m*(F[J+2]-y),Tt=m*(F[J+3]-y),Ot=m*(F[J+4]-y),pt=m*(F[J+5]-y);I.push([[q,G],[yt,at],[gt,Tt],[Ot,pt]]),q=Ot,G=pt}const Q=_(this,$n,b1).call(this,I);o.bezierPath2D.push(Q)}const C=_(M=o,tt,E0).call(M);return S(o,br,Math.max(Vt.MIN_SIZE,C[2]-C[0])),S(o,mr,Math.max(Vt.MIN_SIZE,C[3]-C[1])),_(z=o,tt,S0).call(z,f,g),o}serialize(){if(this.isEmpty())return null;const i=this.getRect(0,0),n=Vt._colorManager.convert(this.ctx.strokeStyle);return{annotationType:_t.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:_(this,tt,v1).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,i),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};mr=new WeakMap,br=new WeakMap,Ws=new WeakMap,Pn=new WeakMap,rs=new WeakMap,yr=new WeakMap,vr=new WeakMap,Ar=new WeakMap,In=new WeakMap,_c=new WeakMap,Sr=new WeakMap,_r=new WeakMap,Va=new WeakMap,tt=new WeakSet,r1=function(i){const n=o=>{this.thickness=o,_(this,tt,ju).call(this)},l=this.thickness;this.addCommands({cmd:n.bind(this,i),undo:n.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:bt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},o1=function(i){const n=o=>{this.color=o,_(this,tt,wl).call(this)},l=this.color;this.addCommands({cmd:n.bind(this,i),undo:n.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:bt.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},c1=function(i){const n=o=>{this.opacity=o,_(this,tt,wl).call(this)};i/=100;const l=this.opacity;this.addCommands({cmd:n.bind(this,i),undo:n.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:bt.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},u1=function(){const{parentRotation:i,parentDimensions:[n,l]}=this;switch(i){case 90:return[0,l,l,n];case 180:return[n,l,n,l];case 270:return[n,0,l,n];default:return[0,0,n,l]}},m0=function(){const{ctx:i,color:n,opacity:l,thickness:o,parentScale:u,scaleFactor:d}=this;i.lineWidth=o*u/d,i.lineCap="round",i.lineJoin="round",i.miterLimit=10,i.strokeStyle=`${n}${Mx(l)}`},h1=function(i,n){this.canvas.addEventListener("contextmenu",hs,{signal:this._uiManager._signal}),_(this,tt,v0).call(this),S(this,yr,new AbortController);const l=this._uiManager.combinedSignal(c(this,yr));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:l}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:l}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:l}),this.isEditing=!0,c(this,Ar)||(S(this,Ar,!0),_(this,tt,xo).call(this),this.thickness||(this.thickness=le._defaultThickness),this.color||(this.color=le._defaultColor||Vt._defaultLineColor),this.opacity??(this.opacity=le._defaultOpacity)),this.currentPath.push([i,n]),S(this,vr,!1),_(this,tt,m0).call(this),S(this,Va,()=>{_(this,tt,g1).call(this),c(this,Va)&&window.requestAnimationFrame(c(this,Va))}),window.requestAnimationFrame(c(this,Va))},b0=function(i,n){const[l,o]=this.currentPath.at(-1);if(this.currentPath.length>1&&i===l&&n===o)return;const u=this.currentPath;let d=c(this,Pn);if(u.push([i,n]),S(this,vr,!0),u.length<=2){d.moveTo(...u[0]),d.lineTo(i,n);return}u.length===3&&(S(this,Pn,d=new Path2D),d.moveTo(...u[0])),_(this,tt,p1).call(this,d,...u.at(-3),...u.at(-2),i,n)},d1=function(){if(this.currentPath.length===0)return;const i=this.currentPath.at(-1);c(this,Pn).lineTo(...i)},f1=function(i,n){S(this,Va,null),i=Math.min(Math.max(i,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),_(this,tt,b0).call(this,i,n),_(this,tt,d1).call(this);let l;if(this.currentPath.length!==1)l=_(this,tt,m1).call(this);else{const g=[i,n];l=[[g,g.slice(),g.slice(),g]]}const o=c(this,Pn),u=this.currentPath;this.currentPath=[],S(this,Pn,new Path2D);const d=()=>{this.allRawPaths.push(u),this.paths.push(l),this.bezierPath2D.push(o),this._uiManager.rebuild(this)},f=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(_(this,tt,lg).call(this),_(this,tt,rg).call(this)),_(this,tt,ju).call(this))};this.addCommands({cmd:d,undo:f,mustExec:!0})},g1=function(){if(!c(this,vr))return;S(this,vr,!1);const i=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),l=n.map(d=>d[0]),o=n.map(d=>d[1]);Math.min(...l)-i,Math.max(...l)+i,Math.min(...o)-i,Math.max(...o)+i;const{ctx:u}=this;u.save(),u.clearRect(0,0,this.canvas.width,this.canvas.height);for(const d of this.bezierPath2D)u.stroke(d);u.stroke(c(this,Pn)),u.restore()},p1=function(i,n,l,o,u,d,f){const g=(n+o)/2,m=(l+u)/2,y=(o+d)/2,v=(u+f)/2;i.bezierCurveTo(g+2*(o-g)/3,m+2*(u-m)/3,y+2*(o-y)/3,v+2*(u-v)/3,y,v)},m1=function(){const i=this.currentPath;if(i.length<=2)return[[i[0],i[0],i.at(-1),i.at(-1)]];const n=[];let l,[o,u]=i[0];for(l=1;l<i.length-2;l++){const[E,x]=i[l],[C,O]=i[l+1],M=(E+C)/2,z=(x+O)/2,F=[o+2*(E-o)/3,u+2*(x-u)/3],I=[M+2*(E-M)/3,z+2*(x-z)/3];n.push([[o,u],F,I,[M,z]]),[o,u]=[M,z]}const[d,f]=i[l],[g,m]=i[l+1],y=[o+2*(d-o)/3,u+2*(f-u)/3],v=[g+2*(d-g)/3,m+2*(f-m)/3];return n.push([[o,u],y,v,[g,m]]),n},wl=function(){if(this.isEmpty()){_(this,tt,og).call(this);return}_(this,tt,m0).call(this);const{canvas:i,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i.width,i.height),_(this,tt,og).call(this);for(const l of this.bezierPath2D)n.stroke(l)},y0=function(){if(c(this,_c))return;S(this,_c,new AbortController);const i=this._uiManager.combinedSignal(c(this,_c));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:i})},v0=function(){var i;(i=this.pointerdownAC)==null||i.abort(),this.pointerdownAC=null},A0=function(i){var n;(n=c(this,yr))==null||n.abort(),S(this,yr,null),_(this,tt,y0).call(this),c(this,Ws)&&clearTimeout(c(this,Ws)),S(this,Ws,setTimeout(()=>{S(this,Ws,null),this.canvas.removeEventListener("contextmenu",hs)},10)),_(this,tt,f1).call(this,i.offsetX,i.offsetY),this.addToAnnotationStorage(),this.setInBackground()},lg=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},rg=function(){S(this,In,new ResizeObserver(i=>{const n=i[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),c(this,In).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var i;(i=c(this,In))==null||i.disconnect(),S(this,In,null)},{once:!0})},xo=function(){if(!c(this,Ar))return;const[i,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*i),this.canvas.height=Math.ceil(this.height*n),_(this,tt,og).call(this)},S0=function(i,n){const l=_(this,tt,cg).call(this),o=(i-l)/c(this,br),u=(n-l)/c(this,mr);this.scaleFactor=Math.min(o,u)},og=function(){const i=_(this,tt,cg).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+i,this.translationY*this.scaleFactor+i)},$n=new WeakSet,b1=function(i){const n=new Path2D;for(let l=0,o=i.length;l<o;l++){const[u,d,f,g]=i[l];l===0&&n.moveTo(...u),n.bezierCurveTo(d[0],d[1],f[0],f[1],g[0],g[1])}return n},_0=function(i,n,l){const[o,u,d,f]=n;switch(l){case 0:for(let g=0,m=i.length;g<m;g+=2)i[g]+=o,i[g+1]=f-i[g+1];break;case 90:for(let g=0,m=i.length;g<m;g+=2){const y=i[g];i[g]=i[g+1]+o,i[g+1]=y+u}break;case 180:for(let g=0,m=i.length;g<m;g+=2)i[g]=d-i[g],i[g+1]+=u;break;case 270:for(let g=0,m=i.length;g<m;g+=2){const y=i[g];i[g]=d-i[g+1],i[g+1]=f-y}break;default:throw new Error("Invalid rotation")}return i},y1=function(i,n,l){const[o,u,d,f]=n;switch(l){case 0:for(let g=0,m=i.length;g<m;g+=2)i[g]-=o,i[g+1]=f-i[g+1];break;case 90:for(let g=0,m=i.length;g<m;g+=2){const y=i[g];i[g]=i[g+1]-u,i[g+1]=y-o}break;case 180:for(let g=0,m=i.length;g<m;g+=2)i[g]=d-i[g],i[g+1]-=u;break;case 270:for(let g=0,m=i.length;g<m;g+=2){const y=i[g];i[g]=f-i[g+1],i[g+1]=d-y}break;default:throw new Error("Invalid rotation")}return i},v1=function(i,n,l,o){var m,y;const u=[],d=this.thickness/2,f=i*n+d,g=i*l+d;for(const v of this.paths){const E=[],x=[];for(let C=0,O=v.length;C<O;C++){const[M,z,F,I]=v[C];if(M[0]===I[0]&&M[1]===I[1]&&O===1){const Tt=i*M[0]+f,Ot=i*M[1]+g;E.push(Tt,Ot),x.push(Tt,Ot);break}const q=i*M[0]+f,G=i*M[1]+g,Q=i*z[0]+f,J=i*z[1]+g,nt=i*F[0]+f,yt=i*F[1]+g,at=i*I[0]+f,gt=i*I[1]+g;C===0&&(E.push(q,G),x.push(q,G)),E.push(Q,J,nt,yt,at,gt),x.push(Q,J),C===O-1&&x.push(at,gt)}u.push({bezier:_(m=le,$n,_0).call(m,E,o,this.rotation),points:_(y=le,$n,_0).call(y,x,o,this.rotation)})}return u},E0=function(){let i=1/0,n=-1/0,l=1/0,o=-1/0;for(const u of this.paths)for(const[d,f,g,m]of u){const y=ot.bezierBoundingBox(...d,...f,...g,...m);i=Math.min(i,y[0]),l=Math.min(l,y[1]),n=Math.max(n,y[2]),o=Math.max(o,y[3])}return[i,l,n,o]},cg=function(){return c(this,rs)?Math.ceil(this.thickness*this.parentScale):0},ju=function(i=!1){if(this.isEmpty())return;if(!c(this,rs)){_(this,tt,wl).call(this);return}const n=_(this,tt,E0).call(this),l=_(this,tt,cg).call(this);S(this,br,Math.max(Vt.MIN_SIZE,n[2]-n[0])),S(this,mr,Math.max(Vt.MIN_SIZE,n[3]-n[1]));const o=Math.ceil(l+c(this,br)*this.scaleFactor),u=Math.ceil(l+c(this,mr)*this.scaleFactor),[d,f]=this.parentDimensions;this.width=o/d,this.height=u/f,this.setAspectRatio(o,u);const g=this.translationX,m=this.translationY;this.translationX=-n[0],this.translationY=-n[1],_(this,tt,xo).call(this),_(this,tt,wl).call(this),S(this,Sr,o),S(this,_r,u),this.setDims(o,u);const y=i?l/this.scaleFactor/2:0;this.translate(g-this.translationX-y,m-this.translationY-y)},w(le,$n),mt(le,"_defaultColor",null),mt(le,"_defaultOpacity",1),mt(le,"_defaultThickness",1),mt(le,"_type","ink"),mt(le,"_editorType",_t.INK);let p0=le;var oe,Ve,Ka,qn,Qa,Ec,$s,Gn,Js,Ii,Tc,Ht,Xu,Yu,ug,w0,A1,hg,x0,dg,S1,_1;const Qu=class Qu extends Vt{constructor(i){super({...i,name:"stampEditor"});w(this,Ht);w(this,oe,null);w(this,Ve,null);w(this,Ka,null);w(this,qn,null);w(this,Qa,null);w(this,Ec,"");w(this,$s,null);w(this,Gn,null);w(this,Js,null);w(this,Ii,!1);w(this,Tc,!1);S(this,qn,i.bitmapUrl),S(this,Qa,i.bitmapFile)}static initialize(i,n){Vt.initialize(i,n)}static get supportedTypes(){return zt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return zt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(i){return this.supportedTypes.includes(i)}static paste(i,n){n.pasteEditor(_t.STAMP,{bitmapFile:i.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var i;return{type:"stamp",hasAltText:!!((i=this.altTextData)!=null&&i.altText)}}static computeTelemetryFinalData(i){const n=i.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(i=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:l}=this._uiManager;if(!l)throw new Error("No ML.");if(!await l.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:u,height:d}=i||this.copyCanvas(null,null,!0).imageData,f=await l.guess({name:"altText",request:{data:o,width:u,height:d,channels:o.length/(u*d)}});if(!f)throw new Error("No response from the AI service.");if(f.error)throw new Error("Error from the AI service.");if(f.cancel)return null;if(!f.output)throw new Error("No valid response from the AI service.");const g=f.output;return await this.setGuessedAltText(g),n&&!this.hasAltTextData()&&(this.altTextData={alt:g,decorative:!1}),g}remove(){var i,n;c(this,Ve)&&(S(this,oe,null),this._uiManager.imageManager.deleteId(c(this,Ve)),(i=c(this,$s))==null||i.remove(),S(this,$s,null),(n=c(this,Gn))==null||n.disconnect(),S(this,Gn,null),c(this,Js)&&(clearTimeout(c(this,Js)),S(this,Js,null))),super.remove()}rebuild(){if(!this.parent){c(this,Ve)&&_(this,Ht,ug).call(this);return}super.rebuild(),this.div!==null&&(c(this,Ve)&&c(this,$s)===null&&_(this,Ht,ug).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(c(this,Ka)||c(this,oe)||c(this,qn)||c(this,Qa)||c(this,Ve))}get isResizable(){return!0}render(){if(this.div)return this.div;let i,n;if(this.width&&(i=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),c(this,oe)?_(this,Ht,w0).call(this):_(this,Ht,ug).call(this),this.width&&!this.annotationElementId){const[l,o]=this.parentDimensions;this.setAt(i*l,n*o,this.width*l,this.height*o)}return this.div}copyCanvas(i,n,l=!1){var E;i||(i=224);const{width:o,height:u}=c(this,oe),d=new Sb;let f=c(this,oe),g=o,m=u,y=null;if(n){if(o>n||u>n){const J=Math.min(n/o,n/u);g=Math.floor(o*J),m=Math.floor(u*J)}y=document.createElement("canvas");const x=y.width=Math.ceil(g*d.sx),C=y.height=Math.ceil(m*d.sy);c(this,Ii)||(f=_(this,Ht,hg).call(this,x,C));const O=y.getContext("2d");O.filter=this._uiManager.hcmFilter;let M="white",z="#cfcfd8";this._uiManager.hcmFilter!=="none"?z="black":(E=window.matchMedia)!=null&&E.call(window,"(prefers-color-scheme: dark)").matches&&(M="#8f8f9d",z="#42414d");const F=15,I=F*d.sx,q=F*d.sy,G=new OffscreenCanvas(I*2,q*2),Q=G.getContext("2d");Q.fillStyle=M,Q.fillRect(0,0,I*2,q*2),Q.fillStyle=z,Q.fillRect(0,0,I,q),Q.fillRect(I,q,I,q),O.fillStyle=O.createPattern(G,"repeat"),O.fillRect(0,0,x,C),O.drawImage(f,0,0,f.width,f.height,0,0,x,C)}let v=null;if(l){let x,C;if(d.symmetric&&f.width<i&&f.height<i)x=f.width,C=f.height;else if(f=c(this,oe),o>i||u>i){const z=Math.min(i/o,i/u);x=Math.floor(o*z),C=Math.floor(u*z),c(this,Ii)||(f=_(this,Ht,hg).call(this,x,C))}const M=new OffscreenCanvas(x,C).getContext("2d",{willReadFrequently:!0});M.drawImage(f,0,0,f.width,f.height,0,0,x,C),v={width:x,height:C,data:M.getImageData(0,0,x,C).data}}return{canvas:y,width:g,height:m,imageData:v}}getImageForAltText(){return c(this,$s)}static async deserialize(i,n,l){var C;let o=null;if(i instanceof LE){const{data:{rect:O,rotation:M,id:z,structParent:F,popupRef:I},container:q,parent:{page:{pageNumber:G}}}=i,Q=q.querySelector("canvas"),J=l.imageManager.getFromCanvas(q.id,Q);Q.remove();const nt=((C=await n._structTree.getAriaAttributes(`${z0}${z}`))==null?void 0:C.get("aria-label"))||"";o=i={annotationType:_t.STAMP,bitmapId:J.id,bitmap:J.bitmap,pageIndex:G-1,rect:O.slice(0),rotation:M,id:z,deleted:!1,accessibilityData:{decorative:!1,altText:nt},isSvg:!1,structParent:F,popupRef:I}}const u=await super.deserialize(i,n,l),{rect:d,bitmap:f,bitmapUrl:g,bitmapId:m,isSvg:y,accessibilityData:v}=i;m&&l.imageManager.isValidId(m)?(S(u,Ve,m),f&&S(u,oe,f)):S(u,qn,g),S(u,Ii,y);const[E,x]=u.pageDimensions;return u.width=(d[2]-d[0])/E,u.height=(d[3]-d[1])/x,u.annotationElementId=i.id||null,v&&(u.altTextData=v),u._initialData=o,S(u,Tc,!!o),u}serialize(i=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const l={annotationType:_t.STAMP,bitmapId:c(this,Ve),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,Ii),structTreeParentId:this._structTreeParentId};if(i)return l.bitmapUrl=_(this,Ht,dg).call(this,!0),l.accessibilityData=this.serializeAltText(!0),l;const{decorative:o,altText:u}=this.serializeAltText(!1);if(!o&&u&&(l.accessibilityData={type:"Figure",alt:u}),this.annotationElementId){const f=_(this,Ht,_1).call(this,l);if(f.isSame)return null;f.isSameAltText?delete l.accessibilityData:l.accessibilityData.structParent=this._initialData.structParent??-1}if(l.id=this.annotationElementId,n===null)return l;n.stamps||(n.stamps=new Map);const d=c(this,Ii)?(l.rect[2]-l.rect[0])*(l.rect[3]-l.rect[1]):null;if(!n.stamps.has(c(this,Ve)))n.stamps.set(c(this,Ve),{area:d,serialized:l}),l.bitmap=_(this,Ht,dg).call(this,!1);else if(c(this,Ii)){const f=n.stamps.get(c(this,Ve));d>f.area&&(f.area=d,f.serialized.bitmap.close(),f.serialized.bitmap=_(this,Ht,dg).call(this,!1))}return l}renderAnnotationElement(i){return i.updateEdited({rect:this.getRect(0,0)}),null}};oe=new WeakMap,Ve=new WeakMap,Ka=new WeakMap,qn=new WeakMap,Qa=new WeakMap,Ec=new WeakMap,$s=new WeakMap,Gn=new WeakMap,Js=new WeakMap,Ii=new WeakMap,Tc=new WeakMap,Ht=new WeakSet,Xu=function(i,n=!1){if(!i){this.remove();return}S(this,oe,i.bitmap),n||(S(this,Ve,i.id),S(this,Ii,i.isSvg)),i.file&&S(this,Ec,i.file.name),_(this,Ht,w0).call(this)},Yu=function(){if(S(this,Ka,null),this._uiManager.enableWaiting(!1),!!c(this,$s)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,oe)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,oe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},ug=function(){if(c(this,Ve)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,Ve)).then(l=>_(this,Ht,Xu).call(this,l,!0)).finally(()=>_(this,Ht,Yu).call(this));return}if(c(this,qn)){const l=c(this,qn);S(this,qn,null),this._uiManager.enableWaiting(!0),S(this,Ka,this._uiManager.imageManager.getFromUrl(l).then(o=>_(this,Ht,Xu).call(this,o)).finally(()=>_(this,Ht,Yu).call(this)));return}if(c(this,Qa)){const l=c(this,Qa);S(this,Qa,null),this._uiManager.enableWaiting(!0),S(this,Ka,this._uiManager.imageManager.getFromFile(l).then(o=>_(this,Ht,Xu).call(this,o)).finally(()=>_(this,Ht,Yu).call(this)));return}const i=document.createElement("input");i.type="file",i.accept=Qu.supportedTypesStr;const n=this._uiManager._signal;S(this,Ka,new Promise(l=>{i.addEventListener("change",async()=>{if(!i.files||i.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(i.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),_(this,Ht,Xu).call(this,o)}l()},{signal:n}),i.addEventListener("cancel",()=>{this.remove(),l()},{signal:n})}).finally(()=>_(this,Ht,Yu).call(this))),i.click()},w0=function(){const{div:i}=this;let{width:n,height:l}=c(this,oe);const[o,u]=this.pageDimensions,d=.75;if(this.width)n=this.width*o,l=this.height*u;else if(n>d*o||l>d*u){const y=Math.min(d*o/n,d*u/l);n*=y,l*=y}const[f,g]=this.parentDimensions;this.setDims(n*f/o,l*g/u),this._uiManager.enableWaiting(!1);const m=S(this,$s,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(i.hidden=!1),_(this,Ht,x0).call(this,n,l),_(this,Ht,S1).call(this),c(this,Tc)||(this.parent.addUndoableEditor(this),S(this,Tc,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,Ec)&&m.setAttribute("aria-label",c(this,Ec))},A1=function(i,n){var d;const[l,o]=this.parentDimensions;this.width=i/l,this.height=n/o,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,c(this,Js)!==null&&clearTimeout(c(this,Js)),S(this,Js,setTimeout(()=>{S(this,Js,null),_(this,Ht,x0).call(this,i,n)},200))},hg=function(i,n){const{width:l,height:o}=c(this,oe);let u=l,d=o,f=c(this,oe);for(;u>2*i||d>2*n;){const g=u,m=d;u>2*i&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),d>2*n&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2));const y=new OffscreenCanvas(u,d);y.getContext("2d").drawImage(f,0,0,g,m,0,0,u,d),f=y.transferToImageBitmap()}return f},x0=function(i,n){const l=new Sb,o=Math.ceil(i*l.sx),u=Math.ceil(n*l.sy),d=c(this,$s);if(!d||d.width===o&&d.height===u)return;d.width=o,d.height=u;const f=c(this,Ii)?c(this,oe):_(this,Ht,hg).call(this,o,u),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,o,u)},dg=function(i){if(i){if(c(this,Ii)){const o=this._uiManager.imageManager.getSvgUrl(c(this,Ve));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=c(this,oe),n.getContext("2d").drawImage(c(this,oe),0,0),n.toDataURL()}if(c(this,Ii)){const[n,l]=this.pageDimensions,o=Math.round(this.width*n*Ja.PDF_TO_CSS_UNITS),u=Math.round(this.height*l*Ja.PDF_TO_CSS_UNITS),d=new OffscreenCanvas(o,u);return d.getContext("2d").drawImage(c(this,oe),0,0,c(this,oe).width,c(this,oe).height,0,0,o,u),d.transferToImageBitmap()}return structuredClone(c(this,oe))},S1=function(){this._uiManager._signal&&(S(this,Gn,new ResizeObserver(i=>{const n=i[0].contentRect;n.width&&n.height&&_(this,Ht,A1).call(this,n.width,n.height)})),c(this,Gn).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var i;(i=c(this,Gn))==null||i.disconnect(),S(this,Gn,null)},{once:!0}))},_1=function(i){var g;const{rect:n,pageIndex:l,accessibilityData:{altText:o}}=this._initialData,u=i.rect.every((m,y)=>Math.abs(m-n[y])<1),d=i.pageIndex===l,f=(((g=i.accessibilityData)==null?void 0:g.alt)||"")===o;return{isSame:u&&d&&f,isSameAltText:f}},mt(Qu,"_type","stamp"),mt(Qu,"_editorType",_t.STAMP);let T0=Qu;var Er,wc,tn,Za,jn,qi,Wa,xc,Cc,si,Xn,ut,$a,Ke,E1,M0,R0,D0,fg;const ps=class ps{constructor({uiManager:e,pageIndex:i,div:n,structTreeLayer:l,accessibilityManager:o,annotationLayer:u,drawLayer:d,textLayer:f,viewport:g,l10n:m}){w(this,Ke);w(this,Er);w(this,wc,!1);w(this,tn,null);w(this,Za,null);w(this,jn,null);w(this,qi,new Map);w(this,Wa,!1);w(this,xc,!1);w(this,Cc,!1);w(this,si,null);w(this,Xn,null);w(this,ut);const y=[...c(ps,$a).values()];if(!ps._initialized){ps._initialized=!0;for(const v of y)v.initialize(m,e)}e.registerEditorTypes(y),S(this,ut,e),this.pageIndex=i,this.div=n,S(this,Er,o),S(this,tn,u),this.viewport=g,S(this,si,f),this.drawLayer=d,this._structTree=l,c(this,ut).addLayer(this)}get isEmpty(){return c(this,qi).size===0}get isInvisible(){return this.isEmpty&&c(this,ut).getMode()===_t.NONE}updateToolbar(e){c(this,ut).updateToolbar(e)}updateMode(e=c(this,ut).getMode()){switch(_(this,Ke,fg).call(this),e){case _t.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case _t.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case _t.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;for(const n of c(ps,$a).values())i.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var i;return e===((i=c(this,si))==null?void 0:i.div)}addInkEditorIfNeeded(e){if(c(this,ut).getMode()!==_t.INK)return;if(!e){for(const n of c(this,qi).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){c(this,ut).setEditingState(e)}addCommands(e){c(this,ut).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var i;(i=c(this,tn))==null||i.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of c(this,qi).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(c(this,ut).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!c(this,tn))return;const i=c(this,tn).getEditableAnnotations();for(const n of i){if(n.hide(),c(this,ut).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const l=await this.deserialize(n);l&&(this.addOrRebuild(l),l.enableEditing())}}disable(){var l;S(this,Cc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,i=new Map;for(const o of c(this,qi).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){e.set(o.annotationElementId,o);continue}else i.set(o.annotationElementId,o);(l=this.getEditableAnnotation(o.annotationElementId))==null||l.show(),o.remove()}if(c(this,tn)){const o=c(this,tn).getEditableAnnotations();for(const u of o){const{id:d}=u.data;if(c(this,ut).isDeletedAnnotationElement(d))continue;let f=i.get(d);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=e.get(d),f&&(c(this,ut).addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}_(this,Ke,fg).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of c(ps,$a).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),S(this,Cc,!1)}getEditableAnnotation(e){var i;return((i=c(this,tn))==null?void 0:i.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,ut).getActive()!==e&&c(this,ut).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,si))!=null&&e.div&&!c(this,Xn)){S(this,Xn,new AbortController);const i=c(this,ut).combinedSignal(c(this,Xn));c(this,si).div.addEventListener("pointerdown",_(this,Ke,E1).bind(this),{signal:i}),c(this,si).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,si))!=null&&e.div&&c(this,Xn)&&(c(this,Xn).abort(),S(this,Xn,null),c(this,si).div.classList.remove("highlighting"))}enableClick(){if(c(this,Za))return;S(this,Za,new AbortController);const e=c(this,ut).combinedSignal(c(this,Za));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=c(this,Za))==null||e.abort(),S(this,Za,null)}attach(e){c(this,qi).set(e.id,e);const{annotationElementId:i}=e;i&&c(this,ut).isDeletedAnnotationElement(i)&&c(this,ut).removeDeletedAnnotationElement(e)}detach(e){var i;c(this,qi).delete(e.id),(i=c(this,Er))==null||i.removePointerInTextLayer(e.contentDiv),!c(this,Cc)&&e.annotationElementId&&c(this,ut).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,ut).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,c(this,xc)||this.addInkEditorIfNeeded(!1)}changeParent(e){var i;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,ut).addDeletedAnnotationElement(e.annotationElementId),Vt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(i=e.parent)==null||i.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,ut).addEditor(e),this.attach(e),!e.isAttachedToDOM){const i=e.render();this.div.append(i),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),c(this,ut).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:i}=document;e.div.contains(i)&&!c(this,jn)&&(e._focusEventsAllowed=!1,S(this,jn,setTimeout(()=>{S(this,jn,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,ut)._signal}),i.focus())},0))),e._structTreeParentId=(n=c(this,Er))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const i=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:i,undo:n,mustExec:!1})}getNextId(){return c(this,ut).getId()}combinedSignal(e){return c(this,ut).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,Ke,M0))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,i){c(this,ut).updateToolbar(e),c(this,ut).updateMode(e);const{offsetX:n,offsetY:l}=_(this,Ke,D0).call(this),o=this.getNextId(),u=_(this,Ke,R0).call(this,{parent:this,id:o,x:n,y:l,uiManager:c(this,ut),isCentered:!0,...i});u&&this.add(u)}async deserialize(e){var i;return await((i=c(ps,$a).get(e.annotationType??e.annotationEditorType))==null?void 0:i.deserialize(e,this,c(this,ut)))||null}createAndAddNewEditor(e,i,n={}){const l=this.getNextId(),o=_(this,Ke,R0).call(this,{parent:this,id:l,x:e.offsetX,y:e.offsetY,uiManager:c(this,ut),isCentered:i,...n});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(_(this,Ke,D0).call(this),!0)}setSelected(e){c(this,ut).setSelected(e)}toggleSelected(e){c(this,ut).toggleSelected(e)}unselect(e){c(this,ut).unselect(e)}pointerup(e){const{isMac:i}=ui.platform;if(!(e.button!==0||e.ctrlKey&&i)&&e.target===this.div&&c(this,Wa)){if(S(this,Wa,!1),!c(this,wc)){S(this,wc,!0);return}if(c(this,ut).getMode()===_t.STAMP){c(this,ut).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(c(this,ut).getMode()===_t.HIGHLIGHT&&this.enableTextSelection(),c(this,Wa)){S(this,Wa,!1);return}const{isMac:i}=ui.platform;if(e.button!==0||e.ctrlKey&&i||e.target!==this.div)return;S(this,Wa,!0);const n=c(this,ut).getActive();S(this,wc,!n||n.isEmpty())}findNewParent(e,i,n){const l=c(this,ut).findParent(i,n);return l===null||l===this?!1:(l.changeParent(e),!0)}destroy(){var e,i;((e=c(this,ut).getActive())==null?void 0:e.parent)===this&&(c(this,ut).commitOrRemove(),c(this,ut).setActiveEditor(null)),c(this,jn)&&(clearTimeout(c(this,jn)),S(this,jn,null));for(const n of c(this,qi).values())(i=c(this,Er))==null||i.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,c(this,qi).clear(),c(this,ut).removeLayer(this)}render({viewport:e}){this.viewport=e,Tr(this.div,e);for(const i of c(this,ut).getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:e}){c(this,ut).commitOrRemove(),_(this,Ke,fg).call(this);const i=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Tr(this.div,{rotation:n}),i!==n)for(const l of c(this,qi).values())l.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:i}=this.viewport.rawDims;return[e,i]}get scale(){return c(this,ut).viewParameters.realScale}};Er=new WeakMap,wc=new WeakMap,tn=new WeakMap,Za=new WeakMap,jn=new WeakMap,qi=new WeakMap,Wa=new WeakMap,xc=new WeakMap,Cc=new WeakMap,si=new WeakMap,Xn=new WeakMap,ut=new WeakMap,$a=new WeakMap,Ke=new WeakSet,E1=function(e){c(this,ut).unselectAll();const{target:i}=e;if(i===c(this,si).div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&c(this,si).div.contains(i)){const{isMac:n}=ui.platform;if(e.button!==0||e.ctrlKey&&n)return;c(this,ut).showAllEditors("highlight",!0,!0),c(this,si).div.classList.add("free"),this.toggleDrawing(),yg.startHighlighting(this,c(this,ut).direction==="ltr",{target:c(this,si).div,x:e.x,y:e.y}),c(this,si).div.addEventListener("pointerup",()=>{c(this,si).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,ut)._signal}),e.preventDefault()}},M0=function(){return c(ps,$a).get(c(this,ut).getMode())},R0=function(e){const i=c(this,Ke,M0);return i?new i.prototype.constructor(e):null},D0=function(){const{x:e,y:i,width:n,height:l}=this.div.getBoundingClientRect(),o=Math.max(0,e),u=Math.max(0,i),d=Math.min(window.innerWidth,e+n),f=Math.min(window.innerHeight,i+l),g=(o+d)/2-e,m=(u+f)/2-i,[y,v]=this.viewport.rotation%180===0?[g,m]:[m,g];return{offsetX:y,offsetY:v}},fg=function(){S(this,xc,!0);for(const e of c(this,qi).values())e.isEmpty()&&e.remove();S(this,xc,!1)},mt(ps,"_initialized",!1),w(ps,$a,new Map([l0,p0,T0,yg].map(e=>[e._editorType,e])));let C0=ps;var en,hd,Ae,Yn,dd,L0,Mr,N0,T1;const je=class je{constructor({pageIndex:e}){w(this,Mr);w(this,en,null);w(this,hd,0);w(this,Ae,new Map);w(this,Yn,new Map);this.pageIndex=e}setParent(e){if(!c(this,en)){S(this,en,e);return}if(c(this,en)!==e){if(c(this,Ae).size>0)for(const i of c(this,Ae).values())i.remove(),e.append(i);S(this,en,e)}}static get _svgFactory(){return zt(this,"_svgFactory",new Y0)}draw(e,i,n,l=!1){const o=li(this,hd)._++,u=_(this,Mr,N0).call(this,e.box);u.classList.add(...e.classNamesForDrawing);const d=je._svgFactory.createElement("defs");u.append(d);const f=je._svgFactory.createElement("path");d.append(f);const g=`path_p${this.pageIndex}_${o}`;f.setAttribute("id",g),f.setAttribute("d",e.toSVGPath()),l&&c(this,Yn).set(o,f);const m=_(this,Mr,T1).call(this,d,g),y=je._svgFactory.createElement("use");return u.append(y),u.setAttribute("fill",i),u.setAttribute("fill-opacity",n),y.setAttribute("href",`#${g}`),c(this,Ae).set(o,u),{id:o,clipPathId:`url(#${m})`}}drawOutline(e){const i=li(this,hd)._++,n=_(this,Mr,N0).call(this,e.box);n.classList.add(...e.classNamesForOutlining);const l=je._svgFactory.createElement("defs");n.append(l);const o=je._svgFactory.createElement("path");l.append(o);const u=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",u),o.setAttribute("d",e.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke");let d;if(e.mustRemoveSelfIntersections){const m=je._svgFactory.createElement("mask");l.append(m),d=`mask_p${this.pageIndex}_${i}`,m.setAttribute("id",d),m.setAttribute("maskUnits","objectBoundingBox");const y=je._svgFactory.createElement("rect");m.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const v=je._svgFactory.createElement("use");m.append(v),v.setAttribute("href",`#${u}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const f=je._svgFactory.createElement("use");n.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const g=f.cloneNode();return n.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),c(this,Ae).set(i,n),i}finalizeLine(e,i){const n=c(this,Yn).get(e);c(this,Yn).delete(e),this.updateBox(e,i.box),n.setAttribute("d",i.toSVGPath())}updateLine(e,i){c(this,Ae).get(e).firstChild.firstChild.setAttribute("d",i.toSVGPath())}updatePath(e,i){c(this,Yn).get(e).setAttribute("d",i.toSVGPath())}updateBox(e,i){var n;_(n=je,dd,L0).call(n,c(this,Ae).get(e),i)}show(e,i){c(this,Ae).get(e).classList.toggle("hidden",!i)}rotate(e,i){c(this,Ae).get(e).setAttribute("data-main-rotation",i)}changeColor(e,i){c(this,Ae).get(e).setAttribute("fill",i)}changeOpacity(e,i){c(this,Ae).get(e).setAttribute("fill-opacity",i)}addClass(e,i){c(this,Ae).get(e).classList.add(i)}removeClass(e,i){c(this,Ae).get(e).classList.remove(i)}getSVGRoot(e){return c(this,Ae).get(e)}remove(e){c(this,Yn).delete(e),c(this,en)!==null&&(c(this,Ae).get(e).remove(),c(this,Ae).delete(e))}destroy(){S(this,en,null);for(const e of c(this,Ae).values())e.remove();c(this,Ae).clear(),c(this,Yn).clear()}};en=new WeakMap,hd=new WeakMap,Ae=new WeakMap,Yn=new WeakMap,dd=new WeakSet,L0=function(e,{x:i=0,y:n=0,width:l=1,height:o=1}={}){const{style:u}=e;u.top=`${100*n}%`,u.left=`${100*i}%`,u.width=`${100*l}%`,u.height=`${100*o}%`},Mr=new WeakSet,N0=function(e){var n;const i=je._svgFactory.create(1,1,!0);return c(this,en).append(i),i.setAttribute("aria-hidden",!0),_(n=je,dd,L0).call(n,i,e),i},T1=function(e,i){const n=je._svgFactory.createElement("clipPath");e.append(n);const l=`clip_${i}`;n.setAttribute("id",l),n.setAttribute("clipPathUnits","objectBoundingBox");const o=je._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${i}`),o.classList.add("clip"),l},w(je,dd);let O0=je;vt.AbortException;vt.AnnotationEditorLayer;vt.AnnotationEditorParamsType;vt.AnnotationEditorType;vt.AnnotationEditorUIManager;vt.AnnotationLayer;vt.AnnotationMode;vt.ColorPicker;vt.DOMSVGFactory;vt.DrawLayer;vt.FeatureTest;var rM=vt.GlobalWorkerOptions;vt.ImageKind;vt.InvalidPDFException;vt.MissingPDFException;vt.OPS;vt.OutputScale;vt.PDFDataRangeTransport;vt.PDFDateString;vt.PDFWorker;vt.PasswordResponses;vt.PermissionFlag;vt.PixelsPerInch;vt.RenderingCancelledException;vt.TextLayer;vt.UnexpectedResponseException;vt.Util;vt.VerbosityLevel;vt.XfaLayer;vt.build;vt.createValidAbsoluteUrl;vt.fetchData;vt.getDocument;vt.getFilenameFromUrl;vt.getPdfFilenameFromUrl;vt.getXfaPageViewport;vt.isDataScheme;vt.isPdfFile;vt.noContextMenu;vt.normalizeUnicode;vt.setLayerDimensions;vt.shadow;var oM=vt.version;rM.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${oM}/pdf.worker.min.js`;function cM(){const[b,e]=yo.useState(null),[i,n]=yo.useState(!0),[l,o]=yo.useState(!0),[u,d]=yo.useState(null),f="https://drive.google.com/file/d/11YdnH8awbbWfgUubrrFwoEg8krq1rYsj/preview";return yo.useEffect(()=>{fetch("https://ipapi.co/json/").then(g=>g.json()).then(g=>{e(g),n(!1)}).catch(()=>n(!1))},[]),Ge.jsxs("div",{className:"flex flex-col h-screen bg-gray-100",children:[Ge.jsxs("div",{className:"bg-white shadow-md p-4",children:[Ge.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Informacin de Ubicacin"}),i?Ge.jsx("p",{className:"text-gray-600",children:"Cargando ubicacin..."}):b&&Ge.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[Ge.jsxs("div",{children:[Ge.jsx("span",{className:"font-semibold",children:"Ciudad:"})," ",b.city]}),Ge.jsxs("div",{children:[Ge.jsx("span",{className:"font-semibold",children:"Pas:"})," ",b.country_name]}),Ge.jsxs("div",{children:[Ge.jsx("span",{className:"font-semibold",children:"ISP:"})," ",b.org]})]})]}),Ge.jsxs("div",{className:"flex-1 overflow-hidden p-2",children:[l&&Ge.jsx("div",{className:"flex items-center justify-center h-full",children:Ge.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}),Ge.jsx("iframe",{src:f,className:"w-full h-full border-none",onLoad:()=>o(!1)})]})]})}nx.createRoot(document.getElementById("root")).render(Ge.jsx(yo.StrictMode,{children:Ge.jsx(cM,{})}));
